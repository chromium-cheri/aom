{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "77d570c4_985a3e59",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-12-20T11:46:20Z",
      "side": 1,
      "message": "Hi Chi Yo, Wan-Teh and Yunqing,\n\nWe have modified the patch as per your suggestions. And also during patchset 2, we missed out on using the unified entropy cost update frequency (which was populated in populate_unified_cost_update_freq()) in delay_wait_for_top_right_sb(). The current patchset takes care of the same by modifying the functionality in delay_wait_for_top_right_sb(), based on unified cost update frequency rather than using both control time params and sf\u0027s settings.\n\nThe current patchset was verified to be bit-exact w.r.t. patchset 2 and also verified that the patch does not have any speed impact in multi-thread path.\n\nPlease review the patch.\n\nThanks \u0026 Regards,\nVenkata.\n",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0baeb18e_caa7045b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-20T23:53:53Z",
      "side": 1,
      "message": "Hi Venkata,\n\nChi Yo is out of the office this week. I will try to review patchset 3 this week.",
      "parentUuid": "77d570c4_985a3e59",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9f79ad72_817fd5d3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T01:22:47Z",
      "side": 1,
      "message": "Hi Venkata,\n\nI only reviewed the diffs between patchset 2 and patchset 3. I assume Chi Yo has reviewed patchset 2.\n\nI suggest some changes.",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2a8fdd25_6a37a89d",
        "filename": "av1/encoder/encoder.h",
        "patchSetId": 3
      },
      "lineNbr": 227,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T01:22:47Z",
      "side": 1,
      "message": "Optional: It would be good to explain why INTERNAL_COST_UPD_SBROW_SET exists but COST_UPD_SBROW_SET doesn\u0027t, because that seems to contradict this \\warning comment.",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "838739fa_d0556f6b",
        "filename": "av1/encoder/encoder.h",
        "patchSetId": 3
      },
      "lineNbr": 227,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-12-21T12:41:01Z",
      "side": 1,
      "message": "Hi Wan-Teh,\n\nThe reason to add the enum \u0027INTERNAL_COST_UPDATE_TYPE\u0027 was explained here in \nhttps://aomedia-review.googlesource.com/c/aom/+/150281/3/av1/encoder/speed_features.h#308. Let us know if we need to add the comment here explaining the same.\n\nAnd also, in the current patch the unified cost update frequencies are stored in speed features (corresponds to INTERNAL_COST_UPDATE_TYPE enum) and the same are used throughout the encoder for cost updates. Hence, it is needed that the all possible update frequencies need to present in enum INTERNAL_COST_UPDATE_TYPE and the other way is not necessary. Hence, any additions/modifications done to this enum need to be in sync with \u0027INTERNAL_COST_UPDATE_TYPE \u0027",
      "parentUuid": "2a8fdd25_6a37a89d",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "33c56d57_20244c31",
        "filename": "av1/encoder/rd.c",
        "patchSetId": 3
      },
      "lineNbr": 649,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T01:22:47Z",
      "side": 1,
      "message": "Nit: sfs \u003d\u003e speed features\n\nPlease make this change to all occurrences of \"sfs\".\n\n\"sfs\" is not a common abbreviation, and is never used in the libaom code base before this CL.\n\nNote: \"sf\" is probably okay because it is already used in names such as \"inter_sf\" and \"intra_sf\".",
      "range": {
        "startLine": 649,
        "startChar": 13,
        "endLine": 649,
        "endChar": 16
      },
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e7890da_ab8f3d82",
        "filename": "av1/encoder/rd.c",
        "patchSetId": 3
      },
      "lineNbr": 649,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T01:29:28Z",
      "side": 1,
      "message": "Related to my comment on the abbreviation \"sfs\", I also don\u0027t understand the term \"control time\" as used in \"control time params\" and \"control time settings\".\n\nI searched for \"control time\" in the libaom codebase and did not find any hits. It would be good to come up with an alternative term for \"control time\". I can try to suggest something if I know what it refers to.",
      "parentUuid": "33c56d57_20244c31",
      "range": {
        "startLine": 649,
        "startChar": 13,
        "endLine": 649,
        "endChar": 16
      },
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ecf7ab95_fb4c9594",
        "filename": "av1/encoder/rd.c",
        "patchSetId": 3
      },
      "lineNbr": 649,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T02:30:18Z",
      "side": 1,
      "message": "\u003e Related to my comment on the abbreviation \"sfs\", I also don\u0027t understand the term \"control time\" as used in \"control time params\" and \"control time settings\".\n\nVenkata: I think \"control time\" refers to \"codec control\", as in aom_codec_control(). So \"control time settings\" refers to the settings set by aom_codec_control() or aom_codec_set_option(). Correct?",
      "parentUuid": "8e7890da_ab8f3d82",
      "range": {
        "startLine": 649,
        "startChar": 13,
        "endLine": 649,
        "endChar": 16
      },
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2d7d21c_bd28e3ad",
        "filename": "av1/encoder/rd.c",
        "patchSetId": 3
      },
      "lineNbr": 649,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-12-21T12:41:01Z",
      "side": 1,
      "message": "Yes, \"control time settings\" refers to the settings set by aom_codec_control() or aom_codec_set_option().\n\nFor better understanding, modified the commit message description and comments related to this patch, by replacing \"control time params/settings\" -\u003e \"codec control params/settings\" and \"sfs\" -\u003e \"speed features\".",
      "parentUuid": "ecf7ab95_fb4c9594",
      "range": {
        "startLine": 649,
        "startChar": 13,
        "endLine": 649,
        "endChar": 16
      },
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e67528f_e47116fe",
        "filename": "av1/encoder/rd.c",
        "patchSetId": 3
      },
      "lineNbr": 651,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T01:22:47Z",
      "side": 1,
      "message": "Nit: add \"update\" before \"frequencies\".",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4b1fc15d_10e65602",
        "filename": "av1/encoder/rd.c",
        "patchSetId": 3
      },
      "lineNbr": 651,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-12-21T12:41:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7e67528f_e47116fe",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "542aa349_ca4e019f",
        "filename": "av1/encoder/rd.c",
        "patchSetId": 3
      },
      "lineNbr": 662,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T01:22:47Z",
      "side": 1,
      "message": "Nit/optional: The naming convention for constants in the Style Guide is kFooBar. Under that naming convention, this constant array should be named kMapCostUpdToInternalCostUpd. However, I don\u0027t know if libaom follows the naming convention for constants of the Style Guide.",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d38261b2_48439f5f",
        "filename": "av1/encoder/rd.c",
        "patchSetId": 3
      },
      "lineNbr": 662,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-12-21T12:41:01Z",
      "side": 1,
      "message": "Hi Wan-Teh,\n\nAs per libaom, the mentioned naming convention was not used at most of the places in the encoder but the same was followed in unit-tests.\n\nPlease let us know if we should use the existing or rename the array name to the suggested.",
      "parentUuid": "542aa349_ca4e019f",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b8279dd_cde5aa58",
        "filename": "av1/encoder/speed_features.h",
        "patchSetId": 3
      },
      "lineNbr": 314,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T01:22:47Z",
      "side": 1,
      "message": "IMPORTANT: Because of the use of AOMMIN() in populate_unified_cost_update_freq() to compute the worst case update frequencies, the values of this enum type must be listed in the order of increasing frequencies. This should be documented.",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "130a70e3_a6eb8ec2",
        "filename": "av1/encoder/speed_features.h",
        "patchSetId": 3
      },
      "lineNbr": 314,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-12-21T12:41:01Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9b8279dd_cde5aa58",
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0d6e706_cb81b4dc",
        "filename": "av1/encoder/speed_features.h",
        "patchSetId": 3
      },
      "lineNbr": 316,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-12-21T01:22:47Z",
      "side": 1,
      "message": "Nit: Should this \\warning comment be stated in the other way around?\n\n * \\warning  In case of any updates/modifications to the enum\n * INTERNAL_COST_UPDATE_TYPE, update the enum COST_UPDATE_TYPE as well.",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 316,
        "endChar": 53
      },
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22970ce9_3037ef34",
        "filename": "av1/encoder/speed_features.h",
        "patchSetId": 3
      },
      "lineNbr": 316,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-12-21T12:41:01Z",
      "side": 1,
      "message": "The enums \u0027COST_UPDATE_TYPE\u0027 (corresponds to codec control settings) and \u0027INTERNAL_COST_UPDATE_TYPE\u0027 (corresponds to speed features) are used to derive the unified cost update frequency by considering the worst out of these two update frequencies. And the unified update frequency is stored in speed features (of type INTERNAL_COST_UPDATE_TYPE) and the same is used throughout encoder. Hence, it is needed that the enum \u0027INTERNAL_COST_UPDATE_TYPE\u0027 (corresponds to speed features) should have all possible types of cost update frequencies. Hence, any changes done to the enum \u0027COST_UPDATE_TYPE\u0027 (corresponds to codec control settings) needs to be present in INTERNAL_COST_UPDATE_TYPE and other way need not be necessary.",
      "parentUuid": "e0d6e706_cb81b4dc",
      "range": {
        "startLine": 315,
        "startChar": 0,
        "endLine": 316,
        "endChar": 53
      },
      "revId": "b1a8337b91e93482ebf8b3abdaa80c4cfb219fd8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}