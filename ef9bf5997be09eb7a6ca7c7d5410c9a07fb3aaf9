{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "917e61c5_69aec6e6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6585
      },
      "writtenOn": "2021-10-09T00:48:31Z",
      "side": 1,
      "message": "I also found that the cl below should be reverted.\nhttps://aomedia-review.googlesource.com/c/aom/+/144882\n\nBecause, line 665 early returns, as WRITE_FEATURE_TO_FILE is always 0.\nAnd the check is skipped. The unit test is not actually executed.\n\nI do not have a good solution to this right now. How about just disable the test?",
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "220a6692_7b602200",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5020
      },
      "writtenOn": "2021-10-09T02:05:54Z",
      "side": 1,
      "message": "\u003e I also found that the cl below should be reverted.\n\u003e https://aomedia-review.googlesource.com/c/aom/+/144882\n\u003e \n\u003e Because, line 665 early returns, as WRITE_FEATURE_TO_FILE is always 0.\n\u003e And the check is skipped. The unit test is not actually executed.\n\u003e \n\u003e I do not have a good solution to this right now. How about just disable the test?\n\nWe can move the check up in the test to skip the encode and make it noop, but I\u0027m not sure I understand the purpose of this check.",
      "parentUuid": "917e61c5_69aec6e6",
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c9b99c6_4370b51f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6585
      },
      "writtenOn": "2021-10-11T18:36:32Z",
      "side": 1,
      "message": "My intent of using \"WRITE_FEATURE_TO_FILE\" and \"is_test_mode\" is:\n(1). WRITE_FEATURE_TO_FILE is set to 0 by default so that is doesn\u0027t affect the encoder\u0027s default behavior. We can set to 1 to get print text information for feature information.\n(2). \"is_test_mode\" is used in the test. The test first sets it to 0 and run the encoder to ask the function to print features to text. Then the test sets it to 1 and run the encoder, this time no text print, but pass feature information through a callback function.\nAnd finally the test compares feature information between these two runs.\n\n\nI realize that here using two variables to determine whether to call a function seems not straight forward.\nWithout the unit test, I think there will be no confusion.\nI think I can refactor the test, for example, adding a separate but exact function and let the test call that function.",
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9ebb33a_4accd97e",
        "filename": "av1/encoder/partition_strategy.c",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 6585
      },
      "writtenOn": "2021-10-09T00:48:31Z",
      "side": 1,
      "message": "I go back and check the code. The original logic is correct. It can\u0027t be changed.",
      "range": {
        "startLine": 112,
        "startChar": 3,
        "endLine": 112,
        "endChar": 55
      },
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e678bd3f_2de18f26",
        "filename": "av1/encoder/partition_strategy.c",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 5020
      },
      "writtenOn": "2021-10-09T02:05:54Z",
      "side": 1,
      "message": "\u003e I go back and check the code. The original logic is correct. It can\u0027t be changed.\n\nIt seems without WRITE_FEATURE_TO_FILE this should be a noop like in the test, so maybe we should just remove the check on is_test_mode. How is that used by the callers?",
      "parentUuid": "c9ebb33a_4accd97e",
      "range": {
        "startLine": 112,
        "startChar": 3,
        "endLine": 112,
        "endChar": 55
      },
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c435ecd2_5569521a",
        "filename": "av1/encoder/partition_strategy.c",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 6585
      },
      "writtenOn": "2021-10-11T18:22:32Z",
      "side": 1,
      "message": "Please notice the original logic.\nEven though WRITE_FEATURE_TO_FILE is 0, as long as is_test_mode \u003d 1, then the function will write to texts.\nThat\u0027s why we can\u0027t change the logic.",
      "parentUuid": "e678bd3f_2de18f26",
      "range": {
        "startLine": 112,
        "startChar": 3,
        "endLine": 112,
        "endChar": 55
      },
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "00b7adc8_316575c4",
        "filename": "av1/encoder/partition_strategy.c",
        "patchSetId": 1
      },
      "lineNbr": 121,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-10-08T23:14:28Z",
      "side": 1,
      "message": "This entire if statement should be deleted because !is_test_mode must be false at this point.",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 121,
        "endChar": 3
      },
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "83d3e3f8_0c4c3749",
        "filename": "av1/encoder/partition_strategy.c",
        "patchSetId": 1
      },
      "lineNbr": 121,
      "author": {
        "id": 5020
      },
      "writtenOn": "2021-10-08T23:20:24Z",
      "side": 1,
      "message": "\u003e This entire if statement should be deleted because !is_test_mode must be false at this point.\n\ngood point, I didn\u0027t read through the function that closely. maybe I misunderstood the intent of the initial check. Cheng, should that just have been !WRITE_FEATURE_TO_FILE? or did you only want to write a file with is_test_mode\u003dtrue?",
      "parentUuid": "00b7adc8_316575c4",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 121,
        "endChar": 3
      },
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "371cd50c_f6debaf1",
        "filename": "av1/encoder/partition_strategy.c",
        "patchSetId": 1
      },
      "lineNbr": 121,
      "author": {
        "id": 6585
      },
      "writtenOn": "2021-10-11T18:22:32Z",
      "side": 1,
      "message": "Still, please not the original logic.\nIf WRITE_FEATURE_TO_FILE is 1, the function will execute to this line,\nand then the condition is self-stand.",
      "parentUuid": "83d3e3f8_0c4c3749",
      "range": {
        "startLine": 119,
        "startChar": 0,
        "endLine": 121,
        "endChar": 3
      },
      "revId": "ef9bf5997be09eb7a6ca7c7d5410c9a07fb3aaf9",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}