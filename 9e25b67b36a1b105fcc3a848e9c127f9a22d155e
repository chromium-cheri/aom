{
  "comments": [
    {
      "key": {
        "uuid": "5220a284_637f1072",
        "filename": "av1/common/av1_loopfilter.c",
        "patchSetId": 2
      },
      "lineNbr": 2423,
      "author": {
        "id": 5020
      },
      "writtenOn": "2017-10-04T23:30:30Z",
      "side": 1,
      "message": "you could just cast this to unsigned to avoid the branch",
      "revId": "9e25b67b36a1b105fcc3a848e9c127f9a22d155e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68ddf8fb_c302dd0d",
        "filename": "av1/common/av1_loopfilter.c",
        "patchSetId": 2
      },
      "lineNbr": 2423,
      "author": {
        "id": 6000
      },
      "writtenOn": "2017-10-05T08:38:48Z",
      "side": 1,
      "message": "A cast to unsigned doesn\u0027t remove the warning:\n\n../av1/common/av1_loopfilter.c: In function ‘av1_filter_block_plane_non420_ver’:\n../av1/common/av1_loopfilter.c:2423:32: warning: ‘~’ on a boolean expression [-Wbool-operation]\n     unsigned int border_mask \u003d ~((unsigned int)(mi_col \u003d\u003d 0));\n                                ^\n\nPlease note that the ternary doesn\u0027t actually introduce any branching here, the generated code is exactly the same as before, as you can see from the below script:\n\n\n#!/usr/bin/env bash\nset -euo pipefail\n\nfunction do_one_build\n{\n  local bin\u003d$1\n  rm -rf \"$bin\" \u0026\u0026 mkdir -p \"$bin\"\n  pushd \"$bin\" \u003e/dev/null\n\n  ../configure \u003e/dev/null\n  make \u003e/dev/null 2\u003e/dev/null\n  objdump -d aomenc \u003e aomenc.asm\n\n  popd \u003e/dev/null\n}\n\ngit reset --hard origin/master\ndo_one_build bin-before\n\n# apply patch\ngit fetch -q https://aomedia.googlesource.com/aom refs/changes/82/25582/2 \u0026\u0026 git cherry-pick FETCH_HEAD\ndo_one_build bin-after\n\ndiff bin-before/aomenc.asm bin-after/aomenc.asm \u0026\u0026 echo \"Same files\"\n\n\n--------------------------------------------\nExecution log:\n\nHEAD is now at a1a1e365a Resolve some static analysis warnings\n[master 8d3b2ac5f] Fix warning about bitwise \u0027not\u0027 on boolean\n Date: Wed Oct 4 10:09:13 2017 +0200\n 1 file changed, 1 insertion(+), 1 deletion(-)\nSame files",
      "parentUuid": "5220a284_637f1072",
      "revId": "9e25b67b36a1b105fcc3a848e9c127f9a22d155e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    }
  ]
}