{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "23137007_b3ab6860",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-08-13T13:22:21Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nCurrently \u0027lf-\u003emode_ref_delta_enabled\u0027 is set to its default value 1 in set_default_lf_deltas(). This initialization happens whenever a KEY_FRAME or a frame with primary reference frame as NONE is encountered. For all other frames, the value from the previous frame persists and is never updated. During FPMT, when parallel cpi\u0027s are launched, the cpi\u0027s corresponding to LF_UPDATE frames have their primary_ref_frame as NONE and hence lf-\u003emode_ref_delta_enabled gets initialized with its default value, 1. But a frame_parallel_level 2 INTNL_ARF_UPDATE frame needs explicit initialization and this patch handles the same.\n\nThis patch also has changes in is_fp_config() to disable FPMT for single pass encoding.\n\nThis change is bit-exact and has been locally verified with bitstream match tests over a combination of various configuration values for --threads, --tile-rows, --tile-columns, --cpu-used, --end-usage, --row-mt, etc. \n\nPlease review.\n\nRegards,\nRemya",
      "revId": "6e3e384e81a9c3c3405c615c62686d33ba340aab",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}