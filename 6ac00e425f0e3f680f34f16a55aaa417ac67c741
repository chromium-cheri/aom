{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6d09dfaa_af4b15cb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-02T06:36:30Z",
      "side": 1,
      "message": "can this CL be reviewed or pushed forward ?",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2f41592_a34c94b2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-08T11:41:58Z",
      "side": 1,
      "message": "Any update on this CL.",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4c97e48_8a466b72",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-15T05:05:00Z",
      "side": 1,
      "message": "Any Updates on this CL",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "61b69172_a0047cba",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-16T18:42:12Z",
      "side": 1,
      "message": "This needs two reviewers to land. There are still a few issues with this patchset.",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "924325ab_2c019e08",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 19
      },
      "lineNbr": 0,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-22T12:15:33Z",
      "side": 1,
      "message": "I have added the comments  in file . please check, and let me know if thats ok, other changes are ready once this is confirmed will push",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "014ad182_2d571aac",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-16T18:42:12Z",
      "side": 1,
      "message": "It is strange that these are in a C++ header. How can this be included in a C file if it includes C++ syntax.\n\nI made this comment earlier, but I don\u0027t think the resolution is correct:\n\nhttps://aomedia-review.googlesource.com/c/aom/+/189121/15..19/av1/ratectrl_rtc.h#b125",
      "fixSuggestions": [
        {
          "fixId": "68c4603e_be510790",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "av1/ratectrl_rtc.h",
              "range": {
                "startLine": 124,
                "startChar": 0,
                "endLine": 151,
                "endChar": 0
              },
              "replacement": ""
            }
          ]
        }
      ],
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ffdcd1c1_fb87b449",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-17T11:47:59Z",
      "side": 1,
      "message": "Could you please mention which header file to have all this. \nbecause I felt the source file : ratectrl_rtc.cc and its corresponding header file : ratectrl_rtc.h, its c level api export are added here, if its ok to have new header file let me know.",
      "parentUuid": "014ad182_2d571aac",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a48e07bc_cc278bc7",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-17T18:16:13Z",
      "side": 1,
      "message": "\u003e Could you please mention which header file to have all this. \n\u003e because I felt the source file : ratectrl_rtc.cc and its corresponding header file : ratectrl_rtc.h, its c level api export are added here, if its ok to have new header file let me know.\n\nYou can have it in this header file but you need to block out the C++ code with `#ifdef __cplusplus`. The functions don\u0027t belong in a namespace and the tests should call the functions without it. For example:\n\nhttps://source.chromium.org/chromium/chromium/src/+/main:third_party/libgav1/src/src/gav1/decoder.h;l\u003d39;drc\u003d933ff6b0cea80eaf6b48dd461b47831c46ca768f\n\nHow do you plan to use the header? Do you have some code that is already using this patch? If it\u0027s C++ code, then I don\u0027t see the need for adding C functions.",
      "parentUuid": "ffdcd1c1_fb87b449",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6693dea_2a29a482",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-22T15:37:08Z",
      "side": 1,
      "message": "please check the comment on the file.",
      "parentUuid": "a48e07bc_cc278bc7",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "23de3706_2ea39df6",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-22T17:57:19Z",
      "side": 1,
      "message": "\u003e please check the comment on the file.\n\nThe point is `namespace aom` is not under the flag. If you include this header in C source file and use a C compiler to compile it, it will fail. See the link I posted previously for reference.",
      "parentUuid": "a6693dea_2a29a482",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7b68ce5e_c036ef52",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-23T14:39:15Z",
      "side": 1,
      "message": "waiting for reply.",
      "parentUuid": "23de3706_2ea39df6",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "38db042f_d6554e54",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-23T23:29:47Z",
      "side": 1,
      "message": "\u003e waiting for reply.\n\nThere\u0027s been no change to the code. Have you tried using this header in a C source file compiled with a C (not C++) compiler?",
      "parentUuid": "7b68ce5e_c036ef52",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1c80353_1cd88f0e",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-23T23:30:24Z",
      "side": 1,
      "message": "\u003e \u003e waiting for reply.\n\u003e \n\u003e There\u0027s been no change to the code. Have you tried using this header in a C source file compiled with a C (not C++) compiler?\n\nMarking unresolved for visibility.",
      "parentUuid": "38db042f_d6554e54",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fbd41ae5_3c594eba",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-24T16:58:07Z",
      "side": 1,
      "message": "I could separate the extern \"C\"  from namespace aom,  But for the code to compile it should be done alias for the struct used.\nUploaded the patch, if OK will proceed for next comment.",
      "parentUuid": "d1c80353_1cd88f0e",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db9d6e6a_e97c6c7b",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-24T21:05:20Z",
      "side": 1,
      "message": "\u003e I could separate the extern \"C\"  from namespace aom,  But for the code to compile it should be done alias for the struct used.\n\u003e Uploaded the patch, if OK will proceed for next comment.\n\nHere is a simplified example of the problem I\u0027ve described:\n\n**ratectrl_rtc.h**\n\n```c++\nnamespace aom {\nstruct AV1RateControlRtcConfig {\n public:\n  AV1RateControlRtcConfig();\n  int width;\n  int height;\n  // ...\n};\n}  // namespace aom\ntypedef aom::AV1RateControlRtcConfig AV1RateControlRtcConfigAlias;\n#if defined(__cplusplus)\nextern \"C\" {\n#endif\nvoid *create_av1_ratecontrol_rtc(const AV1RateControlRtcConfigAlias \u0026rc_cfg);\n#if defined(__cplusplus)\n}  // extern \"C\"\n#endif  // __cplusplus\n```\n\n**test.c**\n\n```c\n#include \"ratectrl_rtc.h\"\n\nint main(void) {}\n```\n\n```\n$ g++ test.c\n# compiles fine as C++\n\n$ gcc test.c\nIn file included from test.c:1:\nratectrl_rtc.h:1:1: error: unknown type name ‘namespace’\n    1 | namespace aom {\n      | ^~~~~~~~~\nratectrl_rtc.h:1:15: error: expected ‘\u003d’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘{’ token\n    1 | namespace aom {\n      |               ^\nratectrl_rtc.h:10:12: error: expected ‘\u003d’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘::’ token\n   10 | typedef aom::AV1RateControlRtcConfig AV1RateControlRtcConfigAlias;\n      |            ^~\nratectrl_rtc.h:14:40: warning: type defaults to ‘int’ in declaration of ‘AV1RateControlRtcConfigAlias’ [-Wimplicit-int]\n   14 | void *create_av1_ratecontrol_rtc(const AV1RateControlRtcConfigAlias \u0026rc_cfg);\n      |                                        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~\nratectrl_rtc.h:14:69: error: expected ‘;’, ‘,’ or ‘)’ before ‘\u0026’ token\n   14 | void *create_av1_ratecontrol_rtc(const AV1RateControlRtcConfigAlias \u0026rc_cfg);\n      |   \n```",
      "parentUuid": "fbd41ae5_3c594eba",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7ce301da_48ed77b2",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-25T05:11:12Z",
      "side": 1,
      "message": "done.",
      "parentUuid": "db9d6e6a_e97c6c7b",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "260d295c_7ba4d5ac",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-25T22:30:13Z",
      "side": 1,
      "message": "\u003e done.\n\nThe code has still not resolved the example I gave. Again, I\u0027d like to know how you plan on using this interface. As it is now you have functions providing C linkage, but to use this header file you will need to compile the code as C++.",
      "parentUuid": "7ce301da_48ed77b2",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fa193b51_930293d2",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-26T06:24:57Z",
      "side": 1,
      "message": "I have added the same code in  Patchset 22. Please check.",
      "parentUuid": "260d295c_7ba4d5ac",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "70bfb10c_3628ecdc",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-29T19:19:23Z",
      "side": 1,
      "message": "\u003e I have added the same code in  Patchset 22. Please check.\n\nThis is still incorrect in patchset 23. Please see the earlier comments and example.",
      "parentUuid": "fa193b51_930293d2",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8461a40_3d2a82b8",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 124,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-08-01T16:32:48Z",
      "side": 1,
      "message": "i ma working on this c and cpp compilation. just init function is pending, because one of the structure member in \nAV1RateControlRtcConfig \nis_screen  \u003d 0 , which is not getting accpeted by gcc.\n\nthe whole file will be like below:\n/*\n * Copyright (c) 2021, Alliance for Open Media. All rights reserved.\n *\n * This source code is subject to the terms of the BSD 2 Clause License and\n * the Alliance for Open Media Patent License 1.0. If the BSD 2 Clause License\n * was not distributed with this source code in the LICENSE file, you can\n * obtain it at www.aomedia.org/license/software. If the Alliance for Open\n * Media Patent License 1.0 was not distributed with this source code in the\n * PATENTS file, you can obtain it at www.aomedia.org/license/patent.\n */\n#ifndef AOM_AV1_RATECTRL_RTC_H_\n#define AOM_AV1_RATECTRL_RTC_H_\n#if defined(__cplusplus)\n#include \u003ccstdint\u003e\n#include \u003cmemory\u003e\n#else\n#include \u003cstddef.h\u003e\n#include \u003cstdint.h\u003e\n#if __STDC__VERSION__\u003e\u003d199901L\n#include \u003cstdbool.h\u003e\n#endif\n#endif\n#if defined(__cplusplus)\nstruct AV1_COMP;\nnamespace aom {\n// These constants come from AV1 spec.\nstatic constexpr size_t kAV1MaxLayers \u003d 32;\nstatic constexpr size_t kAV1MaxTemporalLayers \u003d 8;\nstatic constexpr size_t kAV1MaxSpatialLayers \u003d 4;\nenum FrameType { kKeyFrame, kInterFrame };\nstruct AV1RateControlRtcConfig {\n public:\n  AV1RateControlRtcConfig();\n  int width;\n  int height;\n  // Flag indicating if the content is screen or not.\n  bool is_screen \u003d false;\n  // 0-63\n  int max_quantizer;\n  int min_quantizer;\n  int64_t target_bandwidth;\n  int64_t buf_initial_sz;\n  int64_t buf_optimal_sz;\n  int64_t buf_sz;\n  int undershoot_pct;\n  int overshoot_pct;\n  int max_intra_bitrate_pct;\n  int max_inter_bitrate_pct;\n  int frame_drop_thresh;\n  int max_consec_drop;\n  double framerate;\n  int layer_target_bitrate[kAV1MaxLayers];\n  int ts_rate_decimator[kAV1MaxTemporalLayers];\n  int aq_mode;\n  // Number of spatial layers\n  int ss_number_layers;\n  // Number of temporal layers\n  int ts_number_layers;\n  int max_quantizers[kAV1MaxLayers];\n  int min_quantizers[kAV1MaxLayers];\n  int scaling_factor_num[kAV1MaxSpatialLayers];\n  int scaling_factor_den[kAV1MaxSpatialLayers];\n};\nstruct AV1FrameParamsRTC {\n  FrameType frame_type;\n  int spatial_layer_id;\n  int temporal_layer_id;\n};\nstruct AV1LoopfilterLevel {\n  int filter_level[2];\n  int filter_level_u;\n  int filter_level_v;\n};\nstruct AV1CdefInfo {\n  int cdef_strength_y;\n  int cdef_strength_uv;\n  int damping;\n};\nstruct AV1SegmentationData {\n  const uint8_t *segmentation_map;\n  size_t segmentation_map_size;\n  const int *delta_q;\n  size_t delta_q_size;\n};\nenum class FrameDropDecision {\n  kOk,    // Frame is encoded.\n  kDrop,  // Frame is dropped.\n};\nclass AV1RateControlRTC {\n public:\n  static std::unique_ptr\u003cAV1RateControlRTC\u003e Create(\n      const AV1RateControlRtcConfig \u0026cfg);\n  ~AV1RateControlRTC();\n  bool UpdateRateControl(const AV1RateControlRtcConfig \u0026rc_cfg);\n  // GetQP() needs to be called after ComputeQP() to get the latest QP\n  int GetQP() const;\n  // GetLoopfilterLevel() needs to be called after ComputeQP()\n  AV1LoopfilterLevel GetLoopfilterLevel() const;\n  // GetCdefInfo() needs to be called after ComputeQP()\n  AV1CdefInfo GetCdefInfo() const;\n  // Returns the segmentation map used for cyclic refresh, based on 4x4 blocks.\n  bool GetSegmentationData(AV1SegmentationData *segmentation_data) const;\n  // ComputeQP returns the QP if the frame is not dropped (kOk return),\n  // otherwise it returns kDrop and subsequent GetQP and PostEncodeUpdate\n  // are not to be called (av1_rc_postencode_update_drop_frame is already\n  // called via ComputeQP if drop is decided).\n  FrameDropDecision ComputeQP(const AV1FrameParamsRTC \u0026frame_params);\n  // Feedback to rate control with the size of current encoded frame\n  void PostEncodeUpdate(uint64_t encoded_frame_size);\n private:\n  AV1RateControlRTC() \u003d default;\n  bool InitRateControl(const AV1RateControlRtcConfig \u0026cfg);\n  AV1_COMP *cpi_;\n  int initial_width_;\n  int initial_height_;\n};\n}  // namespace aom\ntypedef aom::AV1RateControlRtcConfig AV1RateControlRtcConfigAlias;\ntypedef aom::AV1LoopfilterLevel AV1LoopfilterLevelAlias;\ntypedef aom::FrameDropDecision FrameDropDecisionAlias;\ntypedef aom::AV1FrameParamsRTC AV1FrameParamsRTCAlias;\ntypedef aom::AV1SegmentationData AV1SegmentationDataAlias;\ntypedef aom::AV1CdefInfo AV1CdefInfoAlias;\ntypedef aom::AV1RateControlRtcConfig AV1RateControlRtcConfigAlias;\nextern \"C\" {\nvoid *create_av1_ratecontrol_rtc(const AV1RateControlRtcConfigAlias \u0026rc_cfg);\nbool update_ratecontrol_av1(void *controller,\n                            const AV1RateControlRtcConfigAlias \u0026rc_cfg);\nint get_qp_ratecontrol_av1(void *controller);\nAV1LoopfilterLevelAlias get_loop_filter_level_ratecontrol_av1(void *controller);\nFrameDropDecisionAlias compute_qp_ratecontrol_av1(\n    void *controller, const AV1FrameParamsRTCAlias \u0026frame_params);\nvoid post_encode_update_ratecontrol_av1(void *controller,\n                                        uint64_t encoded_frame_size);\nbool get_segmentation_data_av1(void *controller,\n                               AV1SegmentationDataAlias *segmentation_data);\nAV1CdefInfoAlias get_cdef_info_av1(void *controller);\nAV1RateControlRtcConfigAlias *create_av1_ratecontrol_config();\nvoid destroy_av1_ratecontrol_rtc(void *controller);\n}  // extern \"C\"\n#else // #if defined(__cplusplus)\n/* These constants come from AV1 spec.*/\n#define kAV1MaxLayers 32\n#define kAV1MaxTemporalLayers 8\n#define kAV1MaxSpatialLayers 4\nenum FrameType { kKeyFrame \u003d 0, kInterFrame \u003d 1 };\n\n\nstruct AV1RateControlRtcConfig {\n  int width;\n  int height;\n  // Flag indicating if the content is screen or not.\n  bool is_screen ;\n  // 0-63\n  int max_quantizer;\n  int min_quantizer;\n  int64_t target_bandwidth;\n  int64_t buf_initial_sz;\n  int64_t buf_optimal_sz;\n  int64_t buf_sz;\n  int undershoot_pct;\n  int overshoot_pct;\n  int max_intra_bitrate_pct;\n  int max_inter_bitrate_pct;\n  int frame_drop_thresh;\n  int max_consec_drop;\n  double framerate;\n  int layer_target_bitrate[kAV1MaxLayers];\n  int ts_rate_decimator[kAV1MaxTemporalLayers];\n  int aq_mode;\n  // Number of spatial layers\n  int ss_number_layers;\n  // Number of temporal layers\n  int ts_number_layers;\n  int max_quantizers[kAV1MaxLayers];\n  int min_quantizers[kAV1MaxLayers];\n  int scaling_factor_num[kAV1MaxSpatialLayers];\n  int scaling_factor_den[kAV1MaxSpatialLayers];\n};\nstruct AV1FrameParamsRTC {\n  // FrameType frame_type;\n  int spatial_layer_id;\n  int temporal_layer_id;\n};\nstruct AV1LoopfilterLevel {\n  int filter_level[2];\n  int filter_level_u;\n  int filter_level_v;\n};\nstruct AV1CdefInfo {\n  int cdef_strength_y;\n  int cdef_strength_uv;\n  int damping;\n};\nstruct AV1SegmentationData {\n  const uint8_t *segmentation_map;\n  size_t segmentation_map_size;\n  const int *delta_q;\n  size_t delta_q_size;\n};\nenum FrameDropDecision {\n  kOk,    // Frame is encoded.\n  kDrop,  // Frame is dropped.\n};\nvoid *create_av1_ratecontrol_rtc(const struct AV1RateControlRtcConfig *rc_cfg);\nint update_ratecontrol_av1(void *controller,\n                           const struct AV1RateControlRtcConfig *rc_cfg);\nint get_qp_ratecontrol_av1(void *controller);\nstruct AV1LoopfilterLevel get_loop_filter_level_ratecontrol_av1(\n    void *controller);\nenum FrameDropDecision compute_qp_ratecontrol_av1(\n    void *controller, const struct AV1FrameParamsRTC *frame_params);\nvoid post_encode_update_ratecontrol_av1(void *controller,\n                                        uint64_t encoded_frame_size);\nint get_segmentation_data_av1(void *controller,\n                              struct AV1SegmentationData *segmentation_data);\nstruct AV1CdefInfo get_cdef_info_av1(void *controller);\nstruct AV1RateControlRtcConfig *create_av1_ratecontrol_config();\nvoid destroy_av1_ratecontrol_rtc(void *controller);\n#endif  // __cplusplus\n#endif  // AOM_AV1_RATECTRL_RTC_H_",
      "parentUuid": "70bfb10c_3628ecdc",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae076e8b_fdb34d0f",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 146,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-16T18:42:12Z",
      "side": 1,
      "message": "destroy",
      "range": {
        "startLine": 146,
        "startChar": 5,
        "endLine": 146,
        "endChar": 12
      },
      "fixSuggestions": [
        {
          "fixId": "41d9d16d_dae7e838",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "av1/ratectrl_rtc.h",
              "range": {
                "startLine": 146,
                "startChar": 0,
                "endLine": 147,
                "endChar": 0
              },
              "replacement": "void destroy_av1_ratecontrol_rtc(void *controller);\n"
            }
          ]
        }
      ],
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b28469ae_fc693e59",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 146,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-17T11:47:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ae076e8b_fdb34d0f",
      "range": {
        "startLine": 146,
        "startChar": 5,
        "endLine": 146,
        "endChar": 12
      },
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "17f95233_22b9cba1",
        "filename": "av1/ratectrl_rtc.h",
        "patchSetId": 19
      },
      "lineNbr": 146,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-22T15:37:08Z",
      "side": 1,
      "message": "it is done.",
      "parentUuid": "b28469ae_fc693e59",
      "range": {
        "startLine": 146,
        "startChar": 5,
        "endLine": 146,
        "endChar": 12
      },
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68d93b8e_c80f1fda",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-16T18:42:12Z",
      "side": 1,
      "message": "Copying the full implementation of the existing class isn\u0027t the best. Could it be extended to have a flag to test the C interface instead?",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53ec473c_385d7dcf",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-17T11:47:59Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "68d93b8e_c80f1fda",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9b1dd086_f53a4292",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-22T15:37:08Z",
      "side": 1,
      "message": "Not yet Done, will check.",
      "parentUuid": "53ec473c_385d7dcf",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5fbb662b_2145f9c6",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-23T14:38:51Z",
      "side": 1,
      "message": "Earlier the methods in the class RcExternMethodsInterfaceTest were a part of \nRcInterfaceTest\n\nThere was no extra class. Upon some review comments this new class is added, Kindly let me know does need to move back.",
      "parentUuid": "9b1dd086_f53a4292",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5e06835_5f79ecc9",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-23T23:29:47Z",
      "side": 1,
      "message": "\u003e Earlier the methods in the class RcExternMethodsInterfaceTest were a part of \n\u003e RcInterfaceTest\n\u003e \n\u003e There was no extra class. Upon some review comments this new class is added, Kindly let me know does need to move back.\n\nI would prefer to reduce the amount of new code. If this is identical to the existing test and only call the C interface, that sounds like a case for a flag in the class.",
      "parentUuid": "5fbb662b_2145f9c6",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fa8233cf_cb7c0292",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-26T06:25:32Z",
      "side": 1,
      "message": "Will see to it. after the patchset22 is ok.",
      "parentUuid": "b5e06835_5f79ecc9",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf6d7850_b479a05e",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-29T19:19:23Z",
      "side": 1,
      "message": "\u003e Will see to it. after the patchset22 is ok.\n\nMarking this unresolved for visibility.",
      "parentUuid": "fa8233cf_cb7c0292",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e390654a_3c5c73fb",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-07-30T08:40:03Z",
      "side": 1,
      "message": "Is Patchset 22 is OK to go ahead. ?",
      "parentUuid": "bf6d7850_b479a05e",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9162526_1023f359",
        "filename": "test/ratectrl_rtc_test.cc",
        "patchSetId": 19
      },
      "lineNbr": 487,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-07-31T02:14:12Z",
      "side": 1,
      "message": "\u003e Is Patchset 22 is OK to go ahead. ?\n\nNo. See the comments in the other unresolved block:\n\nhttps://aomedia-review.googlesource.com/c/aom/+/189121/15..22/av1/ratectrl_rtc.h#b125\n\nI\u0027ve replied multiple times to it and gave an example of the issue.",
      "parentUuid": "e390654a_3c5c73fb",
      "revId": "6ac00e425f0e3f680f34f16a55aaa417ac67c741",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}