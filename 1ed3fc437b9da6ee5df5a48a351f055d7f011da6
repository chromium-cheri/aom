{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1dc40f15_b262c61b",
        "filename": "av1/common/arm/highbd_convolve_neon.c",
        "patchSetId": 12
      },
      "lineNbr": 1420,
      "author": {
        "id": 5020
      },
      "writtenOn": "2023-05-16T19:16:10Z",
      "side": 1,
      "message": "Are 2 temporaries needed? The C code and SSE4 seem to get away with 1.",
      "revId": "1ed3fc437b9da6ee5df5a48a351f055d7f011da6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3a961e3b_30c7816c",
        "filename": "av1/common/arm/highbd_convolve_neon.c",
        "patchSetId": 12
      },
      "lineNbr": 1420,
      "author": {
        "id": 32122
      },
      "writtenOn": "2023-05-16T19:19:32Z",
      "side": 1,
      "message": "Yes, in order to avoid branching within the main loop, I\u0027ve separated all the extra compound averaging *after* the x\u0026y convolution has been done. This does unfortunately need an extra temporary. I was wondering if we could do vla (variable-length-array) which is C99. Otherwise, I can convert to heap allocation with aom_memalign.",
      "parentUuid": "1dc40f15_b262c61b",
      "revId": "1ed3fc437b9da6ee5df5a48a351f055d7f011da6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e0650273_342c2634",
        "filename": "av1/common/arm/highbd_convolve_neon.c",
        "patchSetId": 12
      },
      "lineNbr": 1420,
      "author": {
        "id": 5020
      },
      "writtenOn": "2023-05-16T19:28:38Z",
      "side": 1,
      "message": "\u003e Yes, in order to avoid branching within the main loop, I\u0027ve separated all the extra compound averaging *after* the x\u0026y convolution has been done. This does unfortunately need an extra temporary. I was wondering if we could do vla (variable-length-array) which is C99. Otherwise, I can convert to heap allocation with aom_memalign.\n\nVLA\u0027s / alloca() are not allowed. A heap allocation is an OK place to start, this feature isn\u0027t used that widely.",
      "parentUuid": "3a961e3b_30c7816c",
      "revId": "1ed3fc437b9da6ee5df5a48a351f055d7f011da6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "75e0a8ad_7107ed76",
        "filename": "av1/common/arm/highbd_convolve_neon.c",
        "patchSetId": 12
      },
      "lineNbr": 1420,
      "author": {
        "id": 32122
      },
      "writtenOn": "2023-05-16T19:35:28Z",
      "side": 1,
      "message": "Ok, will do heap allocation then, what\u0027s the expected behaviour if allocation fails? Just exit(1)? I saw there is a macro CHECK_MEM_ERROR but it expects a context for the log message.",
      "parentUuid": "e0650273_342c2634",
      "revId": "1ed3fc437b9da6ee5df5a48a351f055d7f011da6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "627a2e5d_26f23004",
        "filename": "av1/common/arm/highbd_convolve_neon.c",
        "patchSetId": 12
      },
      "lineNbr": 1420,
      "author": {
        "id": 5020
      },
      "writtenOn": "2023-05-17T00:49:29Z",
      "side": 1,
      "message": "\u003e Ok, will do heap allocation then, what\u0027s the expected behaviour if allocation fails? Just exit(1)? I saw there is a macro CHECK_MEM_ERROR but it expects a context for the log message.\n\nWe don\u0027t use heap allocations that much at this level. You can just return from the function.",
      "parentUuid": "75e0a8ad_7107ed76",
      "revId": "1ed3fc437b9da6ee5df5a48a351f055d7f011da6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4ca2dd63_7549ea28",
        "filename": "av1/common/arm/highbd_convolve_neon.c",
        "patchSetId": 12
      },
      "lineNbr": 1420,
      "author": {
        "id": 32122
      },
      "writtenOn": "2023-05-17T07:19:22Z",
      "side": 1,
      "message": "I\u0027ve added an exit(1), if the system can\u0027t allocate 128k of memory, the encoder will have more serious problems anyway ðŸ˜Š",
      "parentUuid": "627a2e5d_26f23004",
      "revId": "1ed3fc437b9da6ee5df5a48a351f055d7f011da6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}