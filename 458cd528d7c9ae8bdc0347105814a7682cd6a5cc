{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d952e16c_8d1eba6d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 6245
      },
      "writtenOn": "2022-12-16T15:04:08Z",
      "side": 1,
      "message": "Hi Yunqing,\nIn this CL, we fixed consistency issues with the speed feature recode_tolerance.\n\nAs set_good_speed_feature_framesize_dependent() is called after set_good_speed_features_framesize_independent(), the value of speed feature recode_tolerance was being overwritten with unintended values for speed\u003d6, \u003e\u003d 720p resolutions. In this CL, the speed feature setting is moved to set_good_speed_feature_framesize_dependent() to avoid the issue.\n\nPlease check the borg results for good encoding mode below:\n```\n                 Instruction Count      BD-Rate Loss(%)\ncpu   Testset       Reduction(%)    avg.psnr   ovr.psnr    ssim\n 6      HDRES2        0.481          0.0708     0.0812    0.0083\n```\n\nThe instruction count reduction specified has been measured using command:\n $ perf stat -e instructions:u ./aomenc …\n\nWe also verified that CL produces bit-exact output for all resolutions in case of ‘good’, speed\u003d5 and LOWRES2, MIDRES2 test-sets in case of ‘good’, speed\u003d6.\n\nWe also found that in the following CL, the sf value is set based on rc_cfg-\u003eunder_shoot_pct and rc_cfg-\u003eover_shoot_pct (for \u003c 720p resolution).\nhttps://aomedia-review.googlesource.com/c/aom/+/133982\nWhen  rc_cfg-\u003eunder_shoot_pct and rc_cfg-\u003eover_shoot_pct are set as 100 (typical settings used), the sf value is consistent across presets. If rc_cfg-\u003eunder_shoot_pct and rc_cfg-\u003eover_shoot_pct are set to larger values than 100, the tolerance value for high quality presets can be more than that of faster presets. However we did not look into the same as the issue will not be seen for typical/default settings.\n\nPlease review the CL. \n\nRegards,\nRanjit",
      "revId": "458cd528d7c9ae8bdc0347105814a7682cd6a5cc",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}