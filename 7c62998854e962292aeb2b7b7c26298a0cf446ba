{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d5b0822b_d198b9c6",
        "filename": "test/filterintra_test.cc",
        "patchSetId": 5
      },
      "lineNbr": 222,
      "author": {
        "id": 9545
      },
      "writtenOn": "2020-12-21T19:17:55Z",
      "side": 1,
      "message": "I added this test to compare libaom and libgav1\u0027s C implementations of filter intra predictor. I ran this test on my Lenovo P920 Linux workstation, which has a huge amount of memory.\n\nWhen compiled with clang 7.0.1, av1_filter_intra_predictor_gav1 is slightly slower in all test cases.\n\nWhen compiled with gcc 10.2.0, av1_filter_intra_predictor_gav1 is slightly faster in some test cases and slightly slower in others.\n\nSince the size of the \u0027buffer\u0027 local variable is 1 KB (bit depth 8) or 2 KB (high bit depths), which is only borderline big, it does not seem necessary to switch to libgav1\u0027s version.\n\nSample runs of this test.\n\n1. clang 7.0.1\n\ncmake ../aom -G Ninja -DCMAKE_C_COMPILER\u003dclang -DCMAKE_CXX_COMPILER\u003dclang++\nninja\n./test_libaom --gtest_filter\u003d*FilterIntraPred* --gtest_also_run_disabled_tests\n\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/0 \nc_time \u003d 388     simd_time \u003d 397         Gain \u003d 0.98     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/0 (1 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/1\nc_time \u003d 1407    simd_time \u003d 1475        Gain \u003d 0.95     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/1 (3 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/2 \nc_time \u003d 5430    simd_time \u003d 5854        Gain \u003d 0.93     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/2 (11 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/3\nc_time \u003d 20723   simd_time \u003d 21912       Gain \u003d 0.95     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/3 (43 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/4 \nc_time \u003d 799     simd_time \u003d 812         Gain \u003d 0.98     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/4 (2 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/5 \nc_time \u003d 688     simd_time \u003d 730         Gain \u003d 0.94     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/5 (1 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/6 \nc_time \u003d 2746    simd_time \u003d 2894        Gain \u003d 0.95     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/6 (6 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/7 \nc_time \u003d 2740    simd_time \u003d 2925        Gain \u003d 0.94     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/7 (5 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/8 \nc_time \u003d 10853   simd_time \u003d 11740       Gain \u003d 0.92     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/8 (23 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/9 \nc_time \u003d 10430   simd_time \u003d 11003       Gain \u003d 0.95     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/9 (21 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/10\nc_time \u003d 1525    simd_time \u003d 1577        Gain \u003d 0.97     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/10 (3 ms)\n\n...\n\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/60\nc_time \u003d 802     simd_time \u003d 811         Gain \u003d 0.99     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/60 (2 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/61\nc_time \u003d 689     simd_time \u003d 730         Gain \u003d 0.94     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/61 (1 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/62\nc_time \u003d 2746    simd_time \u003d 2894        Gain \u003d 0.95     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/62 (6 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/63\nc_time \u003d 2751    simd_time \u003d 2924        Gain \u003d 0.94     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/63 (5 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/64\nc_time \u003d 10863   simd_time \u003d 11612       Gain \u003d 0.94     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/64 (23 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/65\nc_time \u003d 10415   simd_time \u003d 10992       Gain \u003d 0.95     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/65 (21 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/66\nc_time \u003d 1523    simd_time \u003d 1578        Gain \u003d 0.97     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/66 (3 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/67\nc_time \u003d 1405    simd_time \u003d 1487        Gain \u003d 0.94     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/67 (3 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/68\nc_time \u003d 5438    simd_time \u003d 5728        Gain \u003d 0.95     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/68 (11 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/69\nc_time \u003d 5180    simd_time \u003d 5523        Gain \u003d 0.94     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/69 (11 ms)\n\n2. gcc 10.2.0\n\ncmake ../aom -G Ninja\nninja\n./test_libaom --gtest_filter\u003d*FilterIntraPred* --gtest_also_run_disabled_tests\n\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/0\nc_time \u003d 374     simd_time \u003d 356         Gain \u003d 1.05     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/0 (1 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/1\nc_time \u003d 1014    simd_time \u003d 1036        Gain \u003d 0.98     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/1 (2 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/2\nc_time \u003d 3607    simd_time \u003d 3734        Gain \u003d 0.97     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/2 (7 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/3\nc_time \u003d 13487   simd_time \u003d 14418       Gain \u003d 0.94     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/3 (28 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/4\nc_time \u003d 644     simd_time \u003d 607         Gain \u003d 1.06     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/4 (1 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/5\nc_time \u003d 567     simd_time \u003d 566         Gain \u003d 1.00     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/5 (1 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/6\nc_time \u003d 2025    simd_time \u003d 2003        Gain \u003d 1.01     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/6 (4 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/7\nc_time \u003d 1873    simd_time \u003d 1935        Gain \u003d 0.97     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/7 (4 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/8\nc_time \u003d 7131    simd_time \u003d 7340        Gain \u003d 0.97     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/8 (15 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/9\nc_time \u003d 6732    simd_time \u003d 7338        Gain \u003d 0.92     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/9 (14 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/10\nc_time \u003d 1221    simd_time \u003d 1154        Gain \u003d 1.06     mode \u003d  0 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/10 (2 ms)\n\n...\n\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/60\nc_time \u003d 631     simd_time \u003d 600         Gain \u003d 1.05     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/60 (1 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/61\nc_time \u003d 569     simd_time \u003d 565         Gain \u003d 1.01     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/61 (1 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/62\nc_time \u003d 2036    simd_time \u003d 2008        Gain \u003d 1.01     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/62 (4 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/63\nc_time \u003d 1869    simd_time \u003d 1928        Gain \u003d 0.97     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/63 (4 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/64\nc_time \u003d 7131    simd_time \u003d 7360        Gain \u003d 0.97     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/64 (15 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/65\nc_time \u003d 6733    simd_time \u003d 7348        Gain \u003d 0.92     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/65 (14 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/66\nc_time \u003d 1241    simd_time \u003d 1152        Gain \u003d 1.08     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/66 (2 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/67\nc_time \u003d 948     simd_time \u003d 1002        Gain \u003d 0.95     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/67 (2 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/68\nc_time \u003d 3983    simd_time \u003d 3874        Gain \u003d 1.03     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/68 (8 ms)\n[ RUN      ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/69\nc_time \u003d 3407    simd_time \u003d 3690        Gain \u003d 0.92     mode \u003d  4 \n[       OK ] Gav1/AV1FilterIntraPredTest.DISABLED_Speed/69 (7 ms)",
      "revId": "7c62998854e962292aeb2b7b7c26298a0cf446ba",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}