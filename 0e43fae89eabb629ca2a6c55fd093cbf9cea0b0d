{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "38d51449_44865bc0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-02-10T06:23:08Z",
      "side": 1,
      "message": "Hi Wan-Teh,\n\nPlease review.",
      "revId": "0e43fae89eabb629ca2a6c55fd093cbf9cea0b0d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "506263f5_89d6b637",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-02-10T19:44:10Z",
      "side": 1,
      "message": "Jingning: PTAL. Thanks!",
      "revId": "0e43fae89eabb629ca2a6c55fd093cbf9cea0b0d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab680ec1_55816618",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 9
      },
      "lineNbr": 2145,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-02-11T06:38:09Z",
      "side": 1,
      "message": "Venkata: I chatted with Jingning more. He said that even lag_in_frames cannot be used as a reliable signal to decide the max number of successive no-show frames.\n\nMaybe we can use a conservative change first:\n\n  int max_pending_frames \u003d 8;\n  if (cpi-\u003eoxcf.input_cfg.limit !\u003d 0)\n    max_pending_frames \u003d AOMMIN(max_pending_frames, cpi-\u003eoxcf.input_cfg.limit);\n  size_t data_sz \u003d frame_sz * max_pending_frames;\n\nI will take a look at how hard it is to dynamically grow the buffer size. It does not seem very easy.",
      "range": {
        "startLine": 2145,
        "startChar": 54,
        "endLine": 2145,
        "endChar": 67
      },
      "revId": "0e43fae89eabb629ca2a6c55fd093cbf9cea0b0d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73ae2d57_272ae35b",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 9
      },
      "lineNbr": 2151,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-02-11T01:40:50Z",
      "side": 1,
      "message": "Venkata: I discussed this CL with Jingning. He suggested that we replace\n\n    ctx-\u003ecpi-\u003eoxcf.gf_cfg.gf_max_pyr_height + 1\n\nwith 8 (which is the maximum number of reference frames in AV1). He said in principle one can use more than gf_max_pyr_height. Maybe it\u0027s not a good idea for typical compression performance but it does exist.\n\nI have a question: if SVC is enabled, do we need to consider the number of spatial layers?\n\nI know you aim for a general solution that will benefit not only image encoding but also RTC and all keyframe video encoding. But I suggest we use a conservative, partial solution first.\n\nAlso, it may be better to pursue a dynamic approach (in a separate CL). Instead of estimating the maximum bitstream buffer size, we can start with a small size, say one frame, and grow the buffer when it is too small.",
      "range": {
        "startLine": 2151,
        "startChar": 23,
        "endLine": 2151,
        "endChar": 66
      },
      "revId": "0e43fae89eabb629ca2a6c55fd093cbf9cea0b0d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}