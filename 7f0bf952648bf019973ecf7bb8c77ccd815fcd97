{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d7bb04a1_a468c825",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 14993
      },
      "writtenOn": "2022-03-14T18:45:33Z",
      "side": 1,
      "message": "Hi Wan-Teh, Frank,\n\nThe structure \u0027sms_tree\u0027 is used to store the simple motion search data for partition pruning in inter frames. The same is not required during allintra encoding. Hence, this CL avoids the relevant memory allocations and initializations for allintra encoding mode.\n\nThe encode time reduction seems to be present as the call to aom_calloc() is avoided along with relevant initializations in av1_setup_sms_tree() for allintra encoding mode.\n\nFor libaom AV1 video encode, bit-match is verified (w.r.t. parent commit) for \u0027GOOD\u0027, \u0027RT\u0027 and \u0027ALLINTRA\u0027 encoding modes for a few contents with different encoding configurations. It was also verified that the output of AVIF encode is bit-exact w.r.t. parent version for a typical image dataset.\n\nHEAP memory reduction was measured using the command below. \n$valgrind --tool\u003dmassif ./aomenc â€¦\n\nPlease review.\n\nRegards,\nJayasanker.",
      "revId": "7f0bf952648bf019973ecf7bb8c77ccd815fcd97",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ded23a16_5e74cfd4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-03-22T18:50:43Z",
      "side": 1,
      "message": "LGTM. I am sorry that I forgot to review this CL.\n\nJust a suggestion to add a short comment to the source code. You can just copy the nice description in the commit message and your message to me, and condense it to one or two sentences.",
      "revId": "7f0bf952648bf019973ecf7bb8c77ccd815fcd97",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c065bebb_a4082fdc",
        "filename": "av1/encoder/context_tree.c",
        "patchSetId": 2
      },
      "lineNbr": 221,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-03-22T18:50:43Z",
      "side": 1,
      "message": "Nit: It would be good to add a comment to note that sms_tree is not required during all-intra encoding, so we can avoid the memory allocation and initialization.",
      "revId": "7f0bf952648bf019973ecf7bb8c77ccd815fcd97",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}