{
  "comments": [
    {
      "key": {
        "uuid": "350b415b_b56bad51",
        "filename": "av1/decoder/decodemv.c",
        "patchSetId": 42
      },
      "lineNbr": 408,
      "author": {
        "id": 5035
      },
      "writtenOn": "2017-11-09T23:23:26Z",
      "side": 1,
      "message": "Although the skipped block does not go through quantization, didn\u0027t we want to return \u0027pred\u0027 here, when current block is skipped and its q_segmentation_id is set as \u0027pred\u0027?",
      "range": {
        "startLine": 408,
        "startChar": 11,
        "endLine": 408,
        "endChar": 12
      },
      "revId": "f624dd5a820a8a3209afd9adb3dcde646b5c91f2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "40a81527_511ac5dd",
        "filename": "av1/decoder/decodemv.c",
        "patchSetId": 42
      },
      "lineNbr": 408,
      "author": {
        "id": 6510
      },
      "writtenOn": "2017-11-10T00:33:04Z",
      "side": 1,
      "message": "I wasn\u0027t sure its the right thing to do. If we did this we\u0027d have to modify and make the encoder also apply (not just store and use for prediction) the segment ID we decide. And that would also mean the patch would be a lot more complicated to use since the AQ algorithms themselves would need to be aware of what value would be predicted so they\u0027d change the value they store in their map.\nComplexity aside, simply changing mbmi-\u003eq_segment_id in the encoder isn\u0027t going to work since we encode segment values much later than we do RDO.",
      "parentUuid": "350b415b_b56bad51",
      "range": {
        "startLine": 408,
        "startChar": 11,
        "endLine": 408,
        "endChar": 12
      },
      "revId": "f624dd5a820a8a3209afd9adb3dcde646b5c91f2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a8dffd1_28df595a",
        "filename": "av1/decoder/decodemv.c",
        "patchSetId": 42
      },
      "lineNbr": 408,
      "author": {
        "id": 5075
      },
      "writtenOn": "2017-11-11T05:47:33Z",
      "side": 1,
      "message": "I\u0027m not sure it\u0027s the right thing to do either, but it *does* seem like we give up a lot of the effectiveness of spatial prediction without it.\n\nI don\u0027t know that mbmi-\u003eq_segment_id should affect anything if the encoder has a different idea about what it is in skipped blocks than the decoder (which is not the same thing as saying it *doesn\u0027t* affect anything), assuming the encoder uses the correct value for predicting other blocks when writing the bitstream, of course.\n\nIt does potentially make encoder optimization harder, as it means greedy decisions can have very non-local effects. I think that\u0027s already true, however (we\u0027re just not currently trying to do the kinds of optimization of our choice of q_segment_id where it would matter).\n\nBut the patch isn\u0027t broken without it, which is why I +2\u0027d it. We can still consider whether or not we want to change things in a separate patch.",
      "parentUuid": "40a81527_511ac5dd",
      "range": {
        "startLine": 408,
        "startChar": 11,
        "endLine": 408,
        "endChar": 12
      },
      "revId": "f624dd5a820a8a3209afd9adb3dcde646b5c91f2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}