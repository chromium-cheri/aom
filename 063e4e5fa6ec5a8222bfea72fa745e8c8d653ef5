{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "de5592ee_c12f8f46",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 5
      },
      "lineNbr": 364,
      "author": {
        "id": 6585
      },
      "writtenOn": "2021-06-23T00:04:57Z",
      "side": 1,
      "message": "why is this parameter changed to a constant?\nSame for LOW_CODED_ERR_PER_MB.",
      "range": {
        "startLine": 364,
        "startChar": 0,
        "endLine": 364,
        "endChar": 31
      },
      "revId": "063e4e5fa6ec5a8222bfea72fa745e8c8d653ef5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "debc2486_0ee96a19",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 5
      },
      "lineNbr": 364,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-23T16:35:40Z",
      "side": 1,
      "message": "To me these two macros are intended to avoid \"weird\" rate control results when the sequence is quite static and the errors are very small. But they were not designed for per MB usage. Now that we are normalizing per MB, I just made them reasonably small.\n\nIt is possible that they can be further tuned, but I don\u0027t think they are used that often in most video sequences.",
      "parentUuid": "de5592ee_c12f8f46",
      "range": {
        "startLine": 364,
        "startChar": 0,
        "endLine": 364,
        "endChar": 31
      },
      "revId": "063e4e5fa6ec5a8222bfea72fa745e8c8d653ef5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "69223fd9_9530c264",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 5
      },
      "lineNbr": 364,
      "author": {
        "id": 6585
      },
      "writtenOn": "2021-06-23T18:18:06Z",
      "side": 1,
      "message": "I recommend not changing these two parameters, instead, multiply by num_mbs to compare against them.\nFor example, line 391,\nif (sr_dff * num_mbs \u003e LOW_SR_DIFF_THRESH)",
      "parentUuid": "debc2486_0ee96a19",
      "range": {
        "startLine": 364,
        "startChar": 0,
        "endLine": 364,
        "endChar": 31
      },
      "revId": "063e4e5fa6ec5a8222bfea72fa745e8c8d653ef5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "34f3997f_d628da00",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 5
      },
      "lineNbr": 364,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-23T18:30:29Z",
      "side": 1,
      "message": "I agree that to perform in the exact same way as before, we should do that. However conceptually I still think we should not multiply num_mbs. \n\nIn the example in line 391, we are trying to see if the difference of sr error is large enough for calculating its decay factor. In this case it makes more sense to look at normalized data as an \"average\" of the statistics, instead of the sum of it in the whole frame (that would imply that for higher resolution we are a lot more OK with smaller changes).\n\nFor LOW_CODED_ERR_PER_MB it is even more so. Its name indicates that it is a per-MB value, but before this patch it was used to compare with frame-level stats, which looked incorrect to me as well.\n\nThat said, maybe we can re-tune these two values (but again they are only used to guard agains really small values of errors, and that does not happen that often anyways).",
      "parentUuid": "69223fd9_9530c264",
      "range": {
        "startLine": 364,
        "startChar": 0,
        "endLine": 364,
        "endChar": 31
      },
      "revId": "063e4e5fa6ec5a8222bfea72fa745e8c8d653ef5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bf1c3e9a_ebba6d60",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 5
      },
      "lineNbr": 364,
      "author": {
        "id": 6585
      },
      "writtenOn": "2021-06-23T18:41:55Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "34f3997f_d628da00",
      "range": {
        "startLine": 364,
        "startChar": 0,
        "endLine": 364,
        "endChar": 31
      },
      "revId": "063e4e5fa6ec5a8222bfea72fa745e8c8d653ef5",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}