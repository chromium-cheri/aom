{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "c4b60cf1_cf4e6bef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 6245
      },
      "writtenOn": "2022-10-10T10:40:16Z",
      "side": 1,
      "message": "Hi Marco, Yunqing,\nWe were working on an optimization to avoid dry-run encoding for the last split partition (with no further split, under nonrd_check_partition_merge_mode speed feature).\nhttps://aomedia-review.googlesource.com/c/aom/+/164324\n \nThough we were expecting bit-exact output with above CL, the above CL did not produce bit-exact output. We found that the issue is with the calculation of x-\u003eactual_num_seg1_blocks and x-\u003eactual_num_seg1_blocks which need to be calculated/accounted for only when dry_run\u003dOUTPUT_ENABLED. We fixed this issue in the current CL and observed that the above CL produces bit-exact output w.r.t. current CL.\n\nPlease check the borg results for rtc test-set below. \n```\n               Instruction Count           BD-Rate Loss(%)\ncpu Resolution    Reduction(%)       avg.psnr   ovr.psnr   ssim\n 7    rtc_derf     -0.002             0.0391     0.0444   0.1238\n 7         rtc      0.004            -0.0146    -0.0166  -0.0164\n 7   rtc_1080p     -0.033            -0.2242    -0.2229  -0.2672\n```\nPlease check the details of contents with maximum BD-Rate drop (avg.psnr) below. Though there are maximum BD-Rate drops as summarized below, we feel that this CL should be considered as it fixes a bug with accumulation logic.\n \n```\n                            \t\t        BD-Rate Loss(%)\ncpu         Content          \t      avg.psnr   ovr.psnr   ssim\n 7     capture_nexus_320_240           0.4286     0.6825    0.9767\n 7     jimred_320_240                  0.3146     0.2756    0.4387\n\n```\nThe instruction count reduction specified has been measured using command:\n $ perf stat -e instructions:u ./aomenc …\n\nWe also verified for a few contents and speed settings that CL produces bit-exact output for –good usage.\n\nPlease review the CL. Once the current CL is merged, we shall verify and submit the other CL. \n\nRegards,\nRanjit",
      "revId": "fb69356f0e4feab399f070f870ad177f1c92ead2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}