{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "51e69b9a_5e88f8b5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14993
      },
      "writtenOn": "2021-11-03T09:47:51Z",
      "side": 1,
      "message": "Hi Chi Yo, Yunqing,\n\nThe frame buffer trial_frame_rst is used during loop restoration filter search. Hence, the memory allocation for the same is moved to av1_pick_filter_restoration() and alloc_util_frame_buffers() is cleaned up.\n\nThis is a follow-up CL to the following comment:\nhttps://aomedia-review.googlesource.com/c/aom/+/147101/3/av1/encoder/encoder_alloc.h#356\n\nWe thought that it would be cleaner to move the allocation of trial_frame_rst rather than to rename alloc_util_frame_buffers(). This change also reduces the number of calls to aom_realloc_frame_buffer() from 1(init) + n (1 call per frame) to n(1 call per frame).\n\nThis patch will not have any impact on encode time or heap memory as the buffer allocation for trial_frame_rst was already happening under the condition “if (is_restoration_used(cm))” in the parent version.\n\nFor libaom AV1 video encode, bit-match is verified (w.r.t. parent commit) for \u0027GOOD\u0027, \u0027RT\u0027 and \u0027ALLINTRA\u0027 encoding modes for a few contents with different encoding configurations. It was also verified that the output of AVIF encode is bit-exact w.r.t. parent version for a typical image dataset.\n\nPlease review.\n\nRegards,\nJayasanker.",
      "revId": "7292b2421badc76bc06ce970884376c9e907fc1b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c1e8bdde_62cc7115",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-11-03T22:32:29Z",
      "side": 1,
      "message": "LGTM. Thanks!",
      "revId": "7292b2421badc76bc06ce970884376c9e907fc1b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}