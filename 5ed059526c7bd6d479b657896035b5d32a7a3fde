{
  "comments": [
    {
      "key": {
        "uuid": "7ca94b78_b8c99ed5",
        "filename": "av1/decoder/decodeframe.c",
        "patchSetId": 8
      },
      "lineNbr": 2297,
      "author": {
        "id": 5075
      },
      "writtenOn": "2017-06-24T00:44:27Z",
      "side": 1,
      "message": "If you\u0027d like to avoid the division, something like\n\naom_cdf_prob ft \u003d CDF_PROB_TOP - c0;\naom_cdf_prob d \u003d CDF_PROB_TOP - (ft \u003c\u003c (CDF_PROB_BITS - get_msb(ft) - 1));\naom_cdf_prob p1 \u003d c1 - c0;\nright_e_cdf[0] \u003d AOM_ICDF(p1 + AOMMIN(p1, d));\n\nis relatively cheap to compute and should have minimal performance loss.\n\nHowever, both your code and my rewrite above make the probability of PARTITION_SPLIT proportional to the probability of PARTITION_VERT + PARTITION_SPLIT in this case, but in the block below, PARTITION_SPLIT is just proportional to the probability of PARTITION_SPLIT.\n\nWas that intentional, or did you mean to use (c1 - c0) + (CDF_PROB_TOP - AOM_ICDF(partition_cdf[2])) instead of (32768U - c0)?",
      "revId": "5ed059526c7bd6d479b657896035b5d32a7a3fde",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f897992c_a03ac84e",
        "filename": "av1/decoder/decodeframe.c",
        "patchSetId": 8
      },
      "lineNbr": 2298,
      "author": {
        "id": 5075
      },
      "writtenOn": "2017-06-24T00:44:27Z",
      "side": 1,
      "message": "If we still intend to support !CONFIG_EC_SMALLMUL, then this hard-coded 0 should be AOM_ICDF(CDF_PROB_TOP) instead.",
      "revId": "5ed059526c7bd6d479b657896035b5d32a7a3fde",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "79f2e28f_ff5f26fb",
        "filename": "av1/decoder/decodeframe.c",
        "patchSetId": 8
      },
      "lineNbr": 2309,
      "author": {
        "id": 5075
      },
      "writtenOn": "2017-06-24T00:44:27Z",
      "side": 1,
      "message": "Same here.",
      "revId": "5ed059526c7bd6d479b657896035b5d32a7a3fde",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}