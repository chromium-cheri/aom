{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ba0404f9_ec271fc8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 9616
      },
      "writtenOn": "2022-06-06T06:38:51Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis patch merges the code related to FPMT interface in encoder_encode() and multithread framework changes under CONFIG_FRAME_PARALLEL_ENCODE to the default path. This patch also enables the usage of the configuration parameter --fp-mt in the default path.\n\nWhile testing, it was observed that the unit test \u0027RcInterfaceTest\u0027 runs for 250 frames resulting in \u0027cpi-\u003egf_frame_index\u0027 to reach MAX_STATIC_GF_GROUP_LENGTH and thereby causing an out of bounds exception while accessing gf_group elements in encoder_encode(). In the parent version, this was handled because of the early termination in av1_encode_strategy() before any gf_group element was being accessed. Hence to handle this case now, this patch also adds the code to reset \u0027cpi-\u003egf_frame_index\u0027 in encoder_encode() when it reaches the maximum limit of MAX_STATIC_GF_GROUP_LENGTH.\n\nThis patch is bit-exact and has been locally verified with bitstream match tests in both the default and FPMT path. We have also validated this patch with address, thread, undefined and integer sanitizers.\n\nPlease review.\n\nRegards,\nRemya",
      "revId": "ee3b1a8ec4ea5ce294c127811a694ebb4f09de23",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4539e506_d16dabc4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-06-06T15:22:37Z",
      "side": 1,
      "message": "Resetting \u0027cpi-\u003egf_frame_index\u0027 sounds right. Thanks for handling that.\nBy the way, while FPMT code becomes the default, it would be helpful if more comments/documentation can be added. Please feel free to add more comments if you can.",
      "parentUuid": "ba0404f9_ec271fc8",
      "revId": "ee3b1a8ec4ea5ce294c127811a694ebb4f09de23",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "ee3b1a8ec4ea5ce294c127811a694ebb4f09de23",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforced_gerrit"]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "ee3b1a8ec4ea5ce294c127811a694ebb4f09de23",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI or human verified the change"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "ee3b1a8ec4ea5ce294c127811a694ebb4f09de23",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}