{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d4007c47_3f676af9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 6245
      },
      "writtenOn": "2022-06-08T17:59:37Z",
      "side": 1,
      "message": "Hi Wan-Teh, Chi-Yo,\n\nIn this CL, we have introduced a speed feature  ‘prune_intra_tx_depths_using_nn’ to prune the transform depth evaluation. Currently, the speed feature prunes either 8x8 or 4x4 transform at most and is applicable only for 8x8 blocks. \n\nThe speed feature introduces a neural network classifier which uses features obtained using 8x8 intra residual (similar to ml_predict_tx_split()), source variance and dc quant. The ML model is evaluated after preparing intra prediction data in block_rd_txfm() in order to facilitate the pruning of 8x8 transform size (depth\u003d0) as well. The CL is enabled for allintra, speed\u003e\u003d6 and does not have any impact for speed\u003d9.\n\nFor AVIF still-image encode with tune\u003dpsnr,\n                  Encode Time     BD-Rate Loss(%)      \n       speed      Reduction(%)    psnr      ssim\n        6           4.651         0.1673   -0.3944\n        7           9.158         0.1232   -0.5128\n        8          10.448         0.1885   -0.1937\n\nFor AVIF still image encode with tune\u003dssim,\n                  Encode Time     BD-Rate Loss(%)      \n       speed      Reduction(%)    psnr      ssim\n        6           3.890         0.1954    0.0228\n        7           8.782         0.1240   -0.2798\n        8           9.757         0.1861    0.0311\n\nFollowing are the instruction count reduction results when libaom allintra frame encoding (50 frames) was tested for a borg setup. \n               Instruction Count        BD-Rate Loss(%)      \n     cpu-used    Reduction(%)     avg.psnr  ovr.psnr      ssim\n         6          4.764\t  0.2607     0.2637\t-0.1266\n         7          8.919\t  0.3116     0.3132\t-0.2397\n         8         11.277\t  0.2701     0.2726\t-0.1978\n \n\nFor libaom AV1 video encode, bit-match is verified (w.r.t. parent commit) for \u0027GOOD\u0027 and \u0027RT\u0027 encoding modes for a few contents with different encoding configurations. It is verified that the CL is bit-exact for allintra encode, speed\u003d5,9 with no speed impact.\n\nThe instruction count reduction specified has been measured using the command:\n$ perf stat -e instructions:u ./aomenc …\n\nPlease review the CL. \n\nRegards,\nRanjit\n",
      "revId": "a964966f0cbb1ca837f1fc82794a5e9378d8d590",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}