{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d0e896ab_1c5a0d3a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 8893
      },
      "writtenOn": "2022-08-12T11:49:01Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nIn this patch, we have reduced the value of border_in_pixels used during the source frame buffer allocation for realtime encoding mode. For realtime encoding mode, as motion search w.r.t source frame (as done in temporal filtering) is not applicable, border pixels required is limited to number of pixels required to align the frame width/height to superblock size. Also, because of a check present in calc_stride_and_planesize(), number of border pixels is aligned to a multiple of 32. The optimization is disabled in case of resize/superres.  \n\nThis CL is bit-exact with no impact on encode-time.\n\nThe peak memory reduction achieved are as follows:\n```\n                   Peak Memory Reduction (%)\nResolution    cpu 6   cpu 7  cpu 8   cpu 9   cpu 10\n320x180       3.43    3.58   3.58    3.58    3.58\n320x240       3.34    3.47   3.46    3.46    3.46\n640x360       2.81    2.87   2.87    2.87    2.87\n640x480       2.57    2.62   2.62    2.62    2.62\n1280x720      0.90    0.91   0.91    0.91    0.91\n\t\t\t  \t\t\t\t\nAverage       2.61    2.69   2.69    2.69    2.69\n```\nMemory is measured using the command\n valgrind --tool\u003dmassif ./aomenc ...\n \nPlease review.\nThank you.",
      "revId": "a133ac3831cbee86838ba1d4d204212666d7f293",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}