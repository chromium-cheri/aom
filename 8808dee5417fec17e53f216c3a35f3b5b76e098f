{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9913690b_923870a7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5022
      },
      "writtenOn": "2021-06-04T17:47:15Z",
      "side": 1,
      "message": "lgtm\n\nWan-Teh, ptal too. thanks",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3bdb0f5b_e7060674",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-04T18:05:00Z",
      "side": 1,
      "message": "Hi Bohan,\n\nI will review this CL today.",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f2161afe_41d23966",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-04T22:50:20Z",
      "side": 1,
      "message": "Bohan: I think the CL is correct. I have some questions for you. The most important question is the first one, concerning whether it is possible to avoid break binary compatibility.",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea4989aa_9662234e",
        "filename": "aom/aom_encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 163,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-04T22:50:20Z",
      "side": 1,
      "message": "This change breaks binary compatibility because it changes the numeric value of AOM_RC_LAST_PASS. (When we break binary compatibility, we need to bump the major version number of libaom.) Ideally we should add AOM_RC_SECOND_PASS after AOM_RC_LAST_PASS.\n\nDoes your code depend on the property that AOM_RC_FIRST_PASS has value 1 and AOM_RC_SECOND_PASS has value 2?",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "46454ee4_8ef3492c",
        "filename": "aom/aom_encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 163,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-04T23:12:25Z",
      "side": 1,
      "message": "A related question is: do we need an enum that indicates the final pass of a multi-pass mode?\n\nAnother potential solution is to add a \u0027passes\u0027 field to store the total number of passes. Then we can compare \u0027pass\u0027 with \u0027passes\u0027 to detect if \u0027pass\u0027 is the final pass.",
      "parentUuid": "ea4989aa_9662234e",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4b8d63eb_d4fb844c",
        "filename": "aom/aom_encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 163,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-07T16:58:13Z",
      "side": 1,
      "message": "Thanks Wan-Teh! Yeah I think it is possible not to break compatibility. The reason I did it this way is to make it logically more clear. Now AOM_RC_SECOND_PASS means we have more than 2 passes and we are at the second pass, and AOM_RC_LAST_PASS means we are at the last pass, whether it is the second or third. \n\nFor three-pass encoding, the second pass also performs a full encoding, so I used \u003e\u003d AOM_RC_SECOND_PASS to identify passes that use the first-pass stats and generates a bitstream. I think it is possible to add AOM_RC_SECOND_PASS to the end of this enum, but that would not be ideal in my opinion.\n\nLike you said, the (possibly better) alternative would be to add a \u0027passes\u0027 field, although that way we are also breaking compatibility?",
      "parentUuid": "46454ee4_8ef3492c",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b5537c2_40b8eae6",
        "filename": "aom/aom_encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 163,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-08T23:37:07Z",
      "side": 1,
      "message": "As we have discussed, changed the enum in a way that we do not change the value of AOM_RC_LAST_PASS, and the original behavior is unaltered when g_passes is not set.",
      "parentUuid": "4b8d63eb_d4fb844c",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fc3cb998_a578f199",
        "filename": "aom/aom_encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 163,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-09T23:01:21Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "1b5537c2_40b8eae6",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6d3c3fb_9f7938e3",
        "filename": "apps/aomenc.c",
        "patchSetId": 1
      },
      "lineNbr": 1412,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-04T22:50:20Z",
      "side": 1,
      "message": "It seems that we should add a \u0027default\u0027 case that calls the fatal() function.",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "059152ac_46ea7643",
        "filename": "apps/aomenc.c",
        "patchSetId": 1
      },
      "lineNbr": 1412,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-07T16:58:13Z",
      "side": 1,
      "message": "Will do in the new patch.",
      "parentUuid": "b6d3c3fb_9f7938e3",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "92a4ac07_8466b8cc",
        "filename": "apps/aomenc.c",
        "patchSetId": 1
      },
      "lineNbr": 1412,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-08T23:37:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "059152ac_46ea7643",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fc0c338_afbe5c2a",
        "filename": "av1/encoder/encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 954,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-04T22:50:20Z",
      "side": 1,
      "message": "Should we update this block comment?",
      "range": {
        "startLine": 952,
        "startChar": 0,
        "endLine": 954,
        "endChar": 33
      },
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2a89f42_90c7d33f",
        "filename": "av1/encoder/encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 954,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-07T16:58:13Z",
      "side": 1,
      "message": "Will update it in the new patch",
      "parentUuid": "0fc0c338_afbe5c2a",
      "range": {
        "startLine": 952,
        "startChar": 0,
        "endLine": 954,
        "endChar": 33
      },
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "753ecea8_67f54e15",
        "filename": "av1/encoder/encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 954,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-08T23:37:07Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c2a89f42_90c7d33f",
      "range": {
        "startLine": 952,
        "startChar": 0,
        "endLine": 954,
        "endChar": 33
      },
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e816560_90560205",
        "filename": "av1/encoder/encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 3342,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-04T22:50:20Z",
      "side": 1,
      "message": "It seems that cpi-\u003eoxcf.pass \u003d\u003d 2 could be changed to\n\n    cpi-\u003eoxcf.pass \u003d\u003d AOM_RC_LAST_PASS\n\nor\n\n    cpi-\u003eoxcf.pass \u003d\u003d AOM_RC_SECOND_PASS\n    \nor\n\n    cpi-\u003eoxcf.pass \u003e\u003d AOM_RC_SECOND_PASS\n    \n\nCould you explain why the last one is used?",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "818c7b0f_e911f8a4",
        "filename": "av1/encoder/encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 3342,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-07T16:58:13Z",
      "side": 1,
      "message": "Please see reply to the first question.",
      "parentUuid": "6e816560_90560205",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b712fd23_a1ac3762",
        "filename": "av1/encoder/encoder.h",
        "patchSetId": 1
      },
      "lineNbr": 3342,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-08T23:37:07Z",
      "side": 1,
      "message": "These two now have the same enum value, so I guess this does not matter that much in the new patch.",
      "parentUuid": "818c7b0f_e911f8a4",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d129063_1868a14c",
        "filename": "av1/encoder/ethread.c",
        "patchSetId": 1
      },
      "lineNbr": 2252,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-06-04T22:50:20Z",
      "side": 1,
      "message": "It seems that cpi-\u003eoxcf.pass !\u003d 2 could be changed to\n\n    cpi-\u003eoxcf.pass \u003c AOM_RC_LAST_PASS\nor\n\n    cpi-\u003eoxcf.pass \u003c AOM_RC_SECOND_PASS\n    \nCould you explain why the second one is used?",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f771adf_6a1753c2",
        "filename": "av1/encoder/ethread.c",
        "patchSetId": 1
      },
      "lineNbr": 2252,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-07T16:58:13Z",
      "side": 1,
      "message": "Also see the first question.",
      "parentUuid": "4d129063_1868a14c",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a8283dd5_92fa4686",
        "filename": "av1/encoder/ethread.c",
        "patchSetId": 1
      },
      "lineNbr": 2252,
      "author": {
        "id": 7525
      },
      "writtenOn": "2021-06-08T23:37:07Z",
      "side": 1,
      "message": "These two now have the same enum value, so I guess this does not matter that much in the new patch.",
      "parentUuid": "1f771adf_6a1753c2",
      "revId": "8808dee5417fec17e53f216c3a35f3b5b76e098f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}