{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8d991654_f3998ab8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-01-18T17:54:03Z",
      "side": 1,
      "message": "Jonathan, thank you very much for the fix.\n\nSetting Code-Review+1 only because I\u0027d like James to review this.\n\nI verified this CL fixes the ASan error. But I have two questions.",
      "revId": "55e903dc5a526e6dd6a177783f3327795d8d8b0e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "873fc78f_d530c3be",
        "filename": "av1/common/arm/jnt_convolve_neon.c",
        "patchSetId": 2
      },
      "lineNbr": 384,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-01-18T17:54:03Z",
      "side": 1,
      "message": "Jonathan, James: `dist_wtd_convolve_2d_horiz_neon()` reads four rows at a time from the `src` buffer. This seems to imply `im_h` should be a multiple of 4. But the caller passes `im_h` that is one less than a multiple of 4. See line 1166:\n\n```\n  const int im_h \u003d h + filter_params_y-\u003etaps - 1;\n```\n\nShould we fix this?",
      "revId": "55e903dc5a526e6dd6a177783f3327795d8d8b0e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b9419573_55e21f8e",
        "filename": "av1/common/arm/jnt_convolve_neon.c",
        "patchSetId": 2
      },
      "lineNbr": 384,
      "author": {
        "id": 31042
      },
      "writtenOn": "2023-01-18T18:28:42Z",
      "side": 1,
      "message": "im_h is always the block height + vertical filter size -1 so that we have enough rows to compute the vertical convolution. I don\u0027t think this needs to be a multiple of 4 since the output (and I think input) buffers are padded appropriately (8 extra rows for the intermediate buffer.)\n\nPlease correct me, James, if I\u0027ve got that wrong.",
      "parentUuid": "873fc78f_d530c3be",
      "revId": "55e903dc5a526e6dd6a177783f3327795d8d8b0e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81dda4fd_d1bf2662",
        "filename": "av1/common/arm/jnt_convolve_neon.c",
        "patchSetId": 2
      },
      "lineNbr": 1188,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-01-18T17:54:03Z",
      "side": 1,
      "message": "Our NEON/AV1Convolve2DCompoundTest.* tests do not seem to check for expected results. If I change the first argument to say `im_block` or `im_block + 2 * im_stride` or the second argument to `im_stride / 2`, the NEON/AV1Convolve2DCompoundTest.* tests still pass.",
      "revId": "55e903dc5a526e6dd6a177783f3327795d8d8b0e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5c3cae2a_1ac5a892",
        "filename": "av1/common/arm/jnt_convolve_neon.c",
        "patchSetId": 2
      },
      "lineNbr": 1188,
      "author": {
        "id": 31042
      },
      "writtenOn": "2023-01-18T18:28:42Z",
      "side": 1,
      "message": "Yes, the test doesn\u0027t do the right thing - it should be using \u0027av1_dist_wtd_convolve_2d_c\u0027 here[1]. At the moment it just tests the output of the SIMD accelerated version against itself. I think it\u0027s the same for one of the other x or y convolutions. I guess we should change these - confirm if you\u0027d like me to do it (I\u0027m happy to.)\n\n[1] https://source.chromium.org/chromium/chromium/src/+/main:third_party/libaom/source/libaom/test/av1_convolve_test.cc;l\u003d1695",
      "parentUuid": "81dda4fd_d1bf2662",
      "revId": "55e903dc5a526e6dd6a177783f3327795d8d8b0e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}