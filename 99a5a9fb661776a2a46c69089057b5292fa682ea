{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "daf4ff93_04ac5a1f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 25857
      },
      "writtenOn": "2021-03-15T14:39:53Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThe function \u0027av1_tpl_stats_init_txfm_stats()\u0027 was called for MAX_LAG_BUFFERS(35) number of frames in the function \u0027av1_init_tpl_stats()\u0027. However, the transform stats needs to be initialized for MAX_LENGTH_TPL_FRAME_STATS(79) frames as \u0027tpl_data-\u003eframe_idx\u0027 takes values beyond MAX_LAG_BUFFERS. We have corrected the same in this patch.\n\nAlso, we have initialized \u0027tpl_frame-\u003eabs_coeff_sum[]\u0027 to zero in the function av1_tpl_stats_init_txfm_stats(). With \u0027tpl_frame-\u003etxfm_block_count\u0027 being initialized to zero,  \u0027tpl_frame-\u003eabs_coeff_sum[]\u0027 should also be initialized to zero for correct calculation of \u0027tpl_frame-\u003eabs_coeff_mean[i]\u0027, as per our understanding.\n\nThis patch addresses the above issues and facilitates the re-enabling of tpl multi-threading for speed 0,1. The patch is bit-exact with parent version as the transform stats collected are not used in the encoder. \n\nPlease review the patch.\n\nThanks",
      "revId": "99a5a9fb661776a2a46c69089057b5292fa682ea",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "36f4cd27_777d0483",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-03-15T18:34:23Z",
      "side": 1,
      "message": "Thanks for the fix!",
      "parentUuid": "daf4ff93_04ac5a1f",
      "revId": "99a5a9fb661776a2a46c69089057b5292fa682ea",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}