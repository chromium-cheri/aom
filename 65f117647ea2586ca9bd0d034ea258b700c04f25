{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ce264fd6_84bc3471",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-03-01T14:27:31Z",
      "side": 1,
      "message": "Hi Wan-Teh,\n\nAs per the analysis, we observed that the chroma intra mode winner is either of the following ~88% of times. \n1. UV_DC_PRED,\n2. UV_SMOOTH_PRED \n3. UV_CFL_PRED\n4. the mode that corresponds to luma intra mode winner.\n\nThe possibility of remaining chroma intra modes winning seemed to be less. Hence we implemented a logic to prune chroma intra modes based on above observations.\n\nWe validated the current patch for all-intra video and still-image encode. Specifically, we configured libaom in ALLINTRA mode (in libavif) for AVIF encode. \nThe optimization is not currently enabled for speed presets \u003e\u003d 4 as the results for lower presets are not with in the expected speed-quality trade-off.\n\nFollowing are encode time reduction results when AVIF encode was tested for a typical image dataset. Bit match is verified for presets \u003c\u003d 3.\n                Instruction Count  BD-Rate Loss(%)       \n      cpu-used    Reduction(%)     psnr     ssim    \n         4          4.990          0.1203   0.1523  \n         5          4.375          0.1290   0.1210  \n         6          7.150          0.1148   0.1627  \n\nWe have also done timer based tests for speed 6 and observed that the encode time reduction was 7.94%.\n\nFollowing are encode time reduction results when tested libaom with all intra frame encoding for a borg setup. Bit match is verified for presets \u003c\u003d 3.\n               Instruction Count       BD-Rate Loss(%)       \n     cpu-used    Reduction(%)     avg.psnr  ovr.psnr   ssim    \n        4          6.079          0.2304    0.2307    0.2805  \n        5          5.447          0.2281    0.2260    0.2768  \n        6          9.170          0.2415    0.2414    0.3072\n\nFor libaom AV1 video encode, bit match is verified (w.r.t parent commit) for encoding modes \u0027GOOD\u0027 and \u0027RT\u0027 for few videos with different video encoding configurations.\n\nPlease review the patch.\n\nThanks,\nVenkata.",
      "revId": "65f117647ea2586ca9bd0d034ea258b700c04f25",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "51e7a2b9_c3ee9c5c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:04:33Z",
      "side": 1,
      "message": "Jingning: PTAL. Thanks!",
      "revId": "65f117647ea2586ca9bd0d034ea258b700c04f25",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c4a111a_bec99b8f",
        "filename": "av1/encoder/intra_mode_search.c",
        "patchSetId": 6
      },
      "lineNbr": 496,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:04:33Z",
      "side": 1,
      "message": "IMPORTANT: The av1_derived_chroma_intra_mode_used_flag array has 13 (\u003d INTRA_MODES) elements. Is mbmi-\u003emode always \u003c 13 here?",
      "range": {
        "startLine": 496,
        "startChar": 50,
        "endLine": 496,
        "endChar": 60
      },
      "revId": "65f117647ea2586ca9bd0d034ea258b700c04f25",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2367eaf4_383ae164",
        "filename": "av1/encoder/intra_mode_search_utils.h",
        "patchSetId": 6
      },
      "lineNbr": 101,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:04:33Z",
      "side": 1,
      "message": "Nit: In \"The table av1_derived_chroma_intra_mode_used_flag table\", delete either the first or the second \"table\".",
      "range": {
        "startLine": 100,
        "startChar": 62,
        "endLine": 101,
        "endChar": 48
      },
      "revId": "65f117647ea2586ca9bd0d034ea258b700c04f25",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99eac796_2a7f44b1",
        "filename": "av1/encoder/intra_mode_search_utils.h",
        "patchSetId": 6
      },
      "lineNbr": 123,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:04:33Z",
      "side": 1,
      "message": "Since this table is only used in av1/encoder/intra_mode_search.c, I would move this table to that file.",
      "revId": "65f117647ea2586ca9bd0d034ea258b700c04f25",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}