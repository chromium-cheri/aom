{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4e67e7bd_e3b8ce91",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 2
      },
      "lineNbr": 6379,
      "author": {
        "id": 9545
      },
      "writtenOn": "2020-12-17T23:14:46Z",
      "side": 1,
      "message": "Bohan: Could you see if it is safe to merge just this change from your commit 1629a4b33cab5987af0194de7f964e6f709f4a1b to the applejack branch (used for libaom 2.0.x releases)?\n\nThe applejack branch was created off the master branch on Apr. 15, 2020. So it is eight months old.\n\nI explained why I need to merge this change to the applejack branch in the commit message. Thank you for your help!",
      "revId": "2d10b0520e28988444e5f9874f6e89cac5cecf5d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dbbbc800_c3f820ec",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 2
      },
      "lineNbr": 6379,
      "author": {
        "id": 7525
      },
      "writtenOn": "2020-12-18T03:32:38Z",
      "side": 1,
      "message": "I honestly do not remember why this line was added in the CL, and I do not understand why this line would be required from the CL you want to merge. But I think this should be safe without the other changes.",
      "parentUuid": "4e67e7bd_e3b8ce91",
      "revId": "2d10b0520e28988444e5f9874f6e89cac5cecf5d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "68e3922b_ad370c5c",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 2
      },
      "lineNbr": 6379,
      "author": {
        "id": 9545
      },
      "writtenOn": "2020-12-23T23:54:09Z",
      "side": 1,
      "message": "Bohan: Sorry I forgot to reply. I explained this in https://bugs.chromium.org/p/aomedia/issues/detail?id\u003d2872#c4.\n\nOne side effect of this av1_setup_frame_size(cpi) call is that it allocates the frame buffer cm-\u003ecur_frame-\u003ebuf.\n\nThe CL I want to merge requires another commit:\n  Disable TPL when lag in frames is 1\n  https://aomedia-review.googlesource.com/c/aom/+/114382\n\nIf we disable TPL when lag in frames is 1, then some tests crash because cm-\u003ecur_frame-\u003ebuf is not allocated and therefore contains null pointers. I did not get to the bottom of this, but I suspect the reason is that one side effect of TPL is to allocate cm-\u003ecur_frame-\u003ebuf. So, one way to make up for that is to add this av1_setup_frame_size(cpi) call.\n\nI believe the \"Disable TPL when lag in frames is 1\" commit implicitly depends on this av1_setup_frame_size(cpi) call, because those tests crash if I manually remove this av1_setup_frame_size(cpi) call.",
      "parentUuid": "dbbbc800_c3f820ec",
      "revId": "2d10b0520e28988444e5f9874f6e89cac5cecf5d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0601104b_0eef0f37",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 2
      },
      "lineNbr": 6379,
      "author": {
        "id": 7525
      },
      "writtenOn": "2020-12-24T07:11:28Z",
      "side": 1,
      "message": "I see, this makes sense. I can also confirm this now because your explanation reminded me of the reason of why it was in that CL, too. It was the same reason, since I was refactoring this part and re-arranging the functions, and without this line sometimes when TPL is skipped that pointer would be NULL. \n\nThanks for your detailed explanation!",
      "parentUuid": "68e3922b_ad370c5c",
      "revId": "2d10b0520e28988444e5f9874f6e89cac5cecf5d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ace46877_3a75c88b",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 2
      },
      "lineNbr": 6379,
      "author": {
        "id": 9545
      },
      "writtenOn": "2020-12-24T16:41:48Z",
      "side": 1,
      "message": "Thanks a lot for the confirmation!",
      "parentUuid": "0601104b_0eef0f37",
      "revId": "2d10b0520e28988444e5f9874f6e89cac5cecf5d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}