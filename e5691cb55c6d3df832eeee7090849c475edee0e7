{
  "comments": [
    {
      "key": {
        "uuid": "6b2f6f71_87a32655",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 1
      },
      "lineNbr": 1771,
      "author": {
        "id": 5075
      },
      "writtenOn": "2016-11-12T00:46:54Z",
      "side": 1,
      "message": "choose_tx_size_fix_type() does not do any encoding that is not immediately followed by a call to od_encode_rollback(), does it? I am not sure we need this buffer in this function at all anymore.\n\nWhat we could do, is do the od_encode_checkpoint() call in this function, and then pass the od_rollback_buffer to choose_tx_size_fix_type(), so that it does not have to repeatedly checkpoint the same state, but that requires changing the function prototype depending on CONFIG_PVQ, which is a bit ugly (but should be faster).",
      "revId": "e5691cb55c6d3df832eeee7090849c475edee0e7",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b2f6f71_c7ad1e3f",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 1
      },
      "lineNbr": 1771,
      "author": {
        "id": 5035
      },
      "writtenOn": "2016-11-12T01:18:33Z",
      "side": 1,
      "message": "I did not get your comment here but it made me that we can don\u0027t need rollback here, because pvq\u0027s state is rewinded back to the pre call state when it has returned from\nchoose_tx_size_fix_type().\n\nRegarding passing checkpoint-ed buf, yes it needs adding new argument to choose_tx_size_fix_type function based on CONFIG_PVQ\u0027s value. But \nchoose_tx_size_fix_type() is called only for choose_tx_size_type_from_rd(), so we can try modify then save time. I believe you will do that !? :)",
      "parentUuid": "6b2f6f71_87a32655",
      "revId": "e5691cb55c6d3df832eeee7090849c475edee0e7",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}