{
  "comments": [
    {
      "key": {
        "uuid": "41cb32dc_4677e64a",
        "filename": "av1/common/av1_inv_txfm2d.c",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 8487
      },
      "writtenOn": "2018-05-16T01:34:29Z",
      "side": 1,
      "message": "I don\u0027t think this range check is necessary from a normative point of view. Also shouldn\u0027t this be bd+2 instead of bd+3?\nIf we keep this check we may mention in a comment that the bound can be derived from the output check for bd+1.",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 47,
        "endChar": 0
      },
      "revId": "765902c9f4b5833b43f35328da423cfff84320e3",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fee475af_90282cdd",
        "filename": "av1/common/av1_inv_txfm2d.c",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 5250
      },
      "writtenOn": "2018-05-17T01:54:09Z",
      "side": 1,
      "message": "This implementation is an approximation of Hadamard transform.\nThe following step in fwht will introduce 1/2 offset when (a1 - d1) is odd.\ne1 \u003d (a1 - d1) \u003e\u003e 1;\nThe 1/2 offset might introduce an extra bit to the output of fwht.",
      "parentUuid": "41cb32dc_4677e64a",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 47,
        "endChar": 0
      },
      "revId": "765902c9f4b5833b43f35328da423cfff84320e3",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6cfdff34_1acbc31f",
        "filename": "av1/common/av1_inv_txfm2d.c",
        "patchSetId": 2
      },
      "lineNbr": 47,
      "author": {
        "id": 8487
      },
      "writtenOn": "2018-05-17T03:14:52Z",
      "side": 1,
      "message": "Agreed that we are approximating a Hadamard transform here.\nAs far as I can tell the forward transform is\n    a1 +\u003d b1;\n    d1 \u003d d1 - c1;\n    e1 \u003d (a1 - d1) \u003e\u003e 1;\n    b1 \u003d e1 - b1;\n    c1 \u003d e1 - c1;\n    a1 -\u003d c1;\n    d1 +\u003d b1;\nIf inputs a1, b1, c1, d1 take any value between -255 and 255, the outputs should be between -510 and 510. As far as I can tell one bit of dynamic range is added per 1D transform. I don\u0027t see the 1/2 offset having an effect on the range.\nIn the inverse transform the range should be bd+5 at the input of the row inverse transform, bd+3 after \u003e\u003eUNIT_QUANT_SHIFT, bd+2 at the output of the row inverse transform and at the input of the column inverse transform, and bd+1 at the output of the column inverse transform",
      "parentUuid": "fee475af_90282cdd",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 47,
        "endChar": 0
      },
      "revId": "765902c9f4b5833b43f35328da423cfff84320e3",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    }
  ]
}