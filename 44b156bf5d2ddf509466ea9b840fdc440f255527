{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4b862508_2c2edd71",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 15031
      },
      "writtenOn": "2021-12-10T18:59:18Z",
      "side": 1,
      "message": "Hi Yunqing,\nThis patch adds support for computation of stats (used in estimating wiener filter coefficients) on down sampled restoration unit. This change is aimed at speed-up and is enabled through a sf. We have modified the C , AVX2 and SSE implementations accordingly. The refinement of filter coefficients in finer_tile_search_wiener() still happens on the restoration unit at full resolution.\n\nPlease find the results for speed 3 and speed 4 below ( Loop restoration is currently disabled for speed 5 and above) :\n                Instruction Count      BD-Rate Loss(%)\ncpu  Resolution   Reduction(%)     avg.psnr   ovr.psnr    ssim   \n 3    LOWRES2      1.869          0.0174     0.0163      0.0610    \n 3    MIDRES2      2.270          0.0498     0.0565      0.0594    \n 3    HDRES2       2.220          0.0829     0.1000      0.0623    \n 3    Average      2.120          0.0500     0.0576      0.0609    \n\n 4    LOWRES2      1.953          0.0061    -0.0001     -0.0172\n 4    MIDRES2      2.461          0.0363    -0.0027      0.0425\n 4    HDRES2       2.494          0.0505     0.0437     -0.0188\n 4    Average      2.303          0.0310     0.0136      0.0021\n\nDue to known issues in C vs SIMD match (in issue 2932), we tried getting quality impact of CL with in C function (wrt parent version) :\n                        BD-Rate Loss(%)\ncpu Resolution    avg.psnr ovr.psnr  ssim  \n 3   LOWRES2      0.0233    0.0227   0.0467 \n 3   MIDRES2      0.0496    0.0582   0.0712 \n 3   HDRES2       0.0906    0.1084   -0.0100 \n 3   Average      0.0545    0.0631   0.0360\n\nIn the commit message : \n[-] sign indicates encode time increase\n[+] sign indicates encode time reduction \n\nThe instruction count reduction specified has been measured using command: \n$ perf stat -e instructions:u ./aomenc â€¦ \n\nPlease note that HDRES2  is slightly out of trade off in speed 3. Also, the clip soccer_4cif_30fps has the worst quality drop of 1.8% in speed 4. We found that, this is due to the change in the GOP length decision method based on TPL stats.\n\nWe have verified that the patch is bit exact for other speed levels. \nPlease review the patch.\nThanks,\nAkshata",
      "revId": "44b156bf5d2ddf509466ea9b840fdc440f255527",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}