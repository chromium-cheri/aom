{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "662fa05d_7d10c278",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 9611
      },
      "writtenOn": "2022-10-26T17:33:58Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis CL adds the AVX2 variant for av1_lowbd_fwd_txfm2d_8x8() function. The core algorithm of 1-D transform is kept in SSE2 itself, as adding AVX2 for transform does not benefit much (due to width size 8). AVX2 is applied mainly for the transpose and store which happens after the row_txfm() and a few condition checks related to shift bit are avoided by adding appropriate asserts.\n\nAt module level, AVX2 improves the scaling gains (i.e., ~11x w.r.t. C) by 25% w.r.t. existing SSE2.\n\nPlease check the borg results for real-time encoding mode below.\n```\n                Instruction Count    \ncpu Resolution    Reduction(%)\n 7   rtc_1080p      0.357\n 7         rtc      0.511\n 7    rtc_derf      0.390\n 7  rtc_screen      0.250\n 8   rtc_1080p      0.343\n 8         rtc      0.431\n 8    rtc_derf      0.365\n 8  rtc_screen      0.228\n 9   rtc_1080p      0.386\n 9         rtc      0.504\n 9    rtc_derf      0.495\n 9  rtc_screen      0.358\n10   rtc_1080p      0.396\n10         rtc      0.561\n10    rtc_derf      0.520\n10  rtc_screen      0.325\n```\n\nPlease check the borg results for good encoding mode below.\n```\n               Instruction Count\ncpu    Testset    Reduction(%)\n 5     LOWRES2      0.309\n 5     MIDRES2      0.177\n 5      HDRES2      0.112\n 6     LOWRES2      0.261\n 6     MIDRES2      0.160\n 6      HDRES2      0.111\n```\nThe instruction count reduction specified has been measured using command:\n$ perf stat -e instructions:u ./aomenc â€¦\n\nPlease review the CL.\n\nThanks \u0026 Regards,\nVenkata.",
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "58ebd308_2b072115",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-10-26T20:27:19Z",
      "side": 1,
      "message": "Nice optimization.",
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85556bcd_411eda47",
        "filename": "av1/encoder/x86/av1_fwd_txfm_sse2.h",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-10-26T20:27:19Z",
      "side": 1,
      "message": "should these all be const?",
      "range": {
        "startLine": 79,
        "startChar": 2,
        "endLine": 87,
        "endChar": 64
      },
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ba6a138b_b5bdf49e",
        "filename": "av1/encoder/x86/av1_fwd_txfm_sse2.h",
        "patchSetId": 2
      },
      "lineNbr": 87,
      "author": {
        "id": 9611
      },
      "writtenOn": "2022-10-28T18:55:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "85556bcd_411eda47",
      "range": {
        "startLine": 79,
        "startChar": 2,
        "endLine": 87,
        "endChar": 64
      },
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a08fc527_e665af52",
        "filename": "av1/encoder/x86/av1_fwd_txfm_sse2.h",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-10-26T20:27:19Z",
      "side": 1,
      "message": "Can x4 be removed and output is used directly to avoid this copying?\nRealized these are old code. Is it possible that you can take a look? Thanks.",
      "range": {
        "startLine": 129,
        "startChar": 2,
        "endLine": 129,
        "endChar": 8
      },
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea10804a_395d005a",
        "filename": "av1/encoder/x86/av1_fwd_txfm_sse2.h",
        "patchSetId": 2
      },
      "lineNbr": 129,
      "author": {
        "id": 9611
      },
      "writtenOn": "2022-10-28T18:55:49Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nAs per suggestion, avoided the copy which happens during the final output store and submitted a patch for review.\n\nThanks \u0026 Regards,\nVenkata.",
      "parentUuid": "a08fc527_e665af52",
      "range": {
        "startLine": 129,
        "startChar": 2,
        "endLine": 129,
        "endChar": 8
      },
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "84e5bd6d_35ce0cb8",
        "filename": "av1/encoder/x86/av1_fwd_txfm_sse2.h",
        "patchSetId": 2
      },
      "lineNbr": 157,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-10-26T20:27:19Z",
      "side": 1,
      "message": "const?",
      "range": {
        "startLine": 145,
        "startChar": 2,
        "endLine": 157,
        "endChar": 39
      },
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "781e525d_7f6ee4c6",
        "filename": "av1/encoder/x86/av1_fwd_txfm_sse2.h",
        "patchSetId": 2
      },
      "lineNbr": 157,
      "author": {
        "id": 9611
      },
      "writtenOn": "2022-10-28T18:55:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "84e5bd6d_35ce0cb8",
      "range": {
        "startLine": 145,
        "startChar": 2,
        "endLine": 157,
        "endChar": 39
      },
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "debecce9_07164a76",
        "filename": "av1/encoder/x86/av1_fwd_txfm_sse2.h",
        "patchSetId": 2
      },
      "lineNbr": 218,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-10-26T20:27:19Z",
      "side": 1,
      "message": "same here",
      "range": {
        "startLine": 218,
        "startChar": 2,
        "endLine": 218,
        "endChar": 8
      },
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "146c3443_f85a82c4",
        "filename": "av1/encoder/x86/av1_fwd_txfm_sse2.h",
        "patchSetId": 2
      },
      "lineNbr": 218,
      "author": {
        "id": 9611
      },
      "writtenOn": "2022-10-28T18:55:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "debecce9_07164a76",
      "range": {
        "startLine": 218,
        "startChar": 2,
        "endLine": 218,
        "endChar": 8
      },
      "revId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1 AND -label:Code-Review\u003dMIN"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1 AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1","label:Code-Review=MIN"]}
      },
      "patchSetCommitId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforcement-satisfied_gerrit"]}
      },
      "patchSetCommitId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {
        "value": true
      }
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI or human verified the change"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "608b4b32366216245f47f27ba3f12cd34f2eebf6",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}