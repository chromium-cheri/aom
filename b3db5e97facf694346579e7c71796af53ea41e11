{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "cda7fda0_33cc986a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:31:19Z",
      "side": 1,
      "message": "Please also add\nBUG\u003daomedia:2959\n\nbecause the addition of kAllIntra to Testmode enum is related to aomedia:2959.",
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "76d78f3f_025f6132",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 15,
      "author": {
        "id": 22433
      },
      "writtenOn": "2021-03-02T09:08:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cda7fda0_33cc986a",
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ca47fb3e_38f4cc26",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 22433
      },
      "writtenOn": "2021-03-01T11:53:19Z",
      "side": 1,
      "message": "\nHi Wan-Teh,\n\nIn this patch, we have added a unit test AV1LosslessFrameSizeTests.LosslessEncode to validate the allocated size of bit stream buffer by feeding pseudo random input to the encoder in ALLINTRA lossless mode. \n\nWe modified the data_sz calculation (locally) as below, to check the behavior of this unit test.\n\n    int multiplicative_factor \u003d 8;\n    size_t data_sz \u003d ALIGN_POWER_OF_TWO(ctx-\u003ecfg.g_w, 5) *\n                     ALIGN_POWER_OF_TWO(ctx-\u003ecfg.g_h, 5) * get_image_bps(img) / 8;\n    data_sz \u003d data_sz * multiplicative_factor;\n\nThe following are the observations when tested the unit test for different values of \u0027multiplicative_factor\u0027.\n     multiplicative_factor     status of unit test\n             8                   pass\n             2                   pass\n             1\t                 failed (ERROR: Segmentation fault)\n\nAs expected, we observed a segmentation fault when ctx-\u003ecx_data is small (i.e., when data_sz is equal to one uncompressed frame size).\nThe same behavior is seen when we validated the unit test with the following patch (i.e., with \u0027guard page at the end\u0027)\nhttps://aomedia-review.googlesource.com/c/aom/+/131321\n\nWe also verified address sanitizer for this unit test and the following are the observations.\n     multiplicative_factor     status of unit test\n             8                   pass\n             2                   pass\n             1\t                 failed (ERROR: heap-buffer-overflow)\n\nWhen we tested using address sanitizer with \u0027guard page at the end\u0027, the following error is seen for multiplicative_factor equal to 1 and no issues were seen for multiplicative_factor 8 and 4.\n          AddressSanitizer:DEADLYSIGNAL  --  ERROR: SEGV on unknown address\n\nPlease review the patch\n\nThanks \u0026 Regards, \nAniket.\n",
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b3cf82d_9350d712",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:31:19Z",
      "side": 1,
      "message": "Hi Aniket,\n\nThanks a lot for the new test! I suggest a few small changes.",
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9501788_140f3492",
        "filename": "test/frame_size_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:31:19Z",
      "side": 1,
      "message": "Nit/optional: Could you delete this line? The ONE_BY_ONE_VIDEO_NAME macro is never defined.\n\nWe could also delete this line in a separate CL.",
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a028b24_d0664279",
        "filename": "test/frame_size_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 75,
      "author": {
        "id": 22433
      },
      "writtenOn": "2021-03-02T09:08:26Z",
      "side": 1,
      "message": "We have removed the macro ONE_BY_ONE_VIDEO_NAME as it is never defined.",
      "parentUuid": "a9501788_140f3492",
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1a1c311c_634f95d2",
        "filename": "test/frame_size_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:31:19Z",
      "side": 1,
      "message": "Nit: Shorten these to \"width\" and \"height\"?",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 79,
        "endChar": 28
      },
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d8d57279_ce231486",
        "filename": "test/frame_size_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 79,
      "author": {
        "id": 22433
      },
      "writtenOn": "2021-03-02T09:08:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1a1c311c_634f95d2",
      "range": {
        "startLine": 78,
        "startChar": 0,
        "endLine": 79,
        "endChar": 28
      },
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "31b29fc9_d7b605c1",
        "filename": "test/frame_size_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 111,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-02T02:31:19Z",
      "side": 1,
      "message": "Nit: This could also be declared as \u0027const\u0027 because we never modify it after initialization.",
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c96d0e5a_5b4ea9aa",
        "filename": "test/frame_size_tests.cc",
        "patchSetId": 1
      },
      "lineNbr": 111,
      "author": {
        "id": 22433
      },
      "writtenOn": "2021-03-02T09:08:26Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "31b29fc9_d7b605c1",
      "revId": "b3db5e97facf694346579e7c71796af53ea41e11",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}