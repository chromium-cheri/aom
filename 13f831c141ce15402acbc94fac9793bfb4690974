{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b6b29b1c_68200ce4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 31012
      },
      "writtenOn": "2022-11-08T14:32:13Z",
      "side": 1,
      "message": "Hi Yunqing,\nThis patch improves the AVX2 optimization of av1_block_error_lp_avx2() with the following changes.\nPerforming block error computation for two rows at a time\nLoop unrolling for most occurring block size\nPlease check the details of the changes.\nThis function computes block error for each row and stores the result in a temporary variable before accumulating to the final result (sse). Considering the maximum values possible for coeff, dqcoeff with appropriate change in precision, block error is modified to compute for two rows at a time.\nThe CL also unrolls the loop for block size above 32 which improves the performance of AVX2 optimization as it is a most occurring case.\n\nPlease check the encoder speed-up measured (for AVX2) using instruction count as below.\n```\n               Instruction Count    \ncpu Resolution    Reduction(%)\n 7   rtc_1080p      1.010\n 7         rtc      0.712\n 7    rtc_derf      0.557\n 7  rtc_screen      0.875\n\n 8   rtc_1080p      0.745\n 8         rtc      0.560\n 8    rtc_derf      0.426\n 8  rtc_screen      0.857\n\n 9   rtc_1080p      0.755\n 9         rtc      0.580\n 9    rtc_derf      0.414\n 9  rtc_screen      0.529\n\n10   rtc_1080p      0.739\n10         rtc      0.527\n10    rtc_derf      0.395\n10  rtc_screen      0.529\n```\nThe instruction count reduction specified has been measured using command:\n$ perf stat -e instructions:u ./aomenc â€¦\n\nPlease review the CL.\n\nThanks \u0026 Regards,\nDiksha",
      "revId": "13f831c141ce15402acbc94fac9793bfb4690974",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ac89e227_c8890b86",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-11-09T00:52:41Z",
      "side": 1,
      "message": "Nice to improve the implementation and get further speedup!",
      "parentUuid": "b6b29b1c_68200ce4",
      "revId": "13f831c141ce15402acbc94fac9793bfb4690974",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1 AND -label:Code-Review\u003dMIN"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1 AND -label:Code-Review=MIN"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1","label:Code-Review=MIN"]}
      },
      "patchSetCommitId": "13f831c141ce15402acbc94fac9793bfb4690974",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforcement-satisfied_gerrit"]}
      },
      "patchSetCommitId": "13f831c141ce15402acbc94fac9793bfb4690974",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {
        "value": true
      }
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI or human verified the change"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "13f831c141ce15402acbc94fac9793bfb4690974",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}