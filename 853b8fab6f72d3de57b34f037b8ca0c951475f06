{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a735fb75_01026e97",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-05-14T15:17:39Z",
      "side": 1,
      "message": "Please review",
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db1ffb3f_2a66d1e0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-05-15T19:44:17Z",
      "side": 1,
      "message": "I\u0027ll leave this to Jerome since he owns this lib.",
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0e6c49db_e2f29028",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-05-16T05:28:04Z",
      "side": 1,
      "message": "Thank you for your support.",
      "parentUuid": "db1ffb3f_2a66d1e0",
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04d20d47_24af7687",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-05-16T17:11:51Z",
      "side": 1,
      "message": "It would be good if a test was added for this interface in test/ratectrl_rtc_test.cc.",
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ca80a2a_517d72a8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-05-17T05:19:38Z",
      "side": 1,
      "message": "Could you please confirm whether the test case should also include the usage of dlopen(),dlsym(). In that case for dlopen() to function, may need the lib of aom_av1_rc.so.",
      "parentUuid": "04d20d47_24af7687",
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1eb5bd3c_42694938",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-05-17T16:56:47Z",
      "side": 1,
      "message": "\u003e Could you please confirm whether the test case should also include the usage of dlopen(),dlsym(). In that case for dlopen() to function, may need the lib of aom_av1_rc.so.\n\nThat shouldn\u0027t be necessary. The test will link to library and provide a test of resolving the symbols.",
      "parentUuid": "6ca80a2a_517d72a8",
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "59e70d25_7241646c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-05-20T04:27:39Z",
      "side": 1,
      "message": "Or just like this test is OK, \n\n  void TestPostEncodeUpdateRateControlAV1() {\n    void *controller \u003d aom::create_av1_ratecontrol_rtc(rc_cfg_);\n    ASSERT_NE(controller, nullptr);\n    int frame_consumed_bytes \u003d 380;\n    aom::post_encode_update_ratecontrol_av1(controller, \n                                      frame_consumed_bytes);\n    aom::destory_av1_ratecontrol_rtc(controller);\n  }\nTEST_F(RcInterfaceTest, PostEncodeUpdateRateControllerAV1Test) {\n  TestPostEncodeUpdateRateControlAV1();\n}\nHave completed the code for other interfaces. Let me know whether to\ngo ahead with this or use like below , which have used in the my client\ncode (where I use these API with dlopen())\nhandle \u003d dlopen(\"../libaom_av1_rc.so\", RTLD_LAZY);\n    if(!handle)\n    {\n      throw std::runtime_error(\"Cannot open the \n                                   library ibaom_av1_rc.so\");\n    }\nptrCreateAV1Controller \u003d (createAV1Controller_t) dlsym(handle, \n                                   \"create_av1_ratecontrol_rtc\");\n    if(!ptrCreateAV1Controller)\n    {\n      throw std::runtime_error(\"Cannot load symbol  \n                         \u0027create_av1_ratecontrol_rtc\u0027 from AOM LIB\");\n    }\n-thanks you.\n.---\nMeaning, dont use dlopen(), dlsym().",
      "parentUuid": "6ca80a2a_517d72a8",
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "13013268_3f77c034",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 8
      },
      "lineNbr": 0,
      "author": {
        "id": 5020
      },
      "writtenOn": "2024-05-20T17:14:57Z",
      "side": 1,
      "message": "\u003e Or just like this test is OK, \n\u003e \n\u003e   void TestPostEncodeUpdateRateControlAV1() {\n\u003e     void *controller \u003d aom::create_av1_ratecontrol_rtc(rc_cfg_);\n\u003e     ASSERT_NE(controller, nullptr);\n\u003e     int frame_consumed_bytes \u003d 380;\n\u003e     aom::post_encode_update_ratecontrol_av1(controller, \n\u003e                                       frame_consumed_bytes);\n\u003e     aom::destory_av1_ratecontrol_rtc(controller);\n\u003e   }\n\u003e TEST_F(RcInterfaceTest, PostEncodeUpdateRateControllerAV1Test) {\n\u003e   TestPostEncodeUpdateRateControlAV1();\n\u003e }\n\nIdeally the functions would not use the namespace and perform the same tests as the C++ interface.\n\n\u003e Have completed the code for other interfaces. Let me know whether to\n\u003e go ahead with this or use like below , which have used in the my client\n\u003e code (where I use these API with dlopen())\n\nIt\u0027s fine to test these in your application, they\u0027re not needed here.\n\n\u003e handle \u003d dlopen(\"../libaom_av1_rc.so\", RTLD_LAZY);\n\u003e     if(!handle)\n\u003e     {\n\u003e       throw std::runtime_error(\"Cannot open the \n\u003e                                    library ibaom_av1_rc.so\");\n\u003e     }\n\u003e ptrCreateAV1Controller \u003d (createAV1Controller_t) dlsym(handle, \n\u003e                                    \"create_av1_ratecontrol_rtc\");\n\u003e     if(!ptrCreateAV1Controller)\n\u003e     {\n\u003e       throw std::runtime_error(\"Cannot load symbol  \n\u003e                          \u0027create_av1_ratecontrol_rtc\u0027 from AOM LIB\");\n\u003e     }\n\u003e -thanks you.\n\u003e .---\n\u003e Meaning, dont use dlopen(), dlsym().",
      "parentUuid": "59e70d25_7241646c",
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "22ac345c_1ba2cacd",
        "filename": "av1/ratectrl_rtc.cc",
        "patchSetId": 8
      },
      "lineNbr": 406,
      "author": {
        "id": 5960
      },
      "writtenOn": "2024-05-16T14:44:56Z",
      "side": 1,
      "message": "this `return` is not needed?",
      "range": {
        "startLine": 406,
        "startChar": 2,
        "endLine": 406,
        "endChar": 8
      },
      "fixSuggestions": [
        {
          "fixId": "8dceced2_9d918185",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "av1/ratectrl_rtc.cc",
              "range": {
                "startLine": 406,
                "startChar": 0,
                "endLine": 407,
                "endChar": 0
              },
              "replacement": "  reinterpret_cast\u003cAV1RateControlRTC *\u003e(controller)\n"
            }
          ]
        }
      ],
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4cf52bd6_9f73eba4",
        "filename": "av1/ratectrl_rtc.cc",
        "patchSetId": 8
      },
      "lineNbr": 406,
      "author": {
        "id": 33496
      },
      "writtenOn": "2024-05-17T05:18:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "22ac345c_1ba2cacd",
      "range": {
        "startLine": 406,
        "startChar": 2,
        "endLine": 406,
        "endChar": 8
      },
      "revId": "853b8fab6f72d3de57b34f037b8ca0c951475f06",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}