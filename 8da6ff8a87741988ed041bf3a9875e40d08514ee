{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4bbcd3b3_2ea299fa",
        "filename": "av1/encoder/gop_structure.c",
        "patchSetId": 2
      },
      "lineNbr": 816,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-02-25T00:15:04Z",
      "side": 1,
      "message": "Jingning: When I debugged this bug, I noticed that the struct members of `gf_group` are not documented. Could you add some comments to the `gf_group` struct, especially for the `layer_depth` and `max_layer_depth` members?\n\nFrom the members\u0027 names, I would guess `max_layer_depth` is the maximum of all the `layer_depth[i]` array elements, and expect that they satisfy the property `layer_depth[i] \u003c\u003d max_layer_depth`. But the code here shows that\u0027s not the case. So the comments will be very helpful. Thanks.",
      "revId": "8da6ff8a87741988ed041bf3a9875e40d08514ee",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b63593ac_f63220f3",
        "filename": "av1/encoder/gop_structure.c",
        "patchSetId": 2
      },
      "lineNbr": 816,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-02-25T01:43:44Z",
      "side": 1,
      "message": "James: To fix the crash, we just need to clamp to `MAX_ARF_LAYERS + 1` because `allocate_gf_group_bits()` will subtract one from `gf_group-\u003emax_layer_depth`:\n\n```\n  int max_arf_layer \u003d gf_group-\u003emax_layer_depth - 1;\n```",
      "revId": "8da6ff8a87741988ed041bf3a9875e40d08514ee",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98faeac4_b0fa0fac",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 2
      },
      "lineNbr": 943,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-02-25T01:43:44Z",
      "side": 1,
      "message": "Becayse we subtract 1 from `gf_group-\u003emax_layer_depth` in line 932, we can actually assert `max_arf_layer \u003c\u003d MAX_ARF_LAYERS - 1` here.\n\nI have to say there seems to be an off-by-one error somewhere.",
      "revId": "8da6ff8a87741988ed041bf3a9875e40d08514ee",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}