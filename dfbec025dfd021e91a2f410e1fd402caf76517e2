{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "4a8fd422_de674cdf",
        "filename": "av1/ratectrl_qmode.cc",
        "patchSetId": 2
      },
      "lineNbr": 953,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-08-09T14:32:15Z",
      "side": 1,
      "message": "I don\u0027t think this is correct. AFAICT both the downstream code and the implementation of GetGopEncodeInfo currently assume that there is an entry for every frame.\n\nSpecifically, GetGopEncodeInfo does this:\n1. Sets frame count to tpl_gop_stats.frame_stats_list.size()\n2. Iterates with i from 0 to frame_ccount\n3. Uses i as an index in gop_struct.gop_frame_list[i]\n\nhttps://source.corp.google.com/aom/av1/ratectrl_qmode.cc;rcl\u003df2cafa87dd5c4d122ef999ddee3f3fa248abefdf;l\u003d1250-1252,1254\n\nThe entries for no-show frames passed in by the downstream code have no entries in block_stats_list, and GetGopEncodeInfo ignores them, so clearly they\u0027re not really needed. \n\nWe could change the API to decree that there should only entries for shown frames,  but as the code stands now I don\u0027t believe that this will work.",
      "range": {
        "startLine": 951,
        "startChar": 0,
        "endLine": 953,
        "endChar": 0
      },
      "revId": "dfbec025dfd021e91a2f410e1fd402caf76517e2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}