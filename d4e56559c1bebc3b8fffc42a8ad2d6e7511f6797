{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a679f98b_f74137c6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 6245
      },
      "writtenOn": "2022-10-17T17:37:20Z",
      "side": 1,
      "message": "Hi Marco, Yunqing,\n\nIn this CL, we tried fixing an issue with the transform skip decision in model_rd_for_sb_uv() function. In the parent version, the decision was done using incorrect SSE which was accounting for luma SSE also (whereas rate and distortion correspond to chroma only). In this CL, we ensured that skip decision is done using chroma SSE only (i.e., consistent with rate and distortion values). \n\nPlease check the detailed borg results below:\n \n```\n                 Instruction Count        BD-Rate Loss(%)       \ncpu Resolution    Reduction(%)    avg.psnr ovr.psnr    ssim  \n 7   rtc_1080p      0.257         -0.1257  -0.0891    0.0857  \n 7         rtc      0.743         -0.2420  -0.2430   -0.4687\n 7    rtc_derf      0.174         -0.1209  -0.0423   -0.0862\n 7  rtc_screen      1.813         -0.9087  -1.0370   -1.1720\n 8   rtc_1080p      0.194          0.0509   0.0566    0.1960  \n 8         rtc      0.483         -0.1486  -0.1077   -0.2663\n 8    rtc_derf      0.027         -0.1235  -0.0976    0.0097\n 8  rtc_screen      1.653         -0.8476  -0.5138   -0.4536\n 9   rtc_1080p      0.613          0.4164   0.4841    0.3588  \n 9         rtc      0.470          0.1622   0.1035    0.2514\n 9    rtc_derf      0.103         -0.0154   0.0129    0.0530\n 9  rtc_screen      2.767         -1.1438  -0.4192   -0.6904\n10   rtc_1080p      0.339         -0.0237   0.0077    0.2126  \n10         rtc      0.590         -0.1287  -0.1055   -0.0804\n10    rtc_derf      0.110         -0.0953  -0.1102   -0.0569\n10  rtc_screen      3.202         -0.9018  -0.1540   -0.2385\n```\n\nPlease check the details of the contents with maximum BD-Rate drop (avg.psnr) below (for screen and non-screen contents):  \n\n```\n                                                BD-Rate Loss(%)\ncpu               Content                avg.psnr   ovr.psnr    ssim\n 7                    thaloundeskmtgvga   1.1707     0.9301    1.4713\n 7   screenshare_slidechanges.1850_1110   0.5123    -4.6042   -4.0617\n 8                 mac1_30fps_1920_1080   1.5219     1.4702    1.4718\n 8    screen_crd_colwinscroll.1920_1128   0.3642     1.0377    1.2805\n 9                 mac2_30fps_1920_1080   1.2905     1.3157    1.6906\n 9    screenshare_colorslides.1820_1320   0.0086     2.0976   -1.0822\n10                 mac2_30fps_1920_1080   1.1693     1.1320    1.4858\n10        screenshare_youtube.1680_1178   0.7061     1.0820    1.2885\n```\n\nThe CL gives BD-Rate improvement for majority of speed settings and test-set combinations except a few cases (rtc set of speed\u003d9 and rtc_1080p set of speed\u003d8,9). Though there are maximum drops as quoted above, we feel that this CL should be considered as the CL fixes an underlying issue and gives BD-Rate improvement overall.\n\nThe instruction count reduction specified has been measured using command:\n $ perf stat -e instructions:u ./aomenc â€¦\n\nWe also verified for a few contents that CL produces bit-exact output for specific speed settings --good usage.\n\nPlease let us know your opinion on the CL. \n\nRegards,\nRanjit",
      "revId": "d4e56559c1bebc3b8fffc42a8ad2d6e7511f6797",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b45abf6_eb889cb2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5190
      },
      "writtenOn": "2022-10-17T17:57:28Z",
      "side": 1,
      "message": "Stats change looks good (e.g, speed 10 screen).\n\nWith this fix presumably now we would set skip more often (hence speedup), in a sense the incorrect sse was making it harder to set the skip flag. So only concern is whether this would cause any visual issues. But agree that is should be considered a bugfix, and the bdrate gains looks good.",
      "revId": "d4e56559c1bebc3b8fffc42a8ad2d6e7511f6797",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "d4e56559c1bebc3b8fffc42a8ad2d6e7511f6797",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforcement-satisfied_gerrit"]}
      },
      "overrideExpressionResult": {},
      "patchSetCommitId": "d4e56559c1bebc3b8fffc42a8ad2d6e7511f6797",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {
        "value": true
      }
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI or human verified the change"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "d4e56559c1bebc3b8fffc42a8ad2d6e7511f6797",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}