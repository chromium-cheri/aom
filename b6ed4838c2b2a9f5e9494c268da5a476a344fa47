{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "596e2782_30e4b8a8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-06T17:27:39Z",
      "side": 1,
      "message": "Hi Wan-Teh, Frank, Cheng,\n\nThis CL adds a new unit-test PostProcFiltersTest to validate the correct behaviour of the encoder with control flag AV1E_SET_SKIP_POSTPROC_FILTERING. This unit-test bit matches the 2 encoded streams, one with control flag \"AV1E_SET_SKIP_POSTPROC_FILTERING\" set to zero for all frames and the other by toggling values of the same control flag (between 0 and 1) at different indices. This CL also adds asserts in the PostEncodeFrameHook() for the second encode instance to ensure that the recon frame will be null if control flag “AV1E_SET_SKIP_POSTPROC_FILTERING” is set to 1 and vice versa. \n\nCurrently we have added 2 tests, PostProcFiltersTest for cpu-used 9 and PostProcFiltersTestLarge for cpu-used 3,6 respectively.\n\nPlease review the CL. \n\nRegards,\nMudassir",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67680092_afd01d35",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 6585
      },
      "writtenOn": "2022-10-10T07:09:57Z",
      "side": 1,
      "message": "Why do the two encoding have the same MD5? One is always with filtering, one is with filtering on and off.\n\nAm I missing something?",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be84d2cd_e23d8f3c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-10T12:40:58Z",
      "side": 1,
      "message": "Hi Cheng,\n\nThe codec control flag AV1E_SET_SKIP_POSTPROC_FILTERING when enabled, skips the application of post-processing filters on the reconstructed frames though loop filter levels are signaled in the bit-stream. Therefore the bit-stream is expected to match with this control flag enabled or disabled, but the reconstructed frames would not match which is tested in PostEncodeFrameHook, accordingly.",
      "parentUuid": "67680092_afd01d35",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22811b63_0aaa64b2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 6585
      },
      "writtenOn": "2022-10-10T21:29:10Z",
      "side": 1,
      "message": "Thanks for the explanation. I miss understood that the md5 is generated on the bitstream instead of the frame.",
      "parentUuid": "be84d2cd_e23d8f3c",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "02bf97a6_d3138d00",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Hi Mudassir,\n\nThank you for adding a unit test. All of my comments are on minor issues (mostly coding style issues).",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b54bcbbf_fd3a5181",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Include the following system headers (for std::unique_ptr, std::string, and std::vector respectively):\n\nhttps://google.github.io/styleguide/cppguide.html#Include_What_You_Use\n\n```\n#include \u003cmemory\u003e\n#include \u003cstring\u003e\n#include \u003cvector\u003e\n```\n\nSeparate the system headers from the other headers with a blank line. See the examples in the Style Guide:\n\nhttps://google.github.io/styleguide/cppguide.html#Names_and_Order_of_Includes",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "25e6cad9_b219d191",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b54bcbbf_fd3a5181",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "42b09970_1c026a8c",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Nit: Change \"PostProc\" to \"Postproc\".",
      "range": {
        "startLine": 20,
        "startChar": 6,
        "endLine": 20,
        "endChar": 14
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ab8aa28_d051e4bd",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 20,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "42b09970_1c026a8c",
      "range": {
        "startLine": 20,
        "startChar": 6,
        "endLine": 20,
        "endChar": 14
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1416362b_a2518aba",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Nit: Change the first \"unsigned int\" to \"int\". See my comment at line 115.",
      "range": {
        "startLine": 21,
        "startChar": 49,
        "endLine": 21,
        "endChar": 61
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e03a580c_eea48fb3",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 21,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1416362b_a2518aba",
      "range": {
        "startLine": 21,
        "startChar": 49,
        "endLine": 21,
        "endChar": 61
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6aa1d70b_8c64988d",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Initialize all data members, and initialize them using initializers:\n\n```\n  PostProcFiltersTest()\n      : EncoderTest(GET_PARAM(0)),\n        set_skip_postproc_filtering_(false),\n        frame_number_(0),\n        cpu_used_(GET_PARAM(1)),\n        bd_(GET_PARAM(2)) {\n  }\n```",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d7b6b34f_72914955",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 27,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6aa1d70b_8c64988d",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2d3f3146_4eb888c9",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 6585
      },
      "writtenOn": "2022-10-10T21:29:10Z",
      "side": 1,
      "message": "I recommend to always include curly braces for if else.\nThis is recommended by Google C++ style guide:\nhttps://google.github.io/styleguide/cppguide.html#Conditionals\n\nI\u0027ve seen this happen often.\nPlease correct them in this cl.",
      "range": {
        "startLine": 42,
        "startChar": 6,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "37eb74bb_6f386ab9",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2d3f3146_4eb888c9",
      "range": {
        "startLine": 42,
        "startChar": 6,
        "endLine": 42,
        "endChar": 29
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f572fb69_17a0c314",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Nit: recon \u003d\u003e reconstructed",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bc30d61f_919c3401",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f572fb69_17a0c314",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c58820c3_3d325e41",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Nit: `video` can be initialized directly:\n\n```\n    std::unique_ptr\u003clibaom_test::VideoSource\u003e video(\n        new libaom_test::YUVVideoSource(\"niklas_640_480_30.yuv\",\n                                        AOM_IMG_FMT_I420, 640, 480, 30,\n                                        1, 0, frames_));\n```",
      "range": {
        "startLine": 81,
        "startChar": 0,
        "endLine": 84,
        "endChar": 64
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a07f1cd3_1a07c58d",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 84,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c58820c3_3d325e41",
      "range": {
        "startLine": 81,
        "startChar": 0,
        "endLine": 84,
        "endChar": 64
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9dcd7d2_28828e5c",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 92,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Nit: Merge these two lines:\n\n```\n    std::vector\u003cstd::string\u003e apply_postproc_filters_md5_enc \u003d md5_enc_;\n```\n\nAlso, it is more efficient to move rather than copy:\n\n```\n    std::vector\u003cstd::string\u003e apply_postproc_filters_md5_enc \u003d std::move(md5_enc_);\n```\n\nWe need to include \u003cutility\u003e for std::move.",
      "range": {
        "startLine": 91,
        "startChar": 0,
        "endLine": 92,
        "endChar": 46
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6cbc7a60_f8966ed9",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 92,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f9dcd7d2_28828e5c",
      "range": {
        "startLine": 91,
        "startChar": 0,
        "endLine": 92,
        "endChar": 46
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e55b78f_50d3f414",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Similarly here:\n\n```\n    std::vector\u003cstd::string\u003e toggle_apply_postproc_filters_md5_enc \u003d std::move(md5_enc_);\n```",
      "range": {
        "startLine": 99,
        "startChar": 0,
        "endLine": 100,
        "endChar": 53
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "06db4b61_4e6084f6",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 100,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5e55b78f_50d3f414",
      "range": {
        "startLine": 99,
        "startChar": 0,
        "endLine": 100,
        "endChar": 53
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "03d6a977_4ddc2b7d",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Nit: These two constants should follow the Style Guide\u0027s naming convention for constants:\n\nhttps://google.github.io/styleguide/cppguide.html#Constant_Names\n\n```\n  static constexpr int kFrames \u003d 30;\n  static constexpr unsigned int kCqLevel \u003d 18;\n```",
      "range": {
        "startLine": 113,
        "startChar": 0,
        "endLine": 114,
        "endChar": 46
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "679527c0_6518125a",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "03d6a977_4ddc2b7d",
      "range": {
        "startLine": 113,
        "startChar": 0,
        "endLine": 114,
        "endChar": 46
      },
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c18b2f3c_c63b66d2",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 115,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Nit: Declare `cpu_used_` as `int` becaude `AOME_SET_CPUUSED` takes `int` parameter.",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "935fe73c_dbc8ff06",
        "filename": "test/post_proc_filters_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 115,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c18b2f3c_c63b66d2",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f38256e_682a1251",
        "filename": "test/test.cmake",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-10-10T22:42:44Z",
      "side": 1,
      "message": "Nit: In the file name, change \"post_proc\" to \"postproc\" to match how this is spelled in the C code.",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24039f20_f708ca4c",
        "filename": "test/test.cmake",
        "patchSetId": 3
      },
      "lineNbr": 79,
      "author": {
        "id": 25857
      },
      "writtenOn": "2022-10-11T11:28:18Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1f38256e_682a1251",
      "revId": "b6ed4838c2b2a9f5e9494c268da5a476a344fa47",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}