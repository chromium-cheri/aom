{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "bbf21536_4d6c5257",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 8893
      },
      "writtenOn": "2023-05-19T16:16:02Z",
      "side": 1,
      "message": "The sf \u0027use_downsampled_sad\u0027 downsamples rows during SAD computation for resolution \u003e\u003d 720p. This feature is extended to lowres and midres based on the SAD deviation of the even rows to odd rows.\n\nThe results are as follows:\n```\n                 Instruction Count        BD-Rate Loss(%)\ncpu      Testset   Reduction(%)    avg.psnr   ovr.psnr    ssim\n 5       LOWRES2      1.971        -0.0178    -0.0129   -0.0192  \n 5       MIDRES2      3.298        -0.0489    -0.0542   -0.0468  \n 5        HDRES2      0.000         0.0000     0.0000    0.0000  \n 5       Average      1.752        -0.0222    -0.0224   -0.0220  \n\n 6       LOWRES2      1.296         0.0185     0.0180    0.0652 \n 6       MIDRES2      2.866         0.0667     0.0641    0.1245 \n 6        HDRES2      0.000         0.0000     0.0000    0.0000 \n 6       Average      1.383         0.0284     0.0274    0.0632\n``` \nThe instruction count reduction specified has been measured using command:\n$ perf stat -e instructions:u ./aomenc\n\nWe also tested for synthetic clips of resolution 640x360 and 426x240 (generated by cropping the clip shared earlier by Chi Yo Tsai for 1280x720) and did not observe any visual artifacts.",
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c49c707e_34bb6325",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2023-05-23T16:41:13Z",
      "side": 1,
      "message": "Thanks for the modification. Looks good now. Good tradeoff for \u003c hdres. Possible to know why this doesn\u0027t work for hdres?",
      "parentUuid": "bbf21536_4d6c5257",
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab675003_101d13b6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 8893
      },
      "writtenOn": "2023-05-24T12:37:42Z",
      "side": 1,
      "message": "The sf was enabled for hdres previously (hdres uses level 2). Also, for hdres, the sf with level 2 shows a good speed vs BD-Rate trade-off, i.e., disabling the sf at speed 6 results in a BD-Rate gain of only ~0.1% with 7% instruction count increase. Thus, in this patch we haven\u0027t changed the behaviour of this sf for hdres.",
      "parentUuid": "c49c707e_34bb6325",
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4766a30_bc082415",
        "filename": "av1/encoder/mcomp.c",
        "patchSetId": 3
      },
      "lineNbr": 1808,
      "author": {
        "id": 5185
      },
      "writtenOn": "2023-05-19T20:47:29Z",
      "side": 1,
      "message": "see above comment",
      "range": {
        "startLine": 1773,
        "startChar": 1,
        "endLine": 1808,
        "endChar": 0
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "04dd8fff_add8d97d",
        "filename": "av1/encoder/mcomp.c",
        "patchSetId": 3
      },
      "lineNbr": 1808,
      "author": {
        "id": 8893
      },
      "writtenOn": "2023-05-23T14:15:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a4766a30_bc082415",
      "range": {
        "startLine": 1773,
        "startChar": 1,
        "endLine": 1808,
        "endChar": 0
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ed9a42f_554ce6e5",
        "filename": "av1/encoder/speed_features.c",
        "patchSetId": 3
      },
      "lineNbr": 628,
      "author": {
        "id": 5185
      },
      "writtenOn": "2023-05-19T20:47:29Z",
      "side": 1,
      "message": "new level 2 is the previous level 1, right?",
      "range": {
        "startLine": 628,
        "startChar": 4,
        "endLine": 628,
        "endChar": 38
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "604b738e_b6de9a9a",
        "filename": "av1/encoder/speed_features.c",
        "patchSetId": 3
      },
      "lineNbr": 628,
      "author": {
        "id": 8893
      },
      "writtenOn": "2023-05-23T14:15:10Z",
      "side": 1,
      "message": "Yes. That is correct.",
      "parentUuid": "6ed9a42f_554ce6e5",
      "range": {
        "startLine": 628,
        "startChar": 4,
        "endLine": 628,
        "endChar": 38
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2a8a01b_c23635b2",
        "filename": "av1/encoder/speed_features.h",
        "patchSetId": 3
      },
      "lineNbr": 814,
      "author": {
        "id": 5185
      },
      "writtenOn": "2023-05-19T20:47:29Z",
      "side": 1,
      "message": "Is this level 1 similar to what vp9 speed 0 uses?",
      "range": {
        "startLine": 813,
        "startChar": 5,
        "endLine": 814,
        "endChar": 23
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c22af553_69592057",
        "filename": "av1/encoder/speed_features.h",
        "patchSetId": 3
      },
      "lineNbr": 814,
      "author": {
        "id": 8893
      },
      "writtenOn": "2023-05-23T14:15:10Z",
      "side": 1,
      "message": "Yes. `use_downsampled_sad \u003d 1` is similar to what vp9 speed 0 uses, i.e., during motion search if the pred-to-src SAD deviation of the even and odd rows for the starting MV is small, SAD is computed only for even rows. level 2 is not used in vp9.",
      "parentUuid": "c2a8a01b_c23635b2",
      "range": {
        "startLine": 813,
        "startChar": 5,
        "endLine": 814,
        "endChar": 23
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29f1378f_525932fa",
        "filename": "av1/encoder/speed_features.h",
        "patchSetId": 3
      },
      "lineNbr": 815,
      "author": {
        "id": 5185
      },
      "writtenOn": "2023-05-19T20:47:29Z",
      "side": 1,
      "message": "Is this comment accurate? Level 2 also does some checking, right?",
      "range": {
        "startLine": 815,
        "startChar": 8,
        "endLine": 815,
        "endChar": 23
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "563a7599_1165f7a3",
        "filename": "av1/encoder/speed_features.h",
        "patchSetId": 3
      },
      "lineNbr": 815,
      "author": {
        "id": 8893
      },
      "writtenOn": "2023-05-23T14:15:10Z",
      "side": 1,
      "message": "Added more details.",
      "parentUuid": "29f1378f_525932fa",
      "range": {
        "startLine": 815,
        "startChar": 8,
        "endLine": 815,
        "endChar": 23
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8137d25f_ce36a99b",
        "filename": "av1/encoder/temporal_filter.c",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 5185
      },
      "writtenOn": "2023-05-19T20:47:29Z",
      "side": 1,
      "message": "Can this key frame decision be integrated in the speed feature setting?",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 166,
        "endChar": 3
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "153e6919_dcbbb0fb",
        "filename": "av1/encoder/temporal_filter.c",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 8893
      },
      "writtenOn": "2023-05-23T14:15:10Z",
      "side": 1,
      "message": "Temporal filtering and tpl modules are called before the setting of speed features at frame level in the function `av1_set_speed_features_framesize_dependent()`. Thus, integrating the above key frame decision in the speed feature setting would require that the function `av1_set_speed_features_framesize_dependent()` be also called before temporal filtering. We have added a comment and a TODO stating the same in the function `set_good_speed_feature_framesize_dependent()`. Please check.",
      "parentUuid": "8137d25f_ce36a99b",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 166,
        "endChar": 3
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3b8088f9_cca3983e",
        "filename": "av1/encoder/temporal_filter.c",
        "patchSetId": 3
      },
      "lineNbr": 166,
      "author": {
        "id": 5185
      },
      "writtenOn": "2023-05-23T16:41:13Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "153e6919_dcbbb0fb",
      "range": {
        "startLine": 161,
        "startChar": 0,
        "endLine": 166,
        "endChar": 3
      },
      "revId": "1282d577f780cdb6214a076d288cc998a67e7a89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}