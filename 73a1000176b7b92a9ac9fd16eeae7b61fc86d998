{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2a039a0d_44b4f2da",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 15075
      },
      "writtenOn": "2021-07-20T18:05:29Z",
      "side": 1,
      "message": "Hi Yunqing,\nThis patch moves frame level twopass members to twopass_frame structure.\n\nIn the case of frame parallel encode, each frame level context will require its own offset into the twopass stats buffers(depending on their display order hint). Apart from this, there are two other members(mb_av_energy, and fr_content_type), which are initialized and used on a frame level basis. These members are moved to a structure twopass_frame, which resides in cpi. This allows various frame level contexts to maintain their own frame level states related to twopass stats.\n\nWe have also added an assert in is_fp_wavelet_energy_invalid() to resolve some static analyzer build failures.\n\nThis change is bit-exact and has been locally verified with bitstream match tests over a combination of various configuration values for --good, --rt, --threads, --tile-rows, --tile-columns, --cpu-used, --end-usage, --row-mt, etc.\n\nPlease review.",
      "revId": "73a1000176b7b92a9ac9fd16eeae7b61fc86d998",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}