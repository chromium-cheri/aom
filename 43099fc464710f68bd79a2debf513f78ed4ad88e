{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "67714c84_f0af5e9c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-11-22T19:37:27Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis patch adds the unit test \u0027AVxFrameParallelEncodeTest\u0027 to validate FPMT. This unit test is enabled only when CONFIG_FRAME_PARALLEL_ENCODE and CONFIG_FPMT_TEST are set to 1. The test compares the result of parallel encode of frames using multiple cpis with that of simulation of parallel encode of frames using single cpi for bitmatch.\n\nCurrently in the unit test, cfg_.g_threads \u003d 2 enables PARALLEL_SIMULATION_ENCODE (simulation with single cpi) and cfg_.g_threads \u003d 8 enables PARALLEL_ENCODE (with multiple cpis) for num_fp_contexts\u003d4. \u0027AVxFrameParallelEncodeHDResTest\u0027 tests for an hdres content \u0027niklas_1280_720_30.y4m\u0027 for speed presets 2, 4 and 6 for tile configurations (TileRows x TileColumns) 1x1, 1x2, 2x1 and 2x2. \u0027AVxFrameParallelEncodeLowResTest\u0027 tests for a lowres content \u0027hantro_collage_w352h288.yuv\u0027 for speed presets 1 and 2 for single tile configuration.\n\nThis unit test was locally tested and bit match in simulation vs actual parallel encode was verified.\n\nPlease review.\n\nRegards,\nRemya\n",
      "revId": "43099fc464710f68bd79a2debf513f78ed4ad88e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4f2532ca_f77c630c",
        "filename": "test/frame_parallel_enc_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-11-24T05:27:20Z",
      "side": 1,
      "message": "We could define an API for this unit test, so we could enable FPMT here. This will allow running of this unit test even while FPMT is turned off in Configuration.\nYou can use motion_vector_test as an example.",
      "range": {
        "startLine": 59,
        "startChar": 2,
        "endLine": 59,
        "endChar": 54
      },
      "revId": "43099fc464710f68bd79a2debf513f78ed4ad88e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a784dd2_848424cf",
        "filename": "test/frame_parallel_enc_test.cc",
        "patchSetId": 2
      },
      "lineNbr": 173,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-11-24T05:27:20Z",
      "side": 1,
      "message": "FYI: If any test takes long, it can be defined as \"large\" test. Then it would be tested weekly instead of nightly.\nIt is good to have this unit test. More tests can be added if needed.",
      "range": {
        "startLine": 167,
        "startChar": 0,
        "endLine": 173,
        "endChar": 49
      },
      "revId": "43099fc464710f68bd79a2debf513f78ed4ad88e",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}