{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "3790ff59_6933822d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-09-09T08:15:29Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis patch modifies the condition setting the speed features \u0027prune_ref_frame_for_gm_search\u0027, \u0027mv_cost_upd_level\u0027 and \u0027inter_mode_rd_model_estimation\u0027 for row-mt to use \u0027cpi-\u003emt_info.num_workers\u0027 instead of \u0027cpi-\u003eoxcf.max_threads\u0027 so that with FPMT, any parallel frame using single thread can set the speed features appropriately.\n\nThis change has been verified to be bit-exact with no speed impact for the default path (CONFIG_FRAME_PARALLEL_ENCODE\u003d0) for RT (speed 7, 8, 9 for multi-tile, multi-thread encodes) and good preset multi-thread encodes.\n \nPlease find below the encode time and bd-rate impact of this patch with FPMT:\nRef : FP1 degree 3 (max num_fp_contexts \u003d 3, https://aomedia-review.googlesource.com/c/aom/+/145422)\nTest: FP1 degree 3 + patch set 2\n\nBelow data was obtained on 5 720p contents (city_720p30, fourpeople_720p60, night_720p30, parkrun_720p50 and shields_720p50) for lag-in-frames\u003d19 and 60 frames, for 5 qp points (20, 32, 43, 55, 63) for thread configuration wherein a parallel frame uses single thread.\n\n                            | Encode Time  |        BD-Rate Impact %         |\nResolution | Threads  | CPU | Reduction %  |  avg.psnr    ovr.psnr     ssim  |\n-----------|-----------------------------------------------------------------|\n   720p    | 3(1,1,1) |  2  |    2.77      |  -0.0558  |  -0.0595  | -0.0788 |\n   720p    | 3(1,1,1) |  3  |    0.86      |  -0.0902  |  -0.0966  | -0.1153 |\n   720p    | 3(1,1,1) |  4  |    0.92      |  -0.1362  |  -0.1396  | -0.2159 |\n   720p    | 3(1,1,1) |  5  |    0.30      |  -0.0353  |  -0.0421  | -0.0649 |\n   720p    | 3(1,1,1) |  6  |    0.53      |  -0.0339  |  -0.0396  | -0.0514 |\n-----------|----------|--------------------|-----------|-----------|---------|\n \nIn the commit message, BD rate impact column:\n[+] sign is for BD-Rate drop\n[-] sign is for BD-Rate improvement\n\nPlease review this patch.\n\nRegards,\nRemya\n",
      "revId": "ee4f9737320a38a19cd8c0d538a9d332c818a87a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "71181676_57800a61",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-09-09T19:29:53Z",
      "side": 1,
      "message": "Good improvement!",
      "revId": "ee4f9737320a38a19cd8c0d538a9d332c818a87a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}