{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "02bfa48d_132bf90b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "Thanks, Jerome, this is a great start! I was planning on hashing some of this out in the design doc, but really it makes more sense to address the code-level details in a code review.\n\nI\u0027m looking forward to getting the details of this interface sorted out ASAP so that we can all start implementing the code on either side of the API.",
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3b58a1ad_c761dfdd",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "If there\u0027s no objection to taking parts of absl as a dependency, it would be cleaner to pass list arguments of this sort as absl::Span\u003cconst T\u003e rather than using ad hoc structs like this.",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 22,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9a1d9fa_f16ac358",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 5250
      },
      "writtenOn": "2022-03-01T20:03:33Z",
      "side": 1,
      "message": "Let\u0027s just use vector?",
      "parentUuid": "3b58a1ad_c761dfdd",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 22,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "937f2915_0a1f14b6",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T20:14:04Z",
      "side": 1,
      "message": "Sure, that\u0027s fine. absl::Span is more versatile, since it allows other container types to be passed, potentially allowing heap allocations to be avoided. But certainly we can use std::vector for now. If there\u0027s a need to optimize later we can change to absl::Span then.",
      "parentUuid": "e9a1d9fa_f16ac358",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 22,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d4b6d4fc_14c3671f",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 22,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "any new dependencies would need to be added to aom/third_party and we normally refrain from adding more dependencies at the moment as it\u0027s been integrated into many systems.",
      "parentUuid": "937f2915_0a1f14b6",
      "range": {
        "startLine": 18,
        "startChar": 0,
        "endLine": 22,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7a760d7_1f65bcc6",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 5250
      },
      "writtenOn": "2022-03-01T20:03:33Z",
      "side": 1,
      "message": "TplBlockStats\n\nThis is the stats for a TPL block\n\nAdd block_size, row, col to accommodate hardware\u0027s flexibility?",
      "range": {
        "startLine": 23,
        "startChar": 7,
        "endLine": 23,
        "endChar": 18
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08485bd9_cd9cb634",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T20:14:04Z",
      "side": 1,
      "message": "SGTM",
      "parentUuid": "d7a760d7_1f65bcc6",
      "range": {
        "startLine": 23,
        "startChar": 7,
        "endLine": 23,
        "endChar": 18
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ee059b98_9fac8e91",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 23,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "08485bd9_cd9cb634",
      "range": {
        "startLine": 23,
        "startChar": 7,
        "endLine": 23,
        "endChar": 18
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a236c89c_e8eb2cb9",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "Many of these fields are not available from Argos hardware. Either they should be removed from here, or we need to either\n(a) make it explicit which fields are required and have a way of signaling which fields are available, or\n(b) document that some fields are always ignored",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 35,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5f9c9eb5_525d39d1",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 5250
      },
      "writtenOn": "2022-03-01T20:03:33Z",
      "side": 1,
      "message": "Let\u0027s just keep the intra_cost and inter_cost that Argos has?\nThis library is not going to be used in software av1 anytime soon.",
      "parentUuid": "a236c89c_e8eb2cb9",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 35,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7532cdea_59d4d7eb",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T20:14:04Z",
      "side": 1,
      "message": "Also mv and ref_frame_index.\n\nArgos is limited to 2 MV\u0027s here, so mv could just have 2 elements instead of INTER_REFS_PER_FRAME.",
      "parentUuid": "5f9c9eb5_525d39d1",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 35,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d444d00_bc143e2a",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 35,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7532cdea_59d4d7eb",
      "range": {
        "startLine": 26,
        "startChar": 0,
        "endLine": 35,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e914f42_b7a56bcc",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "This isn\u0027t used yet. We\u0027ll need a function in the API which returns one of these, given the FirstPassInfo. In fact, SetFirstPassInfo could just do that, in which case it could be renamed ProcessFirstPassInfo or something like that.",
      "range": {
        "startLine": 40,
        "startChar": 7,
        "endLine": 40,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3150c460_abe0685c",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T14:26:40Z",
      "side": 1,
      "message": "Sorry, the first sentence of my comment above is wrong. This is used as an argument to SetTplInfo. \n\nBut my understanding is that it\u0027s the library\u0027s responsibility to determine the GOP structure based on the one pass stats, not the caller\u0027s responsibility.",
      "parentUuid": "3e914f42_b7a56bcc",
      "range": {
        "startLine": 40,
        "startChar": 7,
        "endLine": 40,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e7886622_68f0dbcb",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 40,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "That sounds about right...",
      "parentUuid": "3150c460_abe0685c",
      "range": {
        "startLine": 40,
        "startChar": 7,
        "endLine": 40,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1b322f10_014edfc8",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T14:26:40Z",
      "side": 1,
      "message": "This doesn\u0027t make it clear which pixels each TplDepStats corresponds to. If the assumption is that each one corresponds to a 16x16 block in row-major order, this should be stated explicitly.\n\nBut note that the motion tree stats from Argos hardware are not necessarily for 16x16 blocks. The encoding pass used to generate the stats may partition into coding units anywhere from 8x8 to 64x64, and generates stats per block.\n\nIf the library is capable of handling stats at resolutions other than 16x16, we\u0027ll need to encode the size (and possibly position) of each block here. If not, we\u0027ll need to ensure that the hardware generates stats for 16x16 blocks.",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 46,
        "endChar": 30
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d667b199_645442bc",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 5250
      },
      "writtenOn": "2022-03-01T20:03:33Z",
      "side": 1,
      "message": "We will add block_size and row/col to TplDepStats(or TplBlockStats) accommodate argos\u0027s flexibility.\n\nLet\u0027s just vector here?",
      "parentUuid": "1b322f10_014edfc8",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 46,
        "endChar": 30
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0855300c_f88b684c",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 46,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d667b199_645442bc",
      "range": {
        "startLine": 46,
        "startChar": 0,
        "endLine": 46,
        "endChar": 30
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0472470a_1c27c6f5",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "Rather than having separate vectors for q_index and rdmult, it would be cleaner to define a struct of per frame info, and have GetGopEncodeInfo return a vector of those, e.g.:\n\nstruct FrameEncodeParameters {\n  int q_index;\n  int rdmult;\n};\n\n  virtual std::vector\u003cFrameEncodeParameters\u003e GetGopEncodeInfo() \u003d 0;",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 55,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c3437c85_d5f8c204",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0472470a_1c27c6f5",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 55,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9aaca4d4_e0417f96",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 5250
      },
      "writtenOn": "2022-03-02T18:20:29Z",
      "side": 1,
      "message": "Agree.",
      "parentUuid": "0472470a_1c27c6f5",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 55,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f0d833d3_6dbc8b7a",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 55,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-03T01:52:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9aaca4d4_e0417f96",
      "range": {
        "startLine": 50,
        "startChar": 0,
        "endLine": 55,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "346cdc90_39714243",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "This could just be std::vector\u003cstd::vector\u003cGopEncodeParameters\u003e\u003e. That said, we\u0027re planning on doing a lagged two-pass encode, in which SetTplInfo/DetermineGopInfo/GetGopEncodeInfo are called once per GOP rather than once for the whole chunk. In which case this struct really isn\u0027t needed at all, and GetGopEncodeInfo should just return std::vector\u003cGopEncodeParameters\u003e.",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 59,
        "endChar": 2
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7c245918_68db5a23",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 59,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-03T01:52:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "346cdc90_39714243",
      "range": {
        "startLine": 56,
        "startChar": 0,
        "endLine": 59,
        "endChar": 2
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d1c6705_82a4990c",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "Everything in this header should be included in the namespace, with the exception of definitions which are intentionally shared with existing libaom C code.",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 61,
        "endChar": 15
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e9b0e80_9d6d1559",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "I see that this is the namespace used by ratectrl_rtc. We need to make a conscious decision of whether to do this or use a separate namespace for this library. I think sharing the namespace is fine as long as we can insure that there are no conflicts between the two libraries. It\u0027s conceivable the same binary might want to include both libraries, so if any code is to be shared between them, it should be in common files.",
      "range": {
        "startLine": 61,
        "startChar": 10,
        "endLine": 61,
        "endChar": 13
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "23656cd9_6713841a",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "5d1c6705_82a4990c",
      "range": {
        "startLine": 61,
        "startChar": 0,
        "endLine": 61,
        "endChar": 15
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9354eabe_e8771e92",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "I don\u0027t expect there to be any conflicts between two libraries, as none of this structures are used on rtc side. it was named \"aom\" mostly because the code still sits in libaom repo. But I\u0027m open to other names.",
      "parentUuid": "5e9b0e80_9d6d1559",
      "range": {
        "startLine": 61,
        "startChar": 10,
        "endLine": 61,
        "endChar": 13
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5821b783_eedabeb2",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 61,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-02T14:53:51Z",
      "side": 1,
      "message": "aom is fine.",
      "parentUuid": "9354eabe_e8771e92",
      "range": {
        "startLine": 61,
        "startChar": 10,
        "endLine": 61,
        "endChar": 13
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1da1183f_1bd7846b",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "Perhaps this should be called AV1RateControlQModeInterface, to make it clear that it\u0027s an interface class. The implementation (which would be private to the library) could then be called AV1RateControlQMode.",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a645bca_c46a4c43",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "My idea was to remove the pure virtual functions and just implement them with this class in ratectrl_qmode.cc in the future, as this is a relatively simple rate control algorithm and we probably don\u0027t need to extend this interface.",
      "parentUuid": "1da1183f_1bd7846b",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "53d31957_3b2fff83",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-02T14:53:51Z",
      "side": 1,
      "message": "The reason I suggested making it an interface is to allow a test double (i.e., a fake or a mock) to be defined. That would allow me to start developing and testing the calling code without requiring a finished implementation. I wouldn\u0027t necessarily expect you to implement a test double; I can do that myself once we have an interface.",
      "parentUuid": "7a645bca_c46a4c43",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87d70b87_a1a268e5",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-02T18:12:04Z",
      "side": 1,
      "message": "I see. That makes sense.",
      "parentUuid": "53d31957_3b2fff83",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "73f8d424_017fd3eb",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-03T01:52:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "87d70b87_a1a268e5",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "039fd231_4c921668",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-03T13:29:19Z",
      "side": 1,
      "message": "I\u0027m not seeing this changed in Patchset 5. Are those changes coming in another Patchset?",
      "parentUuid": "73f8d424_017fd3eb",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fc96e7a2_f24a1225",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 62,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-03T18:22:21Z",
      "side": 1,
      "message": "Sorry I missed that. Thanks for catching this.",
      "parentUuid": "039fd231_4c921668",
      "range": {
        "startLine": 62,
        "startChar": 6,
        "endLine": 62,
        "endChar": 25
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b359f6e4_1e60fd61",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "We need to think about whether we need a mechanism for error handling in this API. If errors are possible, it may be worth having functions return absl::Status or absl::StatusOr\u003cT\u003e so that we have a consistent way to handle errors from the library.\n\nThat may not be an issue for this function specifically; just throwing it out there to see what people think about the issue in general.",
      "range": {
        "startLine": 69,
        "startChar": 10,
        "endLine": 69,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f59cd492_3d662534",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "libaom has its own error handling:\nhttps://osscs.corp.google.com/libaom/aom/+/master:aom/aom_codec.h;l\u003d155?q\u003daom_codec.h\u0026ss\u003dlibaom\n\nWe can use this, then this library will be dependent on libaom.",
      "parentUuid": "b359f6e4_1e60fd61",
      "range": {
        "startLine": 69,
        "startChar": 10,
        "endLine": 69,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "607d142c_198fea25",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-02T14:53:51Z",
      "side": 1,
      "message": "Okay. Let\u0027s wait and see if there\u0027s a need to return any errors, and decide how to handle it then.\n\nAnd don\u0027t you already have a dependency on libaom, since you\u0027re including firstpass.h? Or are you planning on removing that?",
      "parentUuid": "f59cd492_3d662534",
      "range": {
        "startLine": 69,
        "startChar": 10,
        "endLine": 69,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52594b92_c7e1001f",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-02T18:12:04Z",
      "side": 1,
      "message": "Still not sure how we proceed about the dependency. It\u0027ll be easier for us to use whatever available in libaom, but you need to link libaom as well (not sure if do at the moment). Are you ok with linking libaom?",
      "parentUuid": "607d142c_198fea25",
      "range": {
        "startLine": 69,
        "startChar": 10,
        "endLine": 69,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51fdf1d0_e5f67b86",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 5250
      },
      "writtenOn": "2022-03-02T18:20:29Z",
      "side": 1,
      "message": "Yep, I have the same question here.\nAs we discussed before, will the dependency on libaom cause duplicated symbol on Google3?\nJerome, have you met this issue before?\nLike we create a rc library and libaom. There is some share naming.\nOne project links the rc library and libaom. This will cause duplicated symbol error.",
      "parentUuid": "607d142c_198fea25",
      "range": {
        "startLine": 69,
        "startChar": 10,
        "endLine": 69,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ad648ee_e93da6c7",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-02T18:25:22Z",
      "side": 1,
      "message": "I don\u0027t believe that linking with libaom would be a problem, because it\u0027s already linked into Ffmpeg. It doesn\u0027t matter how many paths through the dependency graph there are to libaom, there will only be one copy. \n\nBut I will check with DSPA to make sure they don\u0027t have an issue with taking libaom as a dependency.",
      "parentUuid": "52594b92_c7e1001f",
      "range": {
        "startLine": 69,
        "startChar": 10,
        "endLine": 69,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61e09353_46fd0b4f",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-02T18:32:37Z",
      "side": 1,
      "message": "Right there\u0027ll be no problem linking with libaom.",
      "parentUuid": "9ad648ee_e93da6c7",
      "range": {
        "startLine": 69,
        "startChar": 10,
        "endLine": 69,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f0514571_04e98e23",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-03T01:52:53Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "61e09353_46fd0b4f",
      "range": {
        "startLine": 69,
        "startChar": 10,
        "endLine": 69,
        "endChar": 14
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b37c3473_02cb0c09",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "I\u0027m not really sure I see the point of having three separate functions here. Why not just one function that takes the GopInfo and TplInfo and returns the GopEncodeInfo?",
      "range": {
        "startLine": 70,
        "startChar": 0,
        "endLine": 73,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2c35ccfc_f711a9cb",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "Yeah that could work. and we can use private functions to set different structures. I\u0027ll go ahead and implement that way if that sounds good to you.",
      "parentUuid": "b37c3473_02cb0c09",
      "range": {
        "startLine": 70,
        "startChar": 0,
        "endLine": 73,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c8cf7e8_7fa68b64",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-02T14:53:51Z",
      "side": 1,
      "message": "SGTM",
      "parentUuid": "2c35ccfc_f711a9cb",
      "range": {
        "startLine": 70,
        "startChar": 0,
        "endLine": 73,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c6d4270_2a368c16",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-02T18:12:04Z",
      "side": 1,
      "message": "I\u0027ll go ahead and do that.",
      "parentUuid": "4c8cf7e8_7fa68b64",
      "range": {
        "startLine": 70,
        "startChar": 0,
        "endLine": 73,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b7b02dc9_cc9c3fe6",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 73,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-03T01:52:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "4c6d4270_2a368c16",
      "range": {
        "startLine": 70,
        "startChar": 0,
        "endLine": 73,
        "endChar": 0
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e29824f1_7dc3802d",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 10298
      },
      "writtenOn": "2022-03-01T13:07:04Z",
      "side": 1,
      "message": "The class defined here should be a pure interface, i.e., and abstract base class with no implementation. These data members belong in the implementation class, not the interface.",
      "range": {
        "startLine": 74,
        "startChar": 0,
        "endLine": 78,
        "endChar": 33
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11942830_325a80f1",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-01T23:37:48Z",
      "side": 1,
      "message": "See my previous comment.",
      "parentUuid": "e29824f1_7dc3802d",
      "range": {
        "startLine": 74,
        "startChar": 0,
        "endLine": 78,
        "endChar": 33
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "02295764_492d8cd4",
        "filename": "av1/ratectrl_qmode.h",
        "patchSetId": 2
      },
      "lineNbr": 78,
      "author": {
        "id": 5960
      },
      "writtenOn": "2022-03-03T01:52:53Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "11942830_325a80f1",
      "range": {
        "startLine": 74,
        "startChar": 0,
        "endLine": 78,
        "endChar": 33
      },
      "revId": "3e05b642d8c952082c202d1d6d56ec3373e8547b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}