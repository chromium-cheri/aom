{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "49fc2097_68f7d075",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 11
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-30T16:59:53Z",
      "side": 1,
      "message": "Angie: I have some questions about the CL.",
      "revId": "cf14c3e101aca9fbaf0cb7deac989160ca118f1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ba85f4d7_19358ab3",
        "filename": "av1/encoder/intra_mode_search.c",
        "patchSetId": 11
      },
      "lineNbr": 558,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-30T16:59:53Z",
      "side": 1,
      "message": "In av1_merge_rd_stats(), you changed the assertion:\n\n  assert(rd_stats_dst-\u003erate !\u003d INT_MAX \u0026\u0026 rd_stats_src-\u003erate !\u003d INT_MAX);\n\nto an if statement:\n\n  if (rd_stats_dst-\u003erate \u003d\u003d INT_MAX || rd_stats_src-\u003erate \u003d\u003d INT_MAX) {\n    // The rd_stats is invalid. Keep the status.\n    return;\n  }\n\nBut because of line 544 and line 549, we will not call av1_merge_rd_stats() if cfl_rd_arr_u[ui].rate or cfl_rd_arr_v[vi].rate is INT_MAX. So it seems that we can keep the assertion in av1_merge_rd_stats().",
      "revId": "cf14c3e101aca9fbaf0cb7deac989160ca118f1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "73776fce_8c0ded5a",
        "filename": "av1/encoder/intra_mode_search.c",
        "patchSetId": 11
      },
      "lineNbr": 563,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-30T16:59:53Z",
      "side": 1,
      "message": "IMPORTANT: Can these two additions make rd_stats.rate exceed INT_MAX? If so, we need to do \"saturated\" addition here, similar to this addition in av1_merge_rd_stats():\n\n  rd_stats_dst-\u003erate \u003d (int)AOMMIN(\n      ((int64_t)rd_stats_dst-\u003erate + (int64_t)rd_stats_src-\u003erate), INT_MAX);",
      "revId": "cf14c3e101aca9fbaf0cb7deac989160ca118f1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bb1a3c52_0ad43bca",
        "filename": "av1/encoder/intra_mode_search.c",
        "patchSetId": 11
      },
      "lineNbr": 577,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-30T16:59:53Z",
      "side": 1,
      "message": "IMPORTANT: When this function fails, it may be more correct to leave the three output parameters unchanged. When this function fails, the caller will ignore *best_rd_stats, but I don\u0027t know if the caller will ignore *best_cfl_alpha_idx and *best_cfl_alpha_signs (which are mbmi-\u003ecfl_alpha_idx and mbmi-\u003ecfl_alpha_signs, respectively). Please check this.",
      "range": {
        "startLine": 575,
        "startChar": 1,
        "endLine": 577,
        "endChar": 30
      },
      "revId": "cf14c3e101aca9fbaf0cb7deac989160ca118f1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7797b244_988bd350",
        "filename": "av1/encoder/intra_mode_search.c",
        "patchSetId": 11
      },
      "lineNbr": 697,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-30T16:59:53Z",
      "side": 1,
      "message": "The original code adds cfl_alpha_rate here. Please confirm that we don\u0027t need to add the equivalent of cfl_alpha_rate in the new code.",
      "revId": "cf14c3e101aca9fbaf0cb7deac989160ca118f1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "85e4bfa0_98c45a92",
        "filename": "av1/encoder/rd.h",
        "patchSetId": 11
      },
      "lineNbr": 125,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-03-30T16:59:53Z",
      "side": 1,
      "message": "Did you mean keep the \"status\" or keep the \"stats\"?",
      "range": {
        "startLine": 125,
        "startChar": 32,
        "endLine": 125,
        "endChar": 47
      },
      "revId": "cf14c3e101aca9fbaf0cb7deac989160ca118f1f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}