{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ed0f0b77_c7f850c0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-05-17T15:53:20Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis patch modifies the reference picture management to be independent of stacks during FPMT. \nThe changes are cherry-picked from multiple commits on the research branch, the list of which is given in the commit message.\n\nPlease find the detailed borg result with CONFIG_FRAME_PARALLEL_ENCODE 1 (test) vs 0 (ref) below.\n\n         |            | Instruction Count |        BD-Rate Loss(%)       |\ncpu-used | Resolution |    Reduction(%)   | avg.psnr  ovr.psnr   ssim    |\n-------- | ---------- | ----------------- | --------  --------  -------- |\n   0     |  Average   |       0.691       | -0.0849   -0.0861   -0.0953  |\n   1     |  Average   |       0.320       | -0.1012   -0.1112   -0.1574  |\n   2     |  Average   |       0.767       | -0.0888   -0.0910   -0.1628  |\n   3     |  Average   |       0.190       | -0.1179   -0.1278   -0.1792  |\n   4     |  Average   |       0.246       | -0.1182   -0.1185   -0.1849  |\n   5     |  Average   |       0.346       | -0.1470   -0.1527   -0.1437  |\n   6     |  Average   |       0.148       | -0.1685   -0.1692   -0.2365  |\n   \nPlease find the CQP results with CONFIG_FRAME_PARALLEL_ENCODE 1 (test) vs 0 (ref) on a subset of hdres (10 contents) below.\n\n         |            | Instruction Count |        BD-Rate Loss(%)       |\ncpu-used | Resolution |    Reduction(%)   | avg.psnr  ovr.psnr   ssim    |\n-------- | ---------- | ----------------- | --------  --------  -------- |\n   0     |  Average   |       0.778       |  0.0269    0.0193    0.0201  |\n   1     |  Average   |       0.368       |  0.0033    0.0035   -0.0206  |\n   2     |  Average   |       0.687       | -0.0185   -0.0188   -0.0413  |\n   3     |  Average   |       0.572       | -0.2768   -0.2747   -0.2608  |\n   4     |  Average   |       0.446       | -0.1964   -0.1623   -0.2955  |\n   5     |  Average   |       0.198       | -0.1650   -0.1708   -0.1424  |\n   6     |  Average   |       0.115       | -0.1649   -0.1806   -0.1529  |\n   \nIn the commit message, BD rate impact column:\n[+] sign is for BD-Rate drop\n[-] sign is for BD-Rate improvement\nThe instruction count reduction specified has been measured using command:\n$ perf stat -e instructions:u ./aomenc â€¦\n\nBit-match is locally verified (for CONFIG_FRAME_PARALLEL_ENCODE \u003d 0) for speed 0 to 6 on a few test cases. We have internally tested this patch with CONFIG_FRAME_PARALLEL_ENCODE set as 1 for compliance, for a combination of various configuration values for --threads, --tile-rows, --tile-columns, --cpu-used, --end-usage, --row-mt, --resize-mode, --superres-mode\u003d, --sb-size, --bit-depth etc.\n\nPlease review this patch.\n\nRegards,\nRemya",
      "revId": "1948f12a5f9dfba26b07512a6f44044e5898837a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}