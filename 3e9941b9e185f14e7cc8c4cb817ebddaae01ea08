{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "657ec11d_5ab713e4",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 15298
      },
      "writtenOn": "2021-05-28T14:18:13Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis patch creates temp_avg_frame_qindex, which simulates the delayed avg_frame_qindex calculation in AV1_PRIMARY (under CONFIG_FRAME_PARALLEL_ENCODE macro). Since, all the same type previous frames\u0027 average qindex are used in deciding active_best_quality of the frame, in order to ensure that all the frames in a parallel encode set start with the same avg_frame_qindex, this patch simulates the combined end-of-frame avg_frame_qindex update at the last frame in a parallel encode set. This is a temporary CL, the appropriate implementation of this scenario will be taken care when the framework is up at Milestone-7. The changes are done only in AOM_Q path, also the changes are bit-exact in this rate control mode.\n\nThis change is tested with integer, undefined, address and thread sanitizer tests locally. Bit-match is locally verified (for CONFIG_FRAME_PARALLEL_ENCODE \u003d 0) for speed 2 to 6 on a few test cases. Please review this patch.\n\nThanks",
      "revId": "3e9941b9e185f14e7cc8c4cb817ebddaae01ea08",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e94455b5_6c8448f7",
        "filename": "av1/encoder/ratectrl.c",
        "patchSetId": 3
      },
      "lineNbr": 1190,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-05-28T20:29:57Z",
      "side": 1,
      "message": "Moving this part out like you did in other places sounds better?",
      "range": {
        "startLine": 1187,
        "startChar": 0,
        "endLine": 1190,
        "endChar": 41
      },
      "revId": "3e9941b9e185f14e7cc8c4cb817ebddaae01ea08",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d46d9a63_45603945",
        "filename": "av1/encoder/ratectrl.c",
        "patchSetId": 3
      },
      "lineNbr": 1190,
      "author": {
        "id": 15298
      },
      "writtenOn": "2021-05-31T05:18:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "e94455b5_6c8448f7",
      "range": {
        "startLine": 1187,
        "startChar": 0,
        "endLine": 1190,
        "endChar": 41
      },
      "revId": "3e9941b9e185f14e7cc8c4cb817ebddaae01ea08",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}