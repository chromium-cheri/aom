{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "ab7e7ee0_359d2e41",
        "filename": "aom_dsp/prob.h",
        "patchSetId": 7
      },
      "lineNbr": 652,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-08-01T19:25:04Z",
      "side": 1,
      "message": "Nit: symbol_count \u003d\u003e nsymbs",
      "revId": "18b4a9de99bf080f8fb5f055845f07f5eb61ce5c",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "11c30e22_2b9c064d",
        "filename": "aom_dsp/prob.h",
        "patchSetId": 7
      },
      "lineNbr": 670,
      "author": {
        "id": 9545
      },
      "writtenOn": "2022-08-01T19:25:04Z",
      "side": 1,
      "message": "I verified that this code is a copy of the UpdateCdf() function in libgav1 (in src/utils/entropy_decoder.cc). The original code was written by Google employees (James Zern, Vignesh Venkatasubramanian, and Wan-Teh Chang). Only obvious and necessary changes (such as changing variable names) were made in this copy, with two exceptions:\n\n1. The type of `count` is `uint16_t` in libgav1 and is `int` in this copy.\n\nWe can ignore this difference because a `uint16_t` value is automatically converted to `int` in expressions.\n\n2. This line would be written as\n```\n    cdf[nsymbs] +\u003d (aom_cdf_prob)(count \u003c 32);\n```\nin a direct copy of the libgav1 code.\n\nI found the following line in the dav1d_msac_decode_symbol_adapt_c() function in dav1d (src/msac.c):\n```\n        cdf[n_symbols] \u003d count + (count \u003c 32);\n```\n\nSo I suggest changing this line to\n```\n    cdf[nsymbs] +\u003d (count \u003c 32);\n```\nor\n```\n    cdf[nsymbs] +\u003d (aom_cdf_prob)(count \u003c 32);\n```\nto eliminate any appearance of copying dav1d code in this CL. You can then change this line to the current form (if it\u0027s faster or clearer) in a separate CL.",
      "revId": "18b4a9de99bf080f8fb5f055845f07f5eb61ce5c",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}