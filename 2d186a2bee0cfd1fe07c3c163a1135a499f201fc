{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "ff36b4ef_be5905ed",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-04-01T13:26:27Z",
      "side": 1,
      "message": "Fyodor: Thanks for the patch!",
      "revId": "2d186a2bee0cfd1fe07c3c163a1135a499f201fc",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d7aeb3d7_7541b4c1",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 2
      },
      "lineNbr": 385,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-04-01T13:26:27Z",
      "side": 1,
      "message": "Nit: I found only one WebRTC wrapper (webrtc::LibaomAv1Encoder), so this should be singular?\n\n  ..., the WebRTC wrapper requests ...",
      "range": {
        "startLine": 385,
        "startChar": 46,
        "endLine": 385,
        "endChar": 54
      },
      "revId": "2d186a2bee0cfd1fe07c3c163a1135a499f201fc",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "838bb0b3_f1d0bb4d",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 2
      },
      "lineNbr": 385,
      "author": {
        "id": 10704
      },
      "writtenOn": "2021-04-01T16:23:07Z",
      "side": 1,
      "message": "What I meant is that this webRTC wrapper exists in multiple places - webrtc/stable, webrtc/internal, chromium, etc.",
      "parentUuid": "d7aeb3d7_7541b4c1",
      "range": {
        "startLine": 385,
        "startChar": 46,
        "endLine": 385,
        "endChar": 54
      },
      "revId": "2d186a2bee0cfd1fe07c3c163a1135a499f201fc",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8938fd29_d233b5e8",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 2
      },
      "lineNbr": 387,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-04-01T15:23:43Z",
      "side": 1,
      "message": "Fyodor: I just realized that we don\u0027t need to change this RANGE_CHECK:\n\n  RANGE_CHECK(cfg, g_usage, AOM_USAGE_REALTIME, AOM_USAGE_REALTIME);\n\nThe reason is that webrtc::LibaomAv1Encoder changes its cfg-\u003eg_usage to 1 (\u003d AOM_USAGE_REALTIME) before calling aom_codec_enc_init():\n\n  // Initialize encoder configuration structure with default values\n  aom_codec_err_t ret \u003d\n      aom_codec_enc_config_default(aom_codec_av1_cx(), \u0026cfg_, 0);\n  ...\n\n  // Overwrite default config with input encoder settings \u0026 RTC-relevant values.\n  ...\n  cfg_.g_usage \u003d aux_params_.usage_profile;  \u003c\u003d\u003d THIS DEFAULTS TO 1\n\n  ...\n\n  // Initialize an encoder instance.\n  ret \u003d aom_codec_enc_init(\u0026ctx_, aom_codec_av1_cx(), \u0026cfg_, flags);\n\nSo we can revert this change, and move the TODO comment to line 3369.",
      "revId": "2d186a2bee0cfd1fe07c3c163a1135a499f201fc",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f03df407_e375d866",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 2
      },
      "lineNbr": 387,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-04-01T15:30:03Z",
      "side": 1,
      "message": "Fyodor: Please ignore my suggestion. I found this code in webrtc::LibaomAv1Encoder:\n\n  if (settings_proto.has_usage_profile()) {\n    switch (settings_proto.usage_profile()) {\n      case av1::EncoderSettings::GOOD_QUALITY:\n        aux_params.usage_profile \u003d 0;\n        break;\n      case av1::EncoderSettings::REALTIME:\n        aux_params.usage_profile \u003d 1;\n        break;\n      default:\n        // No override.\n        break;\n    }\n  }",
      "parentUuid": "8938fd29_d233b5e8",
      "revId": "2d186a2bee0cfd1fe07c3c163a1135a499f201fc",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "57d896dd_ddd74451",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 2
      },
      "lineNbr": 3609,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-04-01T13:26:27Z",
      "side": 1,
      "message": "Optional: Ideally we should use\n\n    NELEMENTS(encoder_usage_cfg),  // cfg_count\n\nhere. But I am not sure if we can use the NELEMENTS macro here.",
      "revId": "2d186a2bee0cfd1fe07c3c163a1135a499f201fc",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8d3cd5a5_0ca75c37",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 2
      },
      "lineNbr": 3609,
      "author": {
        "id": 10704
      },
      "writtenOn": "2021-04-01T16:23:07Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "57d896dd_ddd74451",
      "revId": "2d186a2bee0cfd1fe07c3c163a1135a499f201fc",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}