{
  "comments": [
    {
      "key": {
        "uuid": "a1e3fec3_a7edc3a6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 8893
      },
      "writtenOn": "2020-09-22T15:55:19Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nWe added a speed feature to prune NEARMV and NEAR_NEARMV modes based on q-index and reference frames of the neighboring blocks. \n\nWe observed that NEARMV and NEAR_NEARMV modes help in saving bits which can be of lesser importance at high bitrates. Hence, these modes are pruned based on q-index and the reference frame information of the neighboring blocks. For lower q indices modes are pruned when the reference frames of either above/left block does not match with the current block. For q indices in the mid range, NEARMV and NEAR_NEARMV modes are pruned when the reference frames of both above and left blocks do not match with the current block. For higher q indices these modes are not pruned. \n\nThis speed feature is enabled for speed \u003d 6.\n\n                      Instruction Count       BD-Rate Loss(%)\ncpu-used  Resolution     Reduction %     avg.psnr  ovr.psnr  ssim\n   6        LOW RES        2.778          0.3198    0.3248   0.3044\n   6        MID RES        1.410          0.2338    0.2259   0.1178\n   6         HD RES        1.977          0.3267    0.3306   0.3066\n   6        Average        2.241          0.2967    0.2976   0.2505\n\n\nIn the commit message, BD-Rate Loss column:\n[+] sign is for BD-Rate drop\n[-] sign is for BD-Rate improvement\nThe instruction count reduction specified has been measured using command:\n\n$ perf stat -e instructions:u ./aomenc ...\n\nPlease review the patch.\n\nThank you",
      "revId": "b9a524e9f9bd51b4178eebfb77e414015757619d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "48ce2349_9bbbd627",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2020-09-22T16:32:48Z",
      "side": 1,
      "message": "Good speedup.",
      "revId": "b9a524e9f9bd51b4178eebfb77e414015757619d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4f7e686d_c679fda5",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 2
      },
      "lineNbr": 4030,
      "author": {
        "id": 5185
      },
      "writtenOn": "2020-09-22T16:32:48Z",
      "side": 1,
      "message": "Maybe use AOMMIN/AOMMAX to ensure the correct value range?",
      "range": {
        "startLine": 4029,
        "startChar": 6,
        "endLine": 4030,
        "endChar": 51
      },
      "revId": "b9a524e9f9bd51b4178eebfb77e414015757619d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "35c346ef_fa0427ed",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 2
      },
      "lineNbr": 4030,
      "author": {
        "id": 8893
      },
      "writtenOn": "2020-09-23T07:06:25Z",
      "side": 1,
      "message": "We see that x-\u003eqindex is ensured to be in the range [0, QINDEX_RANGE - 1](av1_init_plane_quantizers() function ensures this). Thus, the variable \"num_ref_frame_pair_match_thresh\" is assured to be between [0,2]. We feel that using AOMMIN/AOMMAX to ensure the correct value range is not required. Please let us know your opinion.",
      "parentUuid": "4f7e686d_c679fda5",
      "range": {
        "startLine": 4029,
        "startChar": 6,
        "endLine": 4030,
        "endChar": 51
      },
      "revId": "b9a524e9f9bd51b4178eebfb77e414015757619d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6fdb434f_b82f8f02",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 2
      },
      "lineNbr": 4030,
      "author": {
        "id": 5185
      },
      "writtenOn": "2020-09-23T17:07:24Z",
      "side": 1,
      "message": "Yes, it is fine now. Just saw you added an assertion here.",
      "parentUuid": "35c346ef_fa0427ed",
      "range": {
        "startLine": 4029,
        "startChar": 6,
        "endLine": 4030,
        "endChar": 51
      },
      "revId": "b9a524e9f9bd51b4178eebfb77e414015757619d",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    }
  ]
}