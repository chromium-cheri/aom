{
  "comments": [
    {
      "key": {
        "uuid": "49ee2fc5_bfa728f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 14993
      },
      "writtenOn": "2020-09-24T13:29:09Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nIn this CL, we have optimized the memory usage in palette tile token buffer\nby replacing color_map_cdf pointer in TokenExtra with the index to color_ctx.\n\nPFB the memory reduction for this patch, measured using the command\n$command time -v ./aomenc ... for cpu-used 1, 60 frames:\n\n                    Avg Memory reduction\n                      Single   Multi\nResolution    Tile    thread   thread\n640x360       2x1      7.11%    6.65%\n832x480       2x1      8.99%    8.16%\n1280x720      2x2      9.96%    9.75%\n1920x1080     4x2     11.36%   10.72%\n\nPFB the memory reduction results for this patch, measured using the command\n$valgrind --tool\u003dmassif ./aomenc ... for cpu-used 1, 60 frames:\n\n                    Avg Memory reduction\n                      Single   Multi\nResolution    Tile    thread   thread\n640x360       2x1      6.73%    6.25%\n832x480       2x1      8.21%    7.79%\n1280x720      2x2      9.72%    9.02%\n1920x1080     4x2     10.86%    9.80%\n\nThis CL is bit-exact with no impact on encode time.\n\nAWCY Link (cpu-used 1, 60 frames, bit-exact)\nhttps://beta.arewecompressedyet.com/?job\u003d230920_ref_cpu1_master%402020-09-23T07%3A24%3A18.952Z\u0026job\u003d230920_mem_opt_cpu1_%402020-09-23T07%3A22%3A36.061Z\n\nPlease review.\n\nRegards,\nJayasanker.",
      "revId": "ece2957eb80ef08a55739542e0f16cfccf8c43ae",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a65368e6_c7a996dd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2020-09-24T16:12:15Z",
      "side": 1,
      "message": "Nice optimization! So this only applies while tile number \u003e 1?",
      "parentUuid": "49ee2fc5_bfa728f0",
      "revId": "ece2957eb80ef08a55739542e0f16cfccf8c43ae",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "59b19f8b_3fe76308",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 14993
      },
      "writtenOn": "2020-09-25T09:25:25Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis memory optimization is applicable for single tile config as well.\n\nRegards,\nJayasanker.",
      "parentUuid": "a65368e6_c7a996dd",
      "revId": "ece2957eb80ef08a55739542e0f16cfccf8c43ae",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "351df468_349643c6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2020-09-25T16:12:21Z",
      "side": 1,
      "message": "Good to know. Thanks.",
      "parentUuid": "59b19f8b_3fe76308",
      "revId": "ece2957eb80ef08a55739542e0f16cfccf8c43ae",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}