{
  "comments": [
    {
      "key": {
        "uuid": "0db56538_566bdde1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 8893
      },
      "writtenOn": "2020-09-02T18:24:51Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nWe were trying to increase the aggressiveness of the speed feature \u0027prune_inter_modes_based_on_tpl\u0027 for speed 6. While doing so, we made the following observations and submitted the current patch. \n\nThe speed feature \u0027prune_inter_modes_based_on_tpl\u0027 prunes inter modes making use of the inter costs obtained during tpl. This sf does not prune modes if the reference frame matches the reference frames of the neighboring blocks (match_found \u003d 1). However, when neighboring blocks are not available it was taken as match_found \u003d 0. In this patch, for blocks whose neighboring blocks (left or above) are not available we set match_found \u003d 1, thereby not pruning inter modes for such blocks.\n\nWe have made the speed feature more aggressive for cpu-used 6 in the dependent patch https://aomedia-review.googlesource.com/c/aom/+/118521\n\nPlease find the results below. Please note that this patch improves the BD-Rate with slight encode time reduction.\n\n                     Instruction Count       BD-Rate Loss(%)\ncpu-used  Resolution   Reduction(%)    avg.psnr  ovr.psnr    ssim\n   3       LOW RES        -0.179       -0.0031   -0.0090    0.0244\n   3       MID RES        -0.059       -0.0533   -0.0494   -0.0356\n   3        HD RES        -0.039       -0.0415   -0.0419   -0.1067\n   3       Average        -0.114       -0.0295   -0.0308   -0.0332\n\t\t\t\t\t\t\t\t\t   \n   4       LOW RES        -0.414       -0.0692   -0.0716   -0.1163\n   4       MID RES        -0.182       -0.1475   -0.1318   -0.1002\n   4        HD RES        -0.260       -0.0325   -0.0263    0.0372\n   4       Average        -0.318       -0.0809   -0.0754   -0.0648\n\t\t\t\t\t\t\t\t\t   \n   5       LOW RES        -0.455       -0.0598   -0.0665   -0.1256\n   5       MID RES        -0.313       -0.0375   -0.0280   -0.0219\n   5        HD RES        -0.186       -0.0646   -0.0654   -0.0914\n   5       Average        -0.352       -0.0548   -0.0549   -0.0848\n\t\t\t\t\t\t\t\t\t   \n   6       LOW RES        -0.606       -0.1298   -0.1270   -0.1203\n   6       MID RES        -0.453       -0.0790   -0.0934   -0.0544\n   6        HD RES        -0.321       -0.0873   -0.0830   -0.0858\n   6       Average        -0.496       -0.1020   -0.1037   -0.0905\n   \nIn the commit message, Quality Loss column:\n[+] sign is for BD-Rate drop\n[-] sign is for BD-Rate improvement\nThe instruction count reduction specified has been measured using command:\n$ perf stat -e instructions:u ./aomenc â€¦\n \nPlease review the patch.\nThank you.",
      "revId": "21a27dd83a9ef9e376afa223b66619fd1aa7521c",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}