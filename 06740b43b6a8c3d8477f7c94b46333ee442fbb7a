{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "e95bb749_99e3a710",
        "filename": "av1/encoder/ratectrl.c",
        "patchSetId": 5
      },
      "lineNbr": 2680,
      "author": {
        "id": 5190
      },
      "writtenOn": "2022-08-03T21:19:22Z",
      "side": 1,
      "message": "Should the condition be that slot 7 is not refreshed and not ever referenced (ref_idx set to 7)? If gld_fixed_slot is set to 0 above (we have always used 1), then gld_idx happens to be set to 7 and there would be a crash.",
      "revId": "06740b43b6a8c3d8477f7c94b46333ee442fbb7a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7cec409f_fc5f7f7e",
        "filename": "av1/encoder/ratectrl.c",
        "patchSetId": 5
      },
      "lineNbr": 2680,
      "author": {
        "id": 8893
      },
      "writtenOn": "2022-08-08T18:20:14Z",
      "side": 1,
      "message": "Changed the condition to enable this memory optimization whenever slot 7 is not refreshed (ref_idx set to 7) by last, last2, golden and altref frames (last3, bwd_ref and altref2 frame are not ever referenced and ref_idx is set to 7 for those). \n\nFor the case when gld_fixed_slot is set to 0, gld_idx happens to be set to 7 for the first 8 frames (0-7) only. Later on, gld_idx always takes values from 0 to 6. It is possible to enable this memory optimization for gld_fixed_slot\u003d0 case by setting gld_idx\u003d0 for the first 8 frames. We have verified that there would not be any BD-Rate impact with this change. However, as ref_idx is written into the bitstream (in uncompressed frame header) the bit-streams do not match.",
      "parentUuid": "e95bb749_99e3a710",
      "revId": "06740b43b6a8c3d8477f7c94b46333ee442fbb7a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "64717686_9d854065",
        "filename": "av1/encoder/ratectrl.c",
        "patchSetId": 5
      },
      "lineNbr": 2680,
      "author": {
        "id": 5190
      },
      "writtenOn": "2022-08-08T22:05:52Z",
      "side": 1,
      "message": "I\u0027m fine with the extra conditions added below. \n\nThe comment is still a little confusing to me, as I think it should be \"This assumes slot 7 is never used.\" Because even though we may never refresh it on delta frames (it will always be refreshed on key frame) we may want to use it as reference (assign ref_idx to it). In any case we can fix the comment if needed later.",
      "parentUuid": "7cec409f_fc5f7f7e",
      "revId": "06740b43b6a8c3d8477f7c94b46333ee442fbb7a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}