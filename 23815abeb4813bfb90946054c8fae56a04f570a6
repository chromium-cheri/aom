{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "29abdb5e_c0a5ff2b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 24
      },
      "lineNbr": 0,
      "author": {
        "id": 15298
      },
      "writtenOn": "2021-01-11T16:24:07Z",
      "side": 1,
      "message": "Debargha,\n\nThis patch fixes the BUG\u003daomedia:2918 and BUG\u003daomedia:2919. It fixes gf_interval and baseline_gf_interval appropriately. This also fixes the crash in non-LAP path when forward kf is enabled by introducing is_last_subgop(). This function checks if the subgop is the end of the clip and disables forward kf.\n\nWe have tested with undefined and address sanitizer for Large and non-large tests. We also tested borg runs with cpu0 and cpu3, for subgop\u003denh configuration and no-subgop path.\n\nThe quality gain in the result below is due to mobcal_720p50.y4m/Parkrun_720p50.y4m, where the first subgop contains only 2 frames. Here the gfu_boost is corrected properly with the change in baseline_gf_interval. These clips are also gaining in quality by 0.5dB-1.8dB. \nEvery other clip in the runs are bit exact with the parent commit.\n\nBorg results:\nVBR results, subgop\u003denh:\n cpu-used   Instruction count         BD-Rate Loss(%)\n               Reduction(%)     avg.psnr   ovr.psnr   ssim\n      0         -0.214          -0.0463   -0.0411    -0.0294              \n      3         -0.111          -0.0413   -0.0158    -0.0398      \n                                               \nVBR results, No-subgop:\n cpu-used   Instruction count         BD-Rate Loss(%)\n              Reduction(%)     avg.psnr   ovr.psnr     ssim\n    0          -0.112           -0.0468    -0.0413   -0.0311     \n    3          -0.133           -0.0383    -0.0117   -0.0435\n               \n\nPlease review.\nThanks",
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1f45fda2_3bb77df9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 24
      },
      "lineNbr": 0,
      "author": {
        "id": 5189
      },
      "writtenOn": "2021-01-11T16:40:18Z",
      "side": 1,
      "message": "Thanks for the fix.\n\nCan you please also provide q mode results? Thanks.",
      "parentUuid": "29abdb5e_c0a5ff2b",
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0e0d097e_d506adf8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 24
      },
      "lineNbr": 0,
      "author": {
        "id": 15298
      },
      "writtenOn": "2021-01-11T17:07:58Z",
      "side": 1,
      "message": "Thanks for your quick review. We will start the tests for q mode.\n\nThanks",
      "parentUuid": "1f45fda2_3bb77df9",
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7802f0a9_6b152e23",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 24
      },
      "lineNbr": 0,
      "author": {
        "id": 5290
      },
      "writtenOn": "2021-01-11T17:59:35Z",
      "side": 1,
      "message": "Some cosmetic / code quality suggestions below.\nOK to resolve these in a separate patch, given the urgency of the fix.",
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f42a7d5c_10142c8c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 24
      },
      "lineNbr": 0,
      "author": {
        "id": 5189
      },
      "writtenOn": "2021-01-11T18:01:06Z",
      "side": 1,
      "message": "Given the urgency, I will be okay with submitting the patch now and updating with the q mode results later when they are ready.",
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3e77838_fd47d3e7",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 24
      },
      "lineNbr": 1233,
      "author": {
        "id": 5290
      },
      "writtenOn": "2021-01-11T17:59:35Z",
      "side": 1,
      "message": "Some redundancy in the condition given the \"curr_frame_type \u003d\u003d KEY_FRAME\" is already true as per line#1231\nCan we simplify it?",
      "range": {
        "startLine": 1233,
        "startChar": 10,
        "endLine": 1233,
        "endChar": 67
      },
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d296b7dc_18bb6e39",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 24
      },
      "lineNbr": 1274,
      "author": {
        "id": 5290
      },
      "writtenOn": "2021-01-11T17:59:35Z",
      "side": 1,
      "message": "Please use single line comment format:\n// When there ....\n// gf_interval ....\n...",
      "range": {
        "startLine": 1262,
        "startChar": 0,
        "endLine": 1274,
        "endChar": 9
      },
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d4d55059_4b8035e9",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 24
      },
      "lineNbr": 1276,
      "author": {
        "id": 5290
      },
      "writtenOn": "2021-01-11T17:59:35Z",
      "side": 1,
      "message": "Some redundancy in the condition given the \"curr_frame_type \u003d\u003d KEY_FRAME\" is already true as per line#1275.\nCan we simplify it?",
      "range": {
        "startLine": 1276,
        "startChar": 0,
        "endLine": 1276,
        "endChar": 67
      },
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f373b12_316d54fb",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 24
      },
      "lineNbr": 1276,
      "author": {
        "id": 5290
      },
      "writtenOn": "2021-01-11T17:59:35Z",
      "side": 1,
      "message": "This whole condition is occuring for the 2nd time.\nCan we refactor?",
      "range": {
        "startLine": 1275,
        "startChar": 0,
        "endLine": 1276,
        "endChar": 68
      },
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d10ffcf7_4d6c00d5",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 24
      },
      "lineNbr": 1418,
      "author": {
        "id": 5290
      },
      "writtenOn": "2021-01-11T17:59:35Z",
      "side": 1,
      "message": "const",
      "range": {
        "startLine": 1418,
        "startChar": 2,
        "endLine": 1418,
        "endChar": 5
      },
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "66feffdc_62f0b912",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 24
      },
      "lineNbr": 1461,
      "author": {
        "id": 5290
      },
      "writtenOn": "2021-01-11T17:59:35Z",
      "side": 1,
      "message": "This condition is rather complicated now. Could you add a comment to explain the logic?",
      "range": {
        "startLine": 1461,
        "startChar": 0,
        "endLine": 1461,
        "endChar": 67
      },
      "revId": "23815abeb4813bfb90946054c8fae56a04f570a6",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}