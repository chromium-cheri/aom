{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "8a694d2c_4a479b76",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 6245
      },
      "writtenOn": "2022-05-19T18:12:36Z",
      "side": 1,
      "message": "Hi Wan-Teh, Frank,\n\nIn this CL, we refactored the code related to CfL mode evaluation when the speed feature cfl_search_range is set to 1. In the parent version of the CL, the best alpha and the relevant rd cost are computed for each chroma plane one after the other. However the computed rd costs are discarded if alpha parameters of both the chroma planes are zeroes as this is not a valid scenario.\n  \nIn this CL, we refactored the code to compute alpha parameters of both the planes first and the relevant rd cost computation is skipped if alpha parameters of both the chroma planes are zeroes, thus saving transform evaluation. The CL is applicable only for --allintra, speed\u003e\u003d6 and is bit-exact with the parent version. \n \nFor AVIF still-image encode with tune\u003dpsnr,\n\n        Encode Time  \nspeed    Reduction(%) \n  6        1.161\n  7        1.773\n  8        0.961\n  \nFor AVIF still-image encode with tune\u003dssim,\n\n         Encode Time  \nspeed    Reduction(%) \n  6        1.134\n  7        1.857\n  8        1.138\n\nFollowing are the instruction count reduction results when libaom –allintra frame encoding (50 frames) was tested for a borg setup. \n   \n       Instruction Count  \nspeed    Reduction(%) \n  6        1.334\n  7        1.544\n  8        1.294\n\nFor libaom AV1 video encode, bit-match is verified (w.r.t. parent commit) for \u0027GOOD\u0027 and \u0027RT\u0027 encoding modes for a few contents with different encoding configurations. It is verified that the CL is bit-exact for --allintra encode, speed\u003d4,5 with no speed impact (speed-up through the current CL is not applicable for these presets as cfl_search_range is not set to 1 at these speed levels).\n\nThe instruction count reduction specified has been measured using the command:\n$ perf stat -e instructions:u ./aomenc …\n\nPlease review the CL. \n\nRegards,\nRanjit\n",
      "revId": "b4ab536e9da85bbe231f06c562c7950ed8dacad3",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}