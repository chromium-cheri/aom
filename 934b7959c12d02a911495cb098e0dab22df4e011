{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "38bfbe49_ed7805f0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14062
      },
      "writtenOn": "2021-05-10T16:53:45Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis CL improves the multi-thread performance of pack bitstream module by using the absolute sum of final transform coefficients of tiles, instead of their area. The change helps to reduce the thread wastage time in cases when number of threads \u003c number of tiles.\n\nThe encode time impact for RT preset is measured with threads\u003d4, num-tile-cols\u003d4, num-tile-rows\u003d2, row-mt\u003d1 (averaged over 360p, 480p, 720p and 1080p)\n\n cpu-used  Resolution    Encode Time Reduction (%)\n    7           360p            0.680\n                480p            0.795\n                720p            0.650\n               1080p            0.745\n             Average            0.717\n             \n    8           360p            0.815\n                480p            1.055\n                720p            1.690\n               1080p            0.745\n             Average            1.076\n             \n    9           360p            0.965\n                480p            1.359\n                720p            1.171\n               1080p            0.913\n             Average            1.102\n\n Note: For speed profiling dv cost update frequency is set to COST_UPD_OFF (--dv-cost-upd-freq\u003d3).\n\nThis CL is verified to be bit-exact for –good and –rt presets. The encode time impact for --good preset is negligible.\n\nKindly review the patch.\n\nRegards,\nVishesh",
      "revId": "934b7959c12d02a911495cb098e0dab22df4e011",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f24e7ed3_230ffc34",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-05-10T19:03:34Z",
      "side": 1,
      "message": "Looks good. Thanks for the further study and the speedup!",
      "parentUuid": "38bfbe49_ed7805f0",
      "revId": "934b7959c12d02a911495cb098e0dab22df4e011",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "494c6a2f_e92e7942",
        "filename": "av1/encoder/encodetxb.c",
        "patchSetId": 1
      },
      "lineNbr": 627,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-05-10T19:03:34Z",
      "side": 1,
      "message": "So you have to accumulate it here - there is nothing similar available we can use directly?",
      "range": {
        "startLine": 627,
        "startChar": 6,
        "endLine": 627,
        "endChar": 23
      },
      "revId": "934b7959c12d02a911495cb098e0dab22df4e011",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b2c473b2_ee47297f",
        "filename": "av1/encoder/encodetxb.c",
        "patchSetId": 1
      },
      "lineNbr": 627,
      "author": {
        "id": 14062
      },
      "writtenOn": "2021-05-18T19:44:14Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThere isn\u0027t any similar metric available. Hence we accumulated the absolute level sum here.\n\nRegards,\nVishesh",
      "parentUuid": "494c6a2f_e92e7942",
      "range": {
        "startLine": 627,
        "startChar": 6,
        "endLine": 627,
        "endChar": 23
      },
      "revId": "934b7959c12d02a911495cb098e0dab22df4e011",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}