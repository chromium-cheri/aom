{
  "comments": [
    {
      "key": {
        "uuid": "fa1a38b3_5a1eb75a",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 3
      },
      "lineNbr": 748,
      "author": {
        "id": 5035
      },
      "writtenOn": "2016-07-12T23:37:11Z",
      "side": 1,
      "message": "Though it does not cause any crashes or change the final results, I meet the case that this \"mbmi-\u003etx_size \u003d best_tx\" has the TX_SIZES (4), which I think is unstable intermediate states anyway.\nThis seems happens when txfm_rd_in_plane() early exits with returning distortion \u003d INT64_MAX. Then, \u0027rd\u0027 is not updated, so best_tx cannot be updated as well.\n\nI used following options.\n-o test_debug.ivf --ivf -t 1 -v   /home/yushin/sequences/subset1-y4m/White_Dune_-_Mui_Ne.y4m --end-usage\u003dq --cq-level\u003d20 --good --cpu-used\u003d0 --tile-columns\u003d0 --tile-rows\u003d0 -p 1",
      "range": {
        "startLine": 748,
        "startChar": 25,
        "endLine": 748,
        "endChar": 26
      },
      "revId": "daf841b4a10ece1b6831300d79f271d00f9d027b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa1a38b3_dabf470c",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 3
      },
      "lineNbr": 748,
      "author": {
        "id": 5035
      },
      "writtenOn": "2016-07-12T23:46:26Z",
      "side": 1,
      "message": "In fact, whenever new rd_cost calculated by block_rd_txfm() is worse than ref_best_rd, then \"if (r \u003d\u003d INT_MAX) continue;\" is triggered, which gives no chace to goto if (rd \u003c ... best_rd) block.",
      "parentUuid": "fa1a38b3_5a1eb75a",
      "range": {
        "startLine": 748,
        "startChar": 25,
        "endLine": 748,
        "endChar": 26
      },
      "revId": "daf841b4a10ece1b6831300d79f271d00f9d027b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa1a38b3_cc3cc3b1",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 3
      },
      "lineNbr": 4024,
      "author": {
        "id": 5035
      },
      "writtenOn": "2016-07-11T22:42:59Z",
      "side": 1,
      "message": "Can you explaiin why this is required here?",
      "range": {
        "startLine": 4024,
        "startChar": 46,
        "endLine": 4024,
        "endChar": 48
      },
      "revId": "daf841b4a10ece1b6831300d79f271d00f9d027b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa1a38b3_8fd63d5d",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 3
      },
      "lineNbr": 4024,
      "author": {
        "id": 5022
      },
      "writtenOn": "2016-07-11T22:50:10Z",
      "side": 1,
      "message": "We need the reconstructed pixels for intra mode to compute the variance with respect to the original pixel block.\n\nThis will then be used to tune the overall RD cost value for this mode to improve SSIM.",
      "parentUuid": "fa1a38b3_cc3cc3b1",
      "range": {
        "startLine": 4024,
        "startChar": 46,
        "endLine": 4024,
        "endChar": 48
      },
      "revId": "daf841b4a10ece1b6831300d79f271d00f9d027b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa1a38b3_dab907da",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 3
      },
      "lineNbr": 4024,
      "author": {
        "id": 5035
      },
      "writtenOn": "2016-07-12T23:21:32Z",
      "side": 1,
      "message": "I see. So, you mean RD cost for current inter mode (in fact, one of 10 intra modes for inter block) is tuned by rd_variance_adjustment(). Basically, the added av1_encode_intra_block_plane() complement the removed txfm_rd_in_plane() in choose_tx_size_from_rd().\n\nIf so, what about inter mode? I mean, handle_inter_mode() also calls super_block_yrd() at the end then don\u0027t we need to call av1_build_inter_predictors_sb() right after inter() is called?",
      "parentUuid": "fa1a38b3_8fd63d5d",
      "range": {
        "startLine": 4024,
        "startChar": 46,
        "endLine": 4024,
        "endChar": 48
      },
      "revId": "daf841b4a10ece1b6831300d79f271d00f9d027b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fa1a38b3_7a9a932f",
        "filename": "av1/encoder/rdopt.c",
        "patchSetId": 3
      },
      "lineNbr": 4024,
      "author": {
        "id": 5022
      },
      "writtenOn": "2016-07-12T23:28:04Z",
      "side": 1,
      "message": "This might be a bit tricky. For the inter modes, we compute the variance of difference between prediction block from original block.\n\nTypically inter prediction tends to have more high frequency components than intra prediction modes.",
      "parentUuid": "fa1a38b3_dab907da",
      "range": {
        "startLine": 4024,
        "startChar": 46,
        "endLine": 4024,
        "endChar": 48
      },
      "revId": "daf841b4a10ece1b6831300d79f271d00f9d027b",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}