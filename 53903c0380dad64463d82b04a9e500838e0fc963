{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4adb839c_106bccda",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 5022
      },
      "writtenOn": "2020-10-15T05:39:19Z",
      "side": 1,
      "message": "Any idea why it causes significant performance loss on ugc360p/Animation_360-81ba86e7966f8ffd-54.17.y4m? There seems to be a consistent 10 - 20% loss in overall PSNR? Corner cases?",
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "69fcbb1e_7cac37f2",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 6585
      },
      "writtenOn": "2020-10-15T06:04:57Z",
      "side": 1,
      "message": "On this clip, some frames are very similar, according to the tpl stats, these frames receive very few bits, making the quality drop.\n\nThe drop is mainly due to these frames in a GOP.\nAs you can see, the overall psnr is much worse, avg psnr is higher.\n\nThat\u0027s also the reason I think we need to take coefficient ratio into account and allocate at least some bits to any frame, even when tpl stats show the frame is of little importance.",
      "parentUuid": "4adb839c_106bccda",
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "90cf43ef_4601fa31",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 5610
      },
      "writtenOn": "2020-10-15T16:58:14Z",
      "side": 1,
      "message": "Average psnr tends to be dominated by the best frames and less impacted by the worst. The reverse is true for overall psnr, You can make average psnr better by just making a few frames much better but a frame going from 50-60db or 60-100 does not actually mean much in perceptual terms. I tend to be a bit nervous of cases where there is a large fall in overall psnr even if average has improved. For example coding a blank frame almost perfectly can do that.",
      "parentUuid": "69fcbb1e_7cac37f2",
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "34c5e839_2ef29f0c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 6
      },
      "lineNbr": 0,
      "author": {
        "id": 6585
      },
      "writtenOn": "2020-10-15T18:38:50Z",
      "side": 1,
      "message": "Yes. This is a valid concern. I checked this clip, the drop is due to the misallocation of bits for some inter frames. As compared to the baseline, their PSNRs are down 0.2 db, from 40-ish db. The gain of avg psnr is from other frames, whose psnrs are about 50db.\nI think this issue can be solved if we take transform coefficient\u0027s ratio into account, which is similar to allocate at least some bits to internal frames.",
      "parentUuid": "90cf43ef_4601fa31",
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f3cdbd4d_ba70edff",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 6
      },
      "lineNbr": 2709,
      "author": {
        "id": 5022
      },
      "writtenOn": "2020-10-14T18:30:20Z",
      "side": 1,
      "message": "what is this for?",
      "range": {
        "startLine": 2709,
        "startChar": 8,
        "endLine": 2709,
        "endChar": 25
      },
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "225d6ade_7499fd75",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 6
      },
      "lineNbr": 2709,
      "author": {
        "id": 6585
      },
      "writtenOn": "2020-10-14T18:53:13Z",
      "side": 1,
      "message": "gfu_boost_forward: Boost factor calculated from the current ARF to the next ARF.\ngfu_boost_backward: Boost factor calculated from the previous ARF to the current ARF.\n\ngfu_boost \u003d gfu_boost_forward + gfu_boost_backward\n\nThis has been documented in ratectrl.h",
      "parentUuid": "f3cdbd4d_ba70edff",
      "range": {
        "startLine": 2709,
        "startChar": 8,
        "endLine": 2709,
        "endChar": 25
      },
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87ae8658_b5d8d6c1",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 6
      },
      "lineNbr": 2709,
      "author": {
        "id": 5022
      },
      "writtenOn": "2020-10-14T20:06:11Z",
      "side": 1,
      "message": "I don\u0027t see they are being used anywhere?",
      "parentUuid": "225d6ade_7499fd75",
      "range": {
        "startLine": 2709,
        "startChar": 8,
        "endLine": 2709,
        "endChar": 25
      },
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "638006bf_5d0b663a",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 6
      },
      "lineNbr": 2709,
      "author": {
        "id": 6585
      },
      "writtenOn": "2020-10-14T21:04:56Z",
      "side": 1,
      "message": "Right.\n\ngfu_boost_backward is used at line 4115.\ngfu_boost_forward is not used. I can remove it if necessary.",
      "parentUuid": "87ae8658_b5d8d6c1",
      "range": {
        "startLine": 2709,
        "startChar": 8,
        "endLine": 2709,
        "endChar": 25
      },
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f308dd6f_06f72866",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 6
      },
      "lineNbr": 2735,
      "author": {
        "id": 5022
      },
      "writtenOn": "2020-10-14T18:30:20Z",
      "side": 1,
      "message": "same here",
      "range": {
        "startLine": 2735,
        "startChar": 8,
        "endLine": 2735,
        "endChar": 26
      },
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0f5377e1_430d7e90",
        "filename": "av1/encoder/pass2_strategy.c",
        "patchSetId": 6
      },
      "lineNbr": 2735,
      "author": {
        "id": 6585
      },
      "writtenOn": "2020-10-14T18:53:13Z",
      "side": 1,
      "message": "Please see the above comments.",
      "parentUuid": "f308dd6f_06f72866",
      "range": {
        "startLine": 2735,
        "startChar": 8,
        "endLine": 2735,
        "endChar": 26
      },
      "revId": "53903c0380dad64463d82b04a9e500838e0fc963",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}