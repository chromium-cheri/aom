{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "69fce49d_bbea702f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 24958
      },
      "writtenOn": "2021-05-05T07:17:26Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis patch abstracts stats under CONFIG_INTERNAL_STATS to AV1_PRIMARY. The elements that are calculated at the end of encoding in compute_internal_stats are moved to ppi. A copy is kept in cpi for stats that are calculated inside encode cycle. These get refreshed at the beginning of a frame encode and accumulated to ppi after encode is finished.\n\nThe relevant initializations have also been moved to av1_create_primary_compressor. The print and memory destroy calls are moved to a separate function \"print_internal_stats()\". This gets called at the beginning of encoder_destroy because certain elements from cpi and oxcf are required for calculations.\n\nThis change is bit-exact and has been locally verified with bitstream match tests over a combination of various configuration values for --threads, --tile-rows, --tile-columns, --cpu-used, --end-usage,  --row-mt, etc. \n\nPlease review.",
      "revId": "4a4e7ff4933954459656d32f37866a1ed2892cf3",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "24f32df1_238ace57",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-05-05T19:28:31Z",
      "side": 1,
      "message": "Looks good. Thanks.",
      "parentUuid": "69fce49d_bbea702f",
      "revId": "4a4e7ff4933954459656d32f37866a1ed2892cf3",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}