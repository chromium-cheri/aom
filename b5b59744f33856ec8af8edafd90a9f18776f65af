{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9ba49e06_11f4503b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-12-10T18:28:30Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThis patch adds a configuration parameter AV1E_SET_FP_MT_UNIT_TEST which can be set via control calls from the fpmt unit test to select actual parallel encode (PARALLEL_ENCODE) or simulation of parallel encode (PARALLEL_SIMULATION_ENCODE) for the bit match test.\n\nThis patch also modifies the speed presets and tile configurations used in \u0027AVxFrameParallelEncodeHDResTest\u0027 and\n\u0027AVxFrameParallelEncodeLowResTest\u0027 and marks them as Large tests since considerable time is taken to complete these runs. A new test \u0027AVxFrameParallelEncodeLowResTest\u0027 with higher speed presets and single tile configuration is also added. Currently speed 1 is excluded from the tests as we have seen a mismatch. We shall fix the same and then update the tests to include speed 1.\n\nWe have tested this unit test with address, thread, undefined and integer sanitizers.\n\nPlease review.\n\nRegards,\nRemya",
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d146f24b_49fbae99",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-12-10T19:45:39Z",
      "side": 1,
      "message": "Thanks for making the unit test better. Looks good overall.",
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c0056b3c_e33159e3",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 3
      },
      "lineNbr": 417,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-12-10T19:45:39Z",
      "side": 1,
      "message": "Should be 0 by default. Only turn it on in unit test file.",
      "range": {
        "startLine": 417,
        "startChar": 2,
        "endLine": 417,
        "endChar": 3
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "622248dd_3353e608",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 3
      },
      "lineNbr": 417,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-12-13T15:28:13Z",
      "side": 1,
      "message": "Hi Yunqing,\n\nThe configuration parameter ‘fpmt-unit-test’ takes two values – 0 to enable simulation path and 1 to enable actual parallel encode. Setting it to 1 therefore indicates that actual parallel encode is set by default and not the simulation path. This is used only from the fpmt unit test. Whereas, the configuration parameter ‘fp-mt’ is by default turned OFF.",
      "parentUuid": "c0056b3c_e33159e3",
      "range": {
        "startLine": 417,
        "startChar": 2,
        "endLine": 417,
        "endChar": 3
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa80ecf8_7226327a",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 3
      },
      "lineNbr": 417,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-12-13T19:01:42Z",
      "side": 1,
      "message": "Since this is only for unit test, setting it to 1 would be questionable when others see this (then more explanations need to be given.) It is better to set it to 0 here. Anyway, you set it explicitly in the unit test.\n\nFurthermore, if you prefer \"setting it to 1 therefore indicates that actual parallel encode is set by default\", then you could switch the meaning of 0 and 1, so \"setting it to 0 therefore indicates that actual parallel encode is set by default\".",
      "parentUuid": "622248dd_3353e608",
      "range": {
        "startLine": 417,
        "startChar": 2,
        "endLine": 417,
        "endChar": 3
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "29bc3308_fcdcc821",
        "filename": "av1/av1_cx_iface.c",
        "patchSetId": 3
      },
      "lineNbr": 417,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-12-14T16:50:00Z",
      "side": 1,
      "message": "As suggested we have set it to 0 here as we are explicitly setting it as required in the unit test.",
      "parentUuid": "fa80ecf8_7226327a",
      "range": {
        "startLine": 417,
        "startChar": 2,
        "endLine": 417,
        "endChar": 3
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "74038ee8_b011101c",
        "filename": "test/frame_parallel_enc_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-12-10T19:45:39Z",
      "side": 1,
      "message": "With this change, we still need -DCONFIG_FPMT_TEST\u003d1 in the config, right?",
      "range": {
        "startLine": 62,
        "startChar": 4,
        "endLine": 62,
        "endChar": 79
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7150d8aa_19735d91",
        "filename": "test/frame_parallel_enc_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-12-13T15:28:13Z",
      "side": 1,
      "message": "Yes, the configuration parameter ‘AV1E_SET_FP_MT_UNIT_TEST’ is used only to switch between the simulation and actual parallel encode path for testing bit match. Since both the code for simulation and actual parallel encode that is used by the unit test are present under CONFIG_FPMT_TEST, this configuration macro is still required.",
      "parentUuid": "74038ee8_b011101c",
      "range": {
        "startLine": 62,
        "startChar": 4,
        "endLine": 62,
        "endChar": 79
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "aab1cbe7_e6043a0f",
        "filename": "test/frame_parallel_enc_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 62,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-12-13T19:01:42Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "7150d8aa_19735d91",
      "range": {
        "startLine": 62,
        "startChar": 4,
        "endLine": 62,
        "endChar": 79
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "919a923c_e7f062ad",
        "filename": "test/frame_parallel_enc_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 191,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-12-13T19:01:42Z",
      "side": 1,
      "message": "Since these are the only tests for nightly, can we test a multi-tile case instead? So tile-mt, row-mt, and fp-mt are all on and tested. Something like:\n::testing::Values(4, 5, 6), ::testing::Values(1),\n                           ::testing::Values(1));",
      "range": {
        "startLine": 190,
        "startChar": 27,
        "endLine": 191,
        "endChar": 49
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e5031e92_336d622c",
        "filename": "test/frame_parallel_enc_test.cc",
        "patchSetId": 3
      },
      "lineNbr": 191,
      "author": {
        "id": 9616
      },
      "writtenOn": "2021-12-14T16:50:00Z",
      "side": 1,
      "message": "Have modified the nightly test to include multi-tile configuration. Added 1x2 tile configuration so that the test clip gets tested for row-mt as well, along with tile-mt and fp-mt as you have suggested.",
      "parentUuid": "919a923c_e7f062ad",
      "range": {
        "startLine": 190,
        "startChar": 27,
        "endLine": 191,
        "endChar": 49
      },
      "revId": "b5b59744f33856ec8af8edafd90a9f18776f65af",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}