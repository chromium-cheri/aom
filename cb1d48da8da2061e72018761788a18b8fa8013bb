{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f0a6b432_166986cd",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-02-09T01:09:37Z",
      "side": 1,
      "message": "PTAL. Thanks!",
      "revId": "cb1d48da8da2061e72018761788a18b8fa8013bb",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e9c12489_33efb6db",
        "filename": "CMakeLists.txt",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 5020
      },
      "writtenOn": "2021-02-09T01:26:30Z",
      "side": 1,
      "message": "this is incorrect, the revision should change, though you might want to keep a gap for local patches to v2.0.1:\n\nhttps://www.gnu.org/software/libtool/manual/libtool.html#Updating-version-info\n3. If the library source code has changed at all since the last update, then increment revision (‘c:r:a’ becomes ‘c:r+1:a’).",
      "revId": "cb1d48da8da2061e72018761788a18b8fa8013bb",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "93b32a84_5c7df82d",
        "filename": "CMakeLists.txt",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-02-09T02:28:05Z",
      "side": 1,
      "message": "I am afraid that I don\u0027t understand libtool\u0027s versioning system. Please suggest a value and I will change it to that value. Thanks!",
      "parentUuid": "e9c12489_33efb6db",
      "revId": "cb1d48da8da2061e72018761788a18b8fa8013bb",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "073db0ae_b1e0c612",
        "filename": "CMakeLists.txt",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 5020
      },
      "writtenOn": "2021-02-09T03:08:17Z",
      "side": 1,
      "message": "\u003e I am afraid that I don\u0027t understand libtool\u0027s versioning system. Please suggest a value and I will change it to that value. Thanks!\n\nHere\u0027s what I did:\n\nhttps://aomedia.googlesource.com/aom/+log/v2.0.0..v2.0.1\nhttps://aomedia.googlesource.com/aom/+log/v2.0.1..refs/heads/applejack\n\n1. Start with version information of ‘0:0:0’ for each libtool library.\n2. Update the version information only immediately before a public release of your software. More frequent updates are unnecessary, and only guarantee that the current interface number gets larger faster.\nN/A\n\n3. If the library source code has changed at all since the last update, then increment revision (‘c:r:a’ becomes ‘c:r+1:a’).\n\nv2.0.1 should have been 2.(0 + 1).0 at this stage; to allow potential patches\nto that tag we can make this 2.2.0.\n\n4. If any interfaces have been added, removed, or changed since the last update, increment current, and set revision to 0.\n\nNo changes to the API or ABI; leave current as is.\n\n5. If any interfaces have been added since the last public release, then increment age.\n\nNo additions to the API; leave age as is.\n\n6. If any interfaces have been removed or changed since the last public release, then set age to 0.\n\nNo other changes to the API; leave age as is.",
      "parentUuid": "93b32a84_5c7df82d",
      "revId": "cb1d48da8da2061e72018761788a18b8fa8013bb",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d4db2346_23e5cd2a",
        "filename": "CMakeLists.txt",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-02-09T20:00:20Z",
      "side": 1,
      "message": "Thanks for the reply!\n \n\u003e 3. If the library source code has changed at all since the last update, then increment revision (‘c:r:a’ becomes ‘c:r+1:a’).\n\u003e \n\u003e v2.0.1 should have been 2.(0 + 1).0 at this stage; to allow potential patches\n\u003e to that tag we can make this 2.2.0.\n\nI assume you suggested setting ‘c:r:a’ to ‘2:2:0’. I passed -version-info 2:2:0 to libtool, and it produced an output file with \"2.0.2\" in the file name.\n\nThe reason I did this experiment is that libtool\u0027s documentation does not say it puts \"c.r.a\" in the shared library file name, and I found a webpage that says \"libtool will perform its magic to transform this version info to a shared library filename\":\n\n  https://dcreager.net/shared-library-versions/\n\nIt links to the following libtool source code:\n\n        linux) # correct to gnu/linux during the next big refactor\n          func_arith $current - $age\n          major\u003d.$func_arith_result\n          versuffix\u003d$major.$age.$revision\n          ;;\n\nwhich confirms that a ‘c:r:a’ of ‘2:2:0’ results in versuffix\u003d2.0.2.\n\nHere is the transcript of my experiment:\n\n$ libtool --version\nlibtool (GNU libtool) 2.4.6\nWritten by Gordon Matzigkeit, 1996\n\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n$ ls -la\ntotal 128\ndrwxr-x---  2 wtc xxx   4096 Feb  9 11:38 .\ndrwxr-xr-x 16 wtc xxx 118784 Feb  9 11:30 ..\n-rw-r-----  1 wtc xxx     70 Feb  9 11:30 hello.c\n$ cat hello.c \n#include \u003cstdio.h\u003e\n\nvoid Hello(void) {\n  printf(\"Hello, world!\\n\");\n}\n$ libtool compile gcc -c hello.c\nlibtool: compile:  gcc -c hello.c  -fPIC -DPIC -o .libs/hello.o\nlibtool: compile:  gcc -c hello.c -o hello.o \u003e/dev/null 2\u003e\u00261\n$ ls -la\ntotal 140\ndrwxr-x---  3 wtc xxx   4096 Feb  9 11:39 .\ndrwxr-xr-x 16 wtc xxx 118784 Feb  9 11:30 ..\n-rw-r-----  1 wtc xxx     70 Feb  9 11:30 hello.c\n-rw-r-----  1 wtc xxx    283 Feb  9 11:39 hello.lo\n-rw-r-----  1 wtc xxx   1544 Feb  9 11:39 hello.o\ndrwxr-x---  2 wtc xxx   4096 Feb  9 11:39 .libs\n$ ls -la .libs\ntotal 12\ndrwxr-x--- 2 wtc xxx 4096 Feb  9 11:39 .\ndrwxr-x--- 3 wtc xxx 4096 Feb  9 11:39 ..\n-rw-r----- 1 wtc xxx 1544 Feb  9 11:39 hello.o\n$ libtool --mode\u003dlink gcc -version-info 2:2:0 hello.lo -o libhello.la -rpath /usr/local/lib\nlibtool: link: gcc -shared  -fPIC -DPIC  .libs/hello.o      -Wl,-soname -Wl,libhello.so.2 -o .libs/libhello.so.2.0.2\nlibtool: link: (cd \".libs\" \u0026\u0026 rm -f \"libhello.so.2\" \u0026\u0026 ln -s \"libhello.so.2.0.2\" \"libhello.so.2\")\nlibtool: link: (cd \".libs\" \u0026\u0026 rm -f \"libhello.so\" \u0026\u0026 ln -s \"libhello.so.2.0.2\" \"libhello.so\")\nlibtool: link: ar cr .libs/libhello.a  hello.o\nlibtool: link: ranlib .libs/libhello.a\nlibtool: link: ( cd \".libs\" \u0026\u0026 rm -f \"libhello.la\" \u0026\u0026 ln -s \"../libhello.la\" \"libhello.la\" )\n$ ls -la\ntotal 144\ndrwxr-x---  3 wtc xxx   4096 Feb  9 11:39 .\ndrwxr-xr-x 16 wtc xxx 118784 Feb  9 11:30 ..\n-rw-r-----  1 wtc xxx     70 Feb  9 11:30 hello.c\n-rw-r-----  1 wtc xxx    283 Feb  9 11:39 hello.lo\n-rw-r-----  1 wtc xxx   1544 Feb  9 11:39 hello.o\n-rw-r-----  1 wtc xxx    938 Feb  9 11:39 libhello.la\ndrwxr-x---  2 wtc xxx   4096 Feb  9 11:39 .libs\n$ ls -la .libs\ntotal 36\ndrwxr-x--- 2 wtc xxx  4096 Feb  9 11:39 .\ndrwxr-x--- 3 wtc xxx  4096 Feb  9 11:39 ..\n-rw-r----- 1 wtc xxx  1544 Feb  9 11:39 hello.o\n-rw-r----- 1 wtc xxx  1686 Feb  9 11:39 libhello.a\nlrwxrwxrwx 1 wtc xxx    14 Feb  9 11:39 libhello.la -\u003e ../libhello.la\n-rw-r----- 1 wtc xxx   939 Feb  9 11:39 libhello.lai\nlrwxrwxrwx 1 wtc xxx    17 Feb  9 11:39 libhello.so -\u003e libhello.so.2.0.2\nlrwxrwxrwx 1 wtc xxx    17 Feb  9 11:39 libhello.so.2 -\u003e libhello.so.2.0.2\n-rwxr-x--- 1 wtc xxx 15984 Feb  9 11:39 libhello.so.2.0.2",
      "parentUuid": "073db0ae_b1e0c612",
      "revId": "cb1d48da8da2061e72018761788a18b8fa8013bb",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11c08fa7_ff0d36c4",
        "filename": "CMakeLists.txt",
        "patchSetId": 2
      },
      "lineNbr": 38,
      "author": {
        "id": 5020
      },
      "writtenOn": "2021-02-09T20:50:07Z",
      "side": 1,
      "message": "\u003e Thanks for the reply!\n\u003e  \n\u003e \u003e 3. If the library source code has changed at all since the last update, then increment revision (‘c:r:a’ becomes ‘c:r+1:a’).\n\u003e \u003e \n\u003e \u003e v2.0.1 should have been 2.(0 + 1).0 at this stage; to allow potential patches\n\u003e \u003e to that tag we can make this 2.2.0.\n\u003e \n\u003e I assume you suggested setting ‘c:r:a’ to ‘2:2:0’. I passed -version-info 2:2:0 to libtool, and it produced an output file with \"2.0.2\" in the file name.\n\u003e \n\nyes I think you\u0027re right, I forgot we weren\u0027t forming things for libtool here. The comment then is a bit misleading. It seems we should note the order if we\u0027re linking the libtool docs. The origin of this is from webp where we pass -version-info and the values are reordered.",
      "parentUuid": "d4db2346_23e5cd2a",
      "revId": "cb1d48da8da2061e72018761788a18b8fa8013bb",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}