{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a431bc8f_ad61a2a1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 25661
      },
      "writtenOn": "2021-03-19T10:04:57Z",
      "side": 1,
      "message": "Hi Yunqing,\nWe have submitted a patch to dynamically allocate memory to src_diff, seg_mask and winner_mode_stats buffers in the MACROBLOCK structure. This patch reduces the overhead that takes place during copy of MACROBLOCK structure while preparing workers in the multithread path.\n\nWe are planning to abstract all malloc code related to MACROBLOCK structure into a function. Once this patch is merged, we shall submit a patch.\n\nThe patch is verified to be bit-exact for single-thread and multi-thread runs for few contents. Also, verified the code changes with unit tests (Large and non Large).\nThe encode time reduction for RT preset with threads\u003d4, num-tile-cols\u003d4, row-mt\u003d1 (averaged over 360p, 480p, 720p, 1080p) is as below. Decode time change is negligible for this patch.\n\n            Encode time\ncpu-used    Reduction (%)\n   5           1.075\n   6           0.860   \n   7           1.596\n   8           2.022\n   9           2.106\nPlease review the patch.\nThank you.",
      "revId": "55069f0fcab7b5a47f71aba0ea350d16cd852818",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}