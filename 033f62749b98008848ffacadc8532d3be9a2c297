{
  "comments": [
    {
      "key": {
        "uuid": "d97d69e9_929af210",
        "filename": "aom_dsp/aom_dsp_rtcd_defs.pl",
        "patchSetId": 1
      },
      "lineNbr": 926,
      "author": {
        "id": 5185
      },
      "writtenOn": "2018-09-28T16:33:06Z",
      "side": 1,
      "message": "The above may not be needed since we already have:\n\n aom_highbd_upsampled_pred(xd, cm, mi_row, mi_col, mv, comp_pred8, width,\n                            height, subpel_x_q3, subpel_y_q3, ref8, ref_stride,\n                            bd, subpel_search);\n aom_highbd_comp_mask_pred(comp_pred8, pred8, width, height, comp_pred8, width,\n                            mask, mask_stride, invert_mask);\n\nI think only SIMD functions should be here. Looks like LBD functions are done this way, which isn\u0027t really necessary.",
      "range": {
        "startLine": 919,
        "startChar": 1,
        "endLine": 926,
        "endChar": 0
      },
      "revId": "033f62749b98008848ffacadc8532d3be9a2c297",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ca328cd6_e3072156",
        "filename": "aom_dsp/aom_dsp_rtcd_defs.pl",
        "patchSetId": 1
      },
      "lineNbr": 926,
      "author": {
        "id": 9616
      },
      "writtenOn": "2018-10-03T13:31:42Z",
      "side": 1,
      "message": "As there is only sse2 variant of \u0027aom_highbd_upsampled_pred\u0027, aom_dsp_rtcd.h will have the function #defined to sse2, i.e.,\n#define aom_highbd_upsampled_pred aom_highbd_upsampled_pred_sse2\n\nThus removing the function pointer for \u0027aom_highbd_comp_mask_upsampled_pred\u0027 would call \u0027aom_highbd_upsampled_pred_sse2\u0027 function for both ref(c code) and test(simd) cases.\n\nPlease let us know if you have any other approach.",
      "parentUuid": "d97d69e9_929af210",
      "range": {
        "startLine": 919,
        "startChar": 1,
        "endLine": 926,
        "endChar": 0
      },
      "revId": "033f62749b98008848ffacadc8532d3be9a2c297",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8a411949_864a0c1d",
        "filename": "aom_dsp/aom_dsp_rtcd_defs.pl",
        "patchSetId": 1
      },
      "lineNbr": 926,
      "author": {
        "id": 5185
      },
      "writtenOn": "2018-10-03T16:05:31Z",
      "side": 1,
      "message": "In aom_dsp_rtcd_defs.pl, we have\nspecialize qw/aom_highbd_upsampled_pred sse2/;\nThat means there are c and sse2 versions of aom_highbd_upsampled_pred. Run-time detection decides which version to use.\nYou see \"#define aom_highbd_upsampled_pred aom_highbd_upsampled_pred_sse2\", which means your allow to use sse2 optimization. If you config to use c only, you should see it uses c version.\nThus, there should be no issue for aom_highbd_comp_mask_upsampled_pred.",
      "parentUuid": "ca328cd6_e3072156",
      "range": {
        "startLine": 919,
        "startChar": 1,
        "endLine": 926,
        "endChar": 0
      },
      "revId": "033f62749b98008848ffacadc8532d3be9a2c297",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7e966e2f_3b1bcc5d",
        "filename": "aom_dsp/aom_dsp_rtcd_defs.pl",
        "patchSetId": 1
      },
      "lineNbr": 926,
      "author": {
        "id": 8893
      },
      "writtenOn": "2018-10-03T17:11:22Z",
      "side": 1,
      "message": "We agree that adding \u0027aom_highbd_comp_mask_upsampled_pred\u0027 here is unnecessary when running the encoder. However, in the unit tests, C vs SIMD comparison happens in the function AV1HighbdCompMaskUpVarianceTest::RunCheckOutput. Because aom_highbd_upsampled_pred is defined as aom_highbd_upsampled_pred_sse2, the RunCheckOutput actually compares SSE2 implementation with SSE2 implementation (instead of C implementation) which is incorrrect. Thus, we feel the above change is required.",
      "parentUuid": "8a411949_864a0c1d",
      "range": {
        "startLine": 919,
        "startChar": 1,
        "endLine": 926,
        "endChar": 0
      },
      "revId": "033f62749b98008848ffacadc8532d3be9a2c297",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ba9dd4f6_0c096130",
        "filename": "test/comp_avg_pred_test.h",
        "patchSetId": 1
      },
      "lineNbr": 454,
      "author": {
        "id": 5185
      },
      "writtenOn": "2018-09-28T16:33:06Z",
      "side": 1,
      "message": "Thanks for modifying the unit tests. Later we also need to add USE_2_TAPS here.",
      "range": {
        "startLine": 454,
        "startChar": 25,
        "endLine": 454,
        "endChar": 35
      },
      "revId": "033f62749b98008848ffacadc8532d3be9a2c297",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1fb6c4da_81ac2aa0",
        "filename": "test/comp_avg_pred_test.h",
        "patchSetId": 1
      },
      "lineNbr": 454,
      "author": {
        "id": 9616
      },
      "writtenOn": "2018-10-03T13:31:42Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "ba9dd4f6_0c096130",
      "range": {
        "startLine": 454,
        "startChar": 25,
        "endLine": 454,
        "endChar": 35
      },
      "revId": "033f62749b98008848ffacadc8532d3be9a2c297",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}