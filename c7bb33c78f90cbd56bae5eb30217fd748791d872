{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "276c45ed_9d29f6f8",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 2
      },
      "lineNbr": 3672,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-09T17:15:23Z",
      "side": 0,
      "message": "As mentioned, this is removed since the updating is already done at the block level. Just want to double check if this is true for both rd path and non-rd path. It would be nice if you could point out where this happens at block level.",
      "range": {
        "startLine": 3672,
        "startChar": 6,
        "endLine": 3672,
        "endChar": 39
      },
      "revId": "c7bb33c78f90cbd56bae5eb30217fd748791d872",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4eb7bbcd_f4d53c50",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 2
      },
      "lineNbr": 3672,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-08-09T17:27:58Z",
      "side": 0,
      "message": "Noticed that you gave the function:\n\n    if (cpi-\u003eoxcf.q_cfg.aq_mode \u003d\u003d CYCLIC_REFRESH_AQ \u0026\u0026\n        !cpi-\u003erc.rtc_external_ratectrl) {\n      av1_cyclic_refresh_update_segment(cpi, x, mi_row, mi_col, bsize,\n                                        ctx-\u003erd_stats.rate, ctx-\u003erd_stats.dist,\n                                        txfm_info-\u003eskip_txfm, dry_run);\n    }\n\nThese conditions here seem different from the frame level update condition?\n if (cpi-\u003eoxcf.q_cfg.aq_mode \u003d\u003d CYCLIC_REFRESH_AQ \u0026\u0026 !cpi-\u003erc.rtc_external_ratectrl)\nvs\n if (cm-\u003eseg.update_map)\n \nCould you explain? Thanks.",
      "parentUuid": "276c45ed_9d29f6f8",
      "range": {
        "startLine": 3672,
        "startChar": 6,
        "endLine": 3672,
        "endChar": 39
      },
      "revId": "c7bb33c78f90cbd56bae5eb30217fd748791d872",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9ad26745_50d13c7b",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 2
      },
      "lineNbr": 3672,
      "author": {
        "id": 8893
      },
      "writtenOn": "2022-08-10T18:04:25Z",
      "side": 0,
      "message": "Copy of segment ids to segmentation map buffer happens at block level during bitstream write in set_spatial_segment_id() whenever seg.enabled\u003d1 and seg.update_map\u003d1 (In case of rt aq-mode\u003d3, copy at block level also happens in av1_cyclic_refresh_update_segment() which is used later in av1_cyclic_reset_segment_skip()). \n\nWe also tested the patch for rtc-screen testset (--tune-content\u003dscreen) and the results are as follows:\n```\n               Instruction Count  \ncpu  Resolution   Reduction(%)            \n9    rtc-screen      1.329    \n10   rtc-screen      1.591\n```\nWe have verified that the patch is bit-exact for rt speed\u003d6,7,8,9,10 (aq-mode\u003d3) and also for good cpu-used\u003d6 with aq-mode\u003d1, 2. Also, as the change is not specific to rt, we have removed the \u0027rtc:\u0027 prefix from the commit message. \n\nPlease let us know your opinion.",
      "parentUuid": "4eb7bbcd_f4d53c50",
      "range": {
        "startLine": 3672,
        "startChar": 6,
        "endLine": 3672,
        "endChar": 39
      },
      "revId": "c7bb33c78f90cbd56bae5eb30217fd748791d872",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}