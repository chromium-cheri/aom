{
  "comments": [
    {
      "key": {
        "uuid": "82bea1ab_54713ecb",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T16:59:06Z",
      "side": 1,
      "message": "Nit: We can delete the kMinimumBufferSize constant and use the new OBU_MAX_HEADER_SIZE macro directly.",
      "range": {
        "startLine": 124,
        "startChar": 15,
        "endLine": 124,
        "endChar": 33
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "325c0851_8562fd0e",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 5215
      },
      "writtenOn": "2018-09-28T17:28:46Z",
      "side": 1,
      "message": "I prefer the constant here because its name makes the intent of the check below more clear.",
      "parentUuid": "82bea1ab_54713ecb",
      "range": {
        "startLine": 124,
        "startChar": 15,
        "endLine": 124,
        "endChar": 33
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc03ed42_a1563466",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 124,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T17:40:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "325c0851_8562fd0e",
      "range": {
        "startLine": 124,
        "startChar": 15,
        "endLine": 124,
        "endChar": 33
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "89b227a2_7744fa28",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 210,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T16:59:06Z",
      "side": 1,
      "message": "Optional: I suggest reformatting this block to return early on error:\n\n  if (!new_buffer) {\t\n    fprintf(stderr, \"obudec: Failed to allocate compressed data buffer.\\n\");\n    return -1;\n  }\n  *obu_buffer \u003d new_buffer;\n  *obu_buffer_capacity \u003d new_capacity;\n  return 0;",
      "range": {
        "startLine": 203,
        "startChar": 0,
        "endLine": 210,
        "endChar": 11
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fb6ae7ba_ea0bf608",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 210,
      "author": {
        "id": 5215
      },
      "writtenOn": "2018-09-28T17:28:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "89b227a2_7744fa28",
      "range": {
        "startLine": 203,
        "startChar": 0,
        "endLine": 210,
        "endChar": 11
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bd40bf38_82a076fa",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 225,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T16:59:06Z",
      "side": 1,
      "message": "Optional: We should grow more here, otherwise we will almost certainly need to grow again when we read the OBU payload.\n\nI think growing by the current capacity should be reasonable here.",
      "range": {
        "startLine": 225,
        "startChar": 25,
        "endLine": 225,
        "endChar": 44
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a0491fbe_9249c98b",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 225,
      "author": {
        "id": 5215
      },
      "writtenOn": "2018-09-28T17:28:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "bd40bf38_82a076fa",
      "range": {
        "startLine": 225,
        "startChar": 25,
        "endLine": 225,
        "endChar": 44
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7b585751_ba896ebf",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 227,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T16:59:06Z",
      "side": 1,
      "message": "Should we set *obu_length to some value, as we do at line 241 and line 250?",
      "range": {
        "startLine": 227,
        "startChar": 4,
        "endLine": 227,
        "endChar": 14
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2f743f6_4effe2d4",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 227,
      "author": {
        "id": 5215
      },
      "writtenOn": "2018-09-28T17:28:46Z",
      "side": 1,
      "message": "I assigned bytes_read, which is still 0 at this point-- it lets the caller know where in the obu reading process the read failed, which is all the intent was in the first place for the assignments below.",
      "parentUuid": "7b585751_ba896ebf",
      "range": {
        "startLine": 227,
        "startChar": 4,
        "endLine": 227,
        "endChar": 14
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65c80ad9_d80150c1",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 227,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T17:40:56Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b2f743f6_4effe2d4",
      "range": {
        "startLine": 227,
        "startChar": 4,
        "endLine": 227,
        "endChar": 14
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d32116fa_64a86ecc",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 243,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T16:59:06Z",
      "side": 1,
      "message": "Should this check be moved into the obudec_grow_buffer() function? It seems that this check is intended to keep *obu_buffer_capacity \u003c\u003d 25 MB.",
      "range": {
        "startLine": 238,
        "startChar": 0,
        "endLine": 243,
        "endChar": 3
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4eca6366_8201eca3",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 243,
      "author": {
        "id": 5215
      },
      "writtenOn": "2018-09-28T17:28:46Z",
      "side": 1,
      "message": "I removed this check-- after thinking about it a little I don\u0027t think we want to restrict the OBU payload to such a small size. I believe 4K and 8K lossless streams would almost certainly contain OBU_FRAME OBUs with payloads that large.",
      "parentUuid": "d32116fa_64a86ecc",
      "range": {
        "startLine": 238,
        "startChar": 0,
        "endLine": 243,
        "endChar": 3
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9d8923bf_d8ca587f",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 243,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T17:40:56Z",
      "side": 1,
      "message": "I am so sorry for the typo! It\u0027s 256 MB, not 25 MB. 256 MB is huge. If a 256 MB buffer is not big enough for OBU_FRAME OBUs, it means AV1 does not compress well!\n\nPerhaps you think relying on the new_capacity \u003e AOM_MAX_ALLOCABLE_MEMORY check is good enough? I still think we can use a smaller size for the buffer that holds compressed data.",
      "parentUuid": "4eca6366_8201eca3",
      "range": {
        "startLine": 238,
        "startChar": 0,
        "endLine": 243,
        "endChar": 3
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "67cfa0b7_d2431a71",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 243,
      "author": {
        "id": 5215
      },
      "writtenOn": "2018-09-28T18:08:05Z",
      "side": 1,
      "message": "Np! I should have read the code more closely before deleting it. I\u0027ve restored the check. \n\nI think it\u0027s better to keep it here since this was originally added to deal with a fuzzed file containing an impossibly large OBU payload.",
      "parentUuid": "9d8923bf_d8ca587f",
      "range": {
        "startLine": 238,
        "startChar": 0,
        "endLine": 243,
        "endChar": 3
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c801cce4_6e812edc",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 9545
      },
      "writtenOn": "2018-09-28T16:59:06Z",
      "side": 1,
      "message": "Nit: Use the AOMMAX macro?  AOMMAX(*obu_buffer_capacity, obu_payload_length)",
      "range": {
        "startLine": 246,
        "startChar": 25,
        "endLine": 248,
        "endChar": 49
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "531a76fc_eb1ef6f7",
        "filename": "common/obudec.c",
        "patchSetId": 1
      },
      "lineNbr": 248,
      "author": {
        "id": 5215
      },
      "writtenOn": "2018-09-28T17:28:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c801cce4_6e812edc",
      "range": {
        "startLine": 246,
        "startChar": 25,
        "endLine": 248,
        "endChar": 49
      },
      "revId": "d650eb0c00906a0d54c6996ad8fe8a087cbcb36a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}