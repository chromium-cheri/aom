{
  "comments": [
    {
      "key": {
        "uuid": "281b2a99_c32949ae",
        "filename": "av1/decoder/decodeframe.c",
        "patchSetId": 22
      },
      "lineNbr": 3069,
      "author": {
        "id": 5075
      },
      "writtenOn": "2018-03-03T00:35:51Z",
      "side": 1,
      "message": "It may be a good idea to initialize cm-\u003eprimary_ref_frame to PRIMARY_REF_NONE outside of this if. That also lets you get rid of the extra clauses in the conditional around line 3425, and just check for that value.",
      "revId": "0d02f3261b8f4763eb1593b023266486fc966c89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6b4aab78_0ea9905d",
        "filename": "av1/decoder/decodeframe.c",
        "patchSetId": 22
      },
      "lineNbr": 3069,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-03-06T00:03:10Z",
      "side": 1,
      "message": "Done. Had to move it pretty high up.",
      "parentUuid": "281b2a99_c32949ae",
      "revId": "0d02f3261b8f4763eb1593b023266486fc966c89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "21bf999c_b61cc459",
        "filename": "av1/decoder/decodeframe.c",
        "patchSetId": 22
      },
      "lineNbr": 3072,
      "author": {
        "id": 5075
      },
      "writtenOn": "2018-03-03T00:35:51Z",
      "side": 1,
      "message": "It looks like this array only has 7 elements. What happens if you read PRIMARY_REF_NONE here?",
      "revId": "0d02f3261b8f4763eb1593b023266486fc966c89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "15a2ab48_5c513161",
        "filename": "av1/decoder/decodeframe.c",
        "patchSetId": 22
      },
      "lineNbr": 3072,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-03-06T00:03:10Z",
      "side": 1,
      "message": "Probably twsmith\u0027s fuzzer would pwn me. Considered doing \u003c LAST_FRAME - ALTREF_FRAME like the bitstream.c loop does but that\u0027s even less clear imo.",
      "parentUuid": "21bf999c_b61cc459",
      "revId": "0d02f3261b8f4763eb1593b023266486fc966c89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8832e463_eb0c4cf2",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 22
      },
      "lineNbr": 342,
      "author": {
        "id": 5075
      },
      "writtenOn": "2018-03-03T00:35:51Z",
      "side": 1,
      "message": "Why not just initialize it to this to start with?",
      "revId": "0d02f3261b8f4763eb1593b023266486fc966c89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "28ae9268_beedc392",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 22
      },
      "lineNbr": 342,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-03-06T00:03:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "8832e463_eb0c4cf2",
      "revId": "0d02f3261b8f4763eb1593b023266486fc966c89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "673c1266_6d2b8ee0",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 22
      },
      "lineNbr": 362,
      "author": {
        "id": 5075
      },
      "writtenOn": "2018-03-03T00:35:51Z",
      "side": 1,
      "message": "Again, it feels like it would be better to initialize cm-\u003eprimary_ref_frame to PRIMARY_REF_NONE in the intra-only/error-resilient-mode case (and I guess also the keyframe case?) More accurately, always initialize to PRIMARY_REF_NONE and only set it to something else when that\u0027s actually valid. That reduces the damage that can be done if someone accidentally uses this index for something without doing exactly the same checks. Current that would leave them using a stale value from a previous frame.",
      "revId": "0d02f3261b8f4763eb1593b023266486fc966c89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "aa4d3f62_8c0201de",
        "filename": "av1/encoder/encoder.c",
        "patchSetId": 22
      },
      "lineNbr": 362,
      "author": {
        "id": 5050
      },
      "writtenOn": "2018-03-06T00:03:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "673c1266_6d2b8ee0",
      "revId": "0d02f3261b8f4763eb1593b023266486fc966c89",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0",
      "unresolved": false
    }
  ]
}