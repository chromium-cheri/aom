{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4f8e40ad_d3bb0fa1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 32923
      },
      "writtenOn": "2023-09-01T09:39:42Z",
      "side": 1,
      "message": "In this CL, we have refactored the logic of `prune_sub_8x8`, as suggested in the CL (https://aomedia-review.googlesource.com/c/aom/+/178521). \n\nThe variable `num_neighbors_lt_8x8` is changed to ` num_neighbors_le_8x8` as it gets incremented for neighbors with size \u003c\u003d BLOCK_8X8.\n\nThese changes are bit-exact.",
      "revId": "dd26bebd62972900193b9124fa2a53b87ea6416a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "001c1e06_50f95649",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-09-01T20:51:43Z",
      "side": 1,
      "message": "Hi Samuthirika,\n\nThank you for following up and writing the CL. After analyzing the new code, I found that it can be further simplified to essentially the logic described in the comment \"Prune if both neighbors are available and either is \u003e BLOCK_8X8.\"",
      "revId": "dd26bebd62972900193b9124fa2a53b87ea6416a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7fe776f7_764bd647",
        "filename": "av1/encoder/partition_strategy.c",
        "patchSetId": 1
      },
      "lineNbr": 1664,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-09-01T20:51:43Z",
      "side": 1,
      "message": "When rewritten this way, it is not necessary to use the `num_neighbors_le_8x8` variable. Lines 1658-1664 are equivalent to the following:\n\n```\n        // Prune if both neighbors are available and either is \u003e BLOCK_8X8\n        if (xd-\u003eleft_mbmi-\u003ebsize \u003e BLOCK_8X8 ||\n            xd-\u003eabove_mbmi-\u003ebsize \u003e BLOCK_8X8) {\n          prune_sub_8x8 \u003d 1;\n        }\n```\n\nWe can further combine the nested if\u0027s, so that lines 1656-1665 become the following:\n\n```\n      // Prune if both neighbors are available and either is \u003e BLOCK_8X8.\n      prune_sub_8x8 \u003d xd-\u003eleft_available \u0026\u0026 xd-\u003eup_available \u0026\u0026\n          (xd-\u003eleft_mbmi-\u003ebsize \u003e BLOCK_8X8 ||\n           xd-\u003eabove_mbmi-\u003ebsize \u003e BLOCK_8X8);\n```",
      "revId": "dd26bebd62972900193b9124fa2a53b87ea6416a",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}