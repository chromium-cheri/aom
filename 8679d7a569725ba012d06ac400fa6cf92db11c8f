{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "596e3ea7_efe6ea8c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-07-09T22:00:15Z",
      "side": 1,
      "message": "Please add the following paragraph from your comment here:\n\nThis change has negligible effect on speed and quality in speed 0 encoding for good and allintra encoding modes. This change is verified to be bit-exact for speed \u003e 0 in good and allintra encoding modes.",
      "revId": "8679d7a569725ba012d06ac400fa6cf92db11c8f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "495a4ed5_6988f1b8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 14993
      },
      "writtenOn": "2021-07-11T16:18:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "596e3ea7_efe6ea8c",
      "revId": "8679d7a569725ba012d06ac400fa6cf92db11c8f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "479b0be5_4997af21",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-07-09T22:00:15Z",
      "side": 1,
      "message": "Optional: We should file a new bug for the CLs related to your work on screen content tools. Does such a bug already exist?",
      "revId": "8679d7a569725ba012d06ac400fa6cf92db11c8f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b560f3a_a5f5d575",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 33,
      "author": {
        "id": 14993
      },
      "writtenOn": "2021-07-11T16:18:31Z",
      "side": 1,
      "message": "Done. Created the following bug report to track CLs related to speedup of screen content tools in allintra usage:\n\nhttps://bugs.chromium.org/p/aomedia/issues/detail?id\u003d3096",
      "parentUuid": "479b0be5_4997af21",
      "revId": "8679d7a569725ba012d06ac400fa6cf92db11c8f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f324a01c_6ac3cac3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 14993
      },
      "writtenOn": "2021-07-03T15:53:45Z",
      "side": 1,
      "message": "Hi Wan-Teh/Frank,\n\nThis patch introduces a separate handling for speed 0 case where the speed feature prune_palette_search_level is 0. The order of luma palette_size\nevaluation in av1_rd_pick_palette_intra_sby() is changed from descending order to ascending order in order to facilitate early exit based on palette header rdcost.\n\nThis change has negligible effect on speed and quality in speed 0 encoding for good and allintra encoding modes. This change is verified to be bit-exact for speed \u003e 0 in good and allintra encoding modes.\n\nBy changing the palette_size evaluation to ascending order, the reference best_rd value for palette_size evaluation changes and the transform search decisions change because of early exits present in search_tx_type. (sf adaptive_txb_search_level) This causes the bitstream mismatch when we change the palette_size evaluation from descending order to ascending order.\n\nFollowing are instruction count reduction results when AVIF encode was tested for a typical image dataset.\n\nwith --tune\u003dpsnr,\n\n          Instruction Count    BD-Rate Loss(%)\ncpu-used     Reduction(%)      psnr       ssim\n   0           -0.001          0.0001     0.0000\n\nwith --tune\u003dssim,\n\n          Instruction Count    BD-Rate Loss(%)\ncpu-used     Reduction(%)      psnr       ssim\n   0           -0.001         -0.0002    -0.0001\n\nFollowing are instruction count reduction results when allintra video encode was tested for the screen content test set.\n\n          Instruction Count        BD-Rate Loss(%)\ncpu-used     Reduction(%)   avg.psnr  ovr.psnr    ssim\n   0          -0.044        -0.0014   -0.0015     0.0000\n\nFollowing are instruction count reduction results when good video encode was tested for the screen content test set.\n\n          Instruction Count        BD-Rate Loss(%)\ncpu-used     Reduction(%)   avg.psnr  ovr.psnr    ssim\n   0           0.031         0.0078    0.0056    -0.0094\n\nThe patch which enables early exit in palette_size search based on header rdcost in speed 0 path is submitted as a dependent patch at the link mentioned below:\nhttps://aomedia-review.googlesource.com/c/aom/+/141262\n  \nIn the commit message, BD rate impact column:\n[+] sign is for BD-Rate drop\n[-] sign is for BD-Rate improvement\nThe instruction count reduction specified has been measured using command:\n$ perf stat -e instructions:u ./avifenc â€¦\n\nPlease review.\n\nRegards,\nJayasanker.",
      "revId": "8679d7a569725ba012d06ac400fa6cf92db11c8f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "acc0c757_746a7f93",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-07-09T22:00:15Z",
      "side": 1,
      "message": "Hi Jayasanker: I suggest two small changes.\n\nCheng, Chi Yo: Could you also take a look? Thanks.",
      "revId": "8679d7a569725ba012d06ac400fa6cf92db11c8f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b215d835_b86885e9",
        "filename": "av1/encoder/palette.c",
        "patchSetId": 3
      },
      "lineNbr": 522,
      "author": {
        "id": 9545
      },
      "writtenOn": "2021-07-09T22:00:15Z",
      "side": 1,
      "message": "Since this case is similar to the \"else\" block, I suggest we restructure this if-else-if-else statement as follows:\n\n    if ((cpi-\u003esf.intra_sf.prune_palette_search_level \u003d\u003d 1) \u0026\u0026\n         (colors \u003e PALETTE_MIN_SIZE)) {\n      ... existing code ...\n    } else if (cpi-\u003esf.intra_sf.prune_palette_search_level \u003d\u003d 0) {\n      ... new code ...\n    } else {\n      ... existing code ...\n    }",
      "revId": "8679d7a569725ba012d06ac400fa6cf92db11c8f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ae9650f1_cf8ac9fc",
        "filename": "av1/encoder/palette.c",
        "patchSetId": 3
      },
      "lineNbr": 522,
      "author": {
        "id": 14993
      },
      "writtenOn": "2021-07-11T16:18:31Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b215d835_b86885e9",
      "revId": "8679d7a569725ba012d06ac400fa6cf92db11c8f",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}