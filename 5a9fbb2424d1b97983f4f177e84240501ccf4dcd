{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b68cfc18_4fa7f303",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 25
      },
      "lineNbr": 0,
      "author": {
        "id": 15298
      },
      "writtenOn": "2020-12-03T15:31:26Z",
      "side": 1,
      "message": "Debargha, Sarah and Urvang,\n\nBelow are the borg results for the patchset-24.\n\nTEST 1:\nReference \u003d --subgop-config-str\u003denh, --end-usage\u003dq\nTest (patchset-24) \u003d --subgop-config-str\u003denh, --end-usage\u003dq\n\n cpu-used   Instruction count         BD-Rate Loss(%)\n              Reduction(%)     avg.psnr   ovr.psnr   ssim\n    0          -0.162          0.0529    0.0630     0.0606\n    1          -0.183          0.0412    0.0499     0.0676\n    2          -0.184          0.0386    0.0501     0.0578\n    3          -0.174         -0.0020    0.0202    -0.0070\n    4          -0.088         -0.1396   -0.1325    -0.1476\n    5          -0.061         -0.1413   -0.1350    -0.1439\n    6          -0.073         -0.1393   -0.1315    -0.1473\n\nTEST 2:\nReference \u003d --subgop-config-str\u003denh, --end-usage\u003dvbr\nTest (patchset-24) \u003d --subgop-config-str\u003denh, --end-usage\u003dvbr\n\n cpu-used   Instruction count         BD-Rate Loss(%)\n             Reduction(%)      avg.psnr  ovr.psnr   ssim\n    0           8.205          -0.0330   0.3566    -0.6804\n    1           7.731          -0.0046   0.3900    -0.6490\n    2           7.157           0.0687   0.4952    -0.5720\n    3           5.963          -0.1540   0.2735    -0.6250\n    4           5.048          -0.2826   0.1321    -0.7353\n    5           4.001          -0.2174   0.2071    -0.7136\n    6           3.951          -0.1936   0.2421    -0.6822\n\nTEST 3:\nReference \u003d no-subgop(default encoder strategy path), --end-usage\u003dq\nTest (patchset-24) \u003d no-subgop(default encoder strategy path), --end-usage\u003dq\n\n cpu-used   Instruction count         BD-Rate Loss(%)\n              Reduction(%)     avg.psnr   ovr.psnr   ssim\n    1         -0.167            0.0866    0.1008    0.0795\n    5         -0.105            0.0666    0.0814    0.0461\n\nTEST 4:\nReference \u003d no-subgop(default encoder strategy path), --end-usage\u003dq\nTest (patchset-24) \u003d --subgop-config-str\u003denh, --end-usage\u003dq\n\ncpu-used   Instruction count         BD-Rate Loss(%)\n              Reduction(%)     avg.psnr   ovr.psnr   ssim\n    1         -0.328           -0.1682    -0.2083  -0.0195\n    5         -0.533            0.1108     0.0770   0.2419\n\nTEST 5:\nReference \u003d --subgop-config-str\u003ddef, --end-usage\u003dq\nTest (patchset-24) \u003d --subgop-config-str\u003ddef, --end-usage\u003dq\n\n cpu-used   Instruction count         BD-Rate Loss(%)\n              Reduction(%)     avg.psnr   ovr.psnr   ssim\n    1            -0.267        0.0930     0.1073    0.0865\n    5            -0.132        0.0777     0.0921    0.0597\n\nRegarding –subgop-config-str\u003dld test:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nDebargha,\n\nWe noticed an issue in ‘ld’ configuration in case of parent commit. With –lag-in-frames\u003d1, --auto-alt-ref\u003d0 configuration the parent commit uses 0th frame only as  reference (first key frame) and none of other frames are used as references. Below is the sample command line we tried,\n\n--subgop-config-str\u003dld  --codec\u003dav1 --good --ivf --cpu-used\u003d1 --threads\u003d1 --profile\u003d0 --bit-depth\u003d8 --enable-cdef\u003d1 --end-usage\u003dq --limit\u003d160 --lag-in-frames\u003d1 --min-qp\u003d0 --max-qp\u003d255 --auto-alt-ref\u003d0 --passes\u003d1 --kf-max-dist\u003d160 --kf-min-dist\u003d0 --drop-frame\u003d0 --static-thresh\u003d0 --arnr-maxframes\u003d7 --arnr-strength\u003d5 --sharpness\u003d0 --undershoot-pct\u003d100 --overshoot-pct\u003d100 --frame-parallel\u003d0 --tile-columns\u003d0 --tile-rows\u003d0 --cq-level\u003d63 -o mobcal_720p50_0_63_qp.ivf mobcal_720p50.y4m -v --psnr\n\nRegarding patchset-25:\n\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\u003d\nWe noticed an out of bound access happening in get_subgop_step(). In parent version, for frame_update_type \u003d\u003d KF_UPDATE the gf_group-\u003elast_step_prev \u003d\u003d NULL, so this will not be accessed, we have fixed this issue in patchset-25. Also verified, this is bitmatch with patchset24. We feel that bit-match is expected in this case as the relevant data is not consumed.\n\nPlease review the patch.\nThanks.",
      "revId": "5a9fbb2424d1b97983f4f177e84240501ccf4dcd",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d0235fb_a1a0d074",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 25
      },
      "lineNbr": 0,
      "author": {
        "id": 5290
      },
      "writtenOn": "2020-12-03T18:40:52Z",
      "side": 1,
      "message": "One suggestion below. Otherwise looks good.",
      "revId": "5a9fbb2424d1b97983f4f177e84240501ccf4dcd",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}