{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "6cb1e0ac_24f573ce",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 5020
      },
      "writtenOn": "2023-12-14T20:15:46Z",
      "side": 1,
      "message": "please use the output from `git log --oneline -1 HEAD^` to describe the commit. The parent may change when this is submitted.",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 20
      },
      "revId": "3864eb29e4003c8748c54f9563e243713efa170c",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ed358311_60b23f2a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 25857
      },
      "writtenOn": "2023-12-14T17:11:54Z",
      "side": 1,
      "message": "In the parent commit, workers are created (`winterface-\u003ereset(worker)`) in `av1_create_workers()` in the descending order, and terminated (`winterface()-\u003eend(worker)`) in `av1_terminate_workers()` in the ascending order. \n\nBecause of this inconsistency, if creation of a worker (other than first and last worker) fails, it will cause a SEGV error while terminating workers who were not created (`p_mt_info-\u003eworkers` is allocated using `aom_malloc()`). The SEGV error can be avoided if `p_mt_info-\u003eworkers` is allocated using `aom_calloc()`, but the successfully created workers will not be terminated and show up as leaks, as the worker termination for loop is based on `p_mt_info-\u003enum_workers` which is populated based on the number of successful worker creations. This CL fixes these issues by creating the workers in the same order as it will be freed.\n\nThis change is bit-exact and has been verified using bitstream-match tests for a combination of various configuration values for --threads, --tile-rows, --tile-columns, --cpu-used, --end-usage, --row-mt, --fp-mt, etc. Validated all unit-tests with sanitizers (address and thread) and valgrind.",
      "revId": "3864eb29e4003c8748c54f9563e243713efa170c",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "035ba12b_c760be71",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9545
      },
      "writtenOn": "2023-12-14T21:23:31Z",
      "side": 1,
      "message": "Mudassir: Thank you very much for the bug fix.\n\nThis bug was introduced in https://aomedia-review.googlesource.com/c/aom/+/184761 at my suggestion. So it\u0027s my fault. In case there is some subtle reason for the original order, I suggest we change `av1_terminate_workers()` back to the original order.\n\nIn the interest of time, I will write a CL to do that, with due credit to your CL.",
      "revId": "3864eb29e4003c8748c54f9563e243713efa170c",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}