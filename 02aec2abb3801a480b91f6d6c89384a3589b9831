{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b6288def_13e9b42b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14993
      },
      "writtenOn": "2021-11-04T10:38:55Z",
      "side": 1,
      "message": "Hi Chi Yo, Yunqing,\n\nIt was observed that alloc_token_info() was getting called during the stats generation stage, even though token related buffers are not required during first-pass and LAP stages. This patch avoids the call to alloc_token_info() during the stats generation stage.\n\nThe condition \"!is_stat_generation_stage(cpi)\" for calling alloc_token_info() was already present in the encoder and the same got left out in the following CL:\nhttps://aomedia-review.googlesource.com/c/aom/+/148021\n\nThe CL mentioned above had increased the heap memory consumption in first-pass and LAP stages when screen content coding tools were enabled for these stages. We observed ~2.1% average heap memory increase in the first pass when screen content coding tools were enabled. This undesired heap memory increase is eliminated with this CL.\n\nFor libaom AV1 video encode, bit-match is verified (w.r.t. parent commit) for \u0027GOOD\u0027, \u0027RT\u0027 and \u0027ALLINTRA\u0027 encoding modes for a few contents with different encoding configurations. It was also verified that the output of AVIF encode is bit-exact w.r.t. parent version for a typical image dataset.\n\nPlease review.\n\nRegards,\nJayasanker.",
      "revId": "02aec2abb3801a480b91f6d6c89384a3589b9831",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}