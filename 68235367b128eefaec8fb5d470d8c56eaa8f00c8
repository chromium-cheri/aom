{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "f0901331_ecd795cf",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9611
      },
      "writtenOn": "2021-06-08T15:40:47Z",
      "side": 1,
      "message": "Hi Wan-Teh/Yunqing,\n\nThe handling of speed feature intra_y_mode_mask was added in the following CL for intra frames.\nhttps://aomedia-review.googlesource.com/c/aom/+/138781.\n\nThis CL disables the sf intra_y_mode_mask as the trade-off is seen to be worse for allintra encode.\n\nFollowing are instruction count reduction results when AVIF encode was tested for a typical image dataset. Bit match is verified for presets \u003c\u003d 3.\n\n                Instruction Count  BD-Rate Loss(%)      \n      cpu-used    Reduction(%)     psnr     ssim\n       4           -3.252         -1.5948  -1.7389\n       5           -5.155         -1.6144  -1.7165\n       6           -2.597         -1.3882  -1.3959   \n\nFollowing are instruction count reduction results when tested libaom with all intra frame encoding for a borg setup. Bit match is verified for presets \u003c\u003d 3.\n\n               Instruction Count       BD-Rate Loss(%)      \n     cpu-used    Reduction(%)     avg.psnr  ovr.psnr   ssim  \n         4        -1.678\t -1.2968   -1.2937    -1.3411\n         5        -3.418\t -1.3295   -1.3263    -1.3719  \n         6        -1.905\t -1.1921   -1.1908    -1.0957  \n\nFor libaom AV1 video encode, bit match is verified (w.r.t parent commit) for encoding modes \u0027GOOD\u0027 and \u0027RT\u0027 for few videos with different video encoding configurations.\n\nWe tried some conservative experiments by setting the intra_y_mode_mask (to INTRA_DC_H_V_SMOOTH, INTRA_DC_PAETH_H_V etc), but none of the experiments seem to be give better trade-off (than current CL). Hence, we chose to disable this sf completely.\n\nOnce the patch gets merged, we shall plan to do similar experiments with intra_uv_mode_mask sf and submit a patch accordingly.\n\nIn the commit message, BD rate impact column:\n[+] sign is for BD-Rate drop\n[-] sign is for BD-Rate improvement\nThe instruction count reduction specified has been measured using command:\n$ perf stat -e instructions:u ./avifenc â€¦\n\nPlease review the patch.\n\nThanks \u0026 Regards,\nVenkata.",
      "revId": "68235367b128eefaec8fb5d470d8c56eaa8f00c8",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}