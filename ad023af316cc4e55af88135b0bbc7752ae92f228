{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "6792335e_12653dfe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9101
      },
      "writtenOn": "2022-07-18T12:37:47Z",
      "side": 1,
      "message": "Hi Yunqing,\nThis patch fixes the run-to-run mismatch observed in RT, screen for a 4K content. This issue is due to incorrect transform block size used in model rd computation of chroma block. The issue is applicable only when max_intra_bsize is set to 128x128.\nWhen luma block size is 128x128, chroma block is using 32x32 as tx size. In such cases model rd for chroma block should be computed for each tx block (i.e., 32x32), whereas the current code, model rd is computed for 64x64. Hence, blocks on the tile/frame boundary use samples beyond the block size.\nThis issue is not seen in --tune-content\u003ddefault since max_intra_bsize is limited to BLOCK_32X32. Hence the patch is bit-exact for the same.\n\nPlease check the performance results for --tune-content\u003dscreen for screen content test set.\n\n```\n    Instruction Count                     BD-Rate Loss(%)\ncpu   Reduction(%) avg.psnr  ovr.psnr   ssim     psnr.y   psnr.cb   psnr.cr\n 7      -0.033      0.1114    0.0137   -0.1102   0.1226    0.1077    0.1235\n 8      -0.026     -0.0561   -0.2427   -0.3964  -0.1254    0.0338   -0.0051\n 9       0.068      0.1721    0.2637    0.2183   0.1695    0.0859    0.0109\n10       0.034      0.1509    0.1217    0.1631   0.1539    0.0649    0.0684\n```\n\u003e In the commit message:\n\u003e [-] sign indicates encode time increase\n\u003e [+] sign indicates encode time reduction\n\u003e The instruction count reduction specified has been measured using command:\n\u003e $ perf stat -e instructions:u ./aomenc\n\nPlease review the patch.\nThank you.",
      "revId": "ad023af316cc4e55af88135b0bbc7752ae92f228",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "77eb1e5f_6fa49f8c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-07-18T14:39:04Z",
      "side": 1,
      "message": "Thanks for the investigation and the fix! Looks good.",
      "parentUuid": "6792335e_12653dfe",
      "revId": "ad023af316cc4e55af88135b0bbc7752ae92f228",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ],
  "submitRequirementResults": [
    {
      "submitRequirement": {
        "name": "Code-Review",
        "description": {
          "value": "At least one maximum vote for label \u0027Code-Review\u0027 is required"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Code-Review\u003dMAX,user\u003dnon_uploader AND -label:Code-Review\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Code-Review=MAX,user=non_uploader AND -label:Code-Review=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Code-Review=MAX,user=non_uploader"],"failingAtoms":["label:Code-Review=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "ad023af316cc4e55af88135b0bbc7752ae92f228",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    },
    {
      "submitRequirement": {
        "name": "Review-Enforcement",
        "description": {
          "value": "Two Google employees must approve the change. Uploading the change or voting positively on Code-Review count as approval."
        },
        "applicabilityExpression": {
          "value": {
            "expressionString": "is:review-enforced_gerrit"
          }
        },
        "submittabilityExpression": {
          "expressionString": "is:review-enforcement-satisfied_gerrit"
        },
        "overrideExpression": {},
        "allowOverrideInChildProjects": false
      },
      "applicabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["is:review-enforced_gerrit"],"failingAtoms":[]}
      },
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforcement-satisfied_gerrit"},"status":"NOT_EVALUATED","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":[]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"is:review-enforced_gerrit"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["is:review-enforcement-satisfied_gerrit"]}
      },
      "patchSetCommitId": "ad023af316cc4e55af88135b0bbc7752ae92f228",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {
        "value": true
      }
    },
    {
      "submitRequirement": {
        "name": "Verified",
        "description": {
          "value": "CI or human verified the change"
        },
        "applicabilityExpression": {},
        "submittabilityExpression": {
          "expressionString": "label:Verified\u003dMAX AND -label:Verified\u003dMIN"
        },
        "overrideExpression": {
          "value": {
            "expressionString": "label:Bot-Commit\u003d+1"
          }
        },
        "allowOverrideInChildProjects": true
      },
      "applicabilityExpressionResult": {},
      "submittabilityExpressionResult": {
        "value": {"expression":{"expressionString":"label:Verified=MAX AND -label:Verified=MIN"},"status":"PASS","errorMessage":{"value":null},"passingAtoms":["label:Verified=MAX"],"failingAtoms":["label:Verified=MIN"]}
      },
      "overrideExpressionResult": {
        "value": {"expression":{"expressionString":"label:Bot-Commit=+1"},"status":"FAIL","errorMessage":{"value":null},"passingAtoms":[],"failingAtoms":["label:Bot-Commit=+1"]}
      },
      "patchSetCommitId": "ad023af316cc4e55af88135b0bbc7752ae92f228",
      "legacy": {
        "value": false
      },
      "forced": {},
      "hidden": {}
    }
  ]
}