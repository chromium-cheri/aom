{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "7676ca1a_7b37ecf6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 9101
      },
      "writtenOn": "2021-10-04T14:36:07Z",
      "side": 1,
      "message": "Hi Yunqing,\nAs per our study, model rd (computed at interpolation filter search) based breakouts are not having impact on encode time without compound mode. Hence we have submitted a patch to skip the same in RT speed 5,6. This patch also skips the interpolation filter search as it is already disabled through SF skip_interp_filter_search. We ensured that this change is applicable only if compound mode and interpolation filter search are disabled.\n\nFor this patch we observed encode time reduction and BD-Rate improvement in BORG test results. Encode time reduction is seen due to skipping of model rd computation at interpolation filter search and BD-Rate improvement seems to be due to avoiding early breakouts conditions as below.\n- prune_comp_search_by_single_result speed feature\n- model_based_post_interp_filter_breakout speed feature\n- model rd based breakouts in and after interpolation filter search\n- skip_repeated_mv()\n\nPlease check the BORG test results.\n               Instruction Count        BD-Rate Loss(%)\ncpu   Test Set   Reduction(%)    avg.psnr   ovr.psnr    ssim\n 5         rtc      1.182        -0.0893    -0.1260   -0.1033\n 5    rtc_derf      1.006        -0.0992    -0.1130   -0.1628\n 5     Average      1.096        -0.0934    -0.1206   -0.1281\n\n 6         rtc      1.293        -0.1032    -0.1314   -0.1015\n 6    rtc_derf      1.331        -0.1132    -0.0609   -0.0576\n 6     Average      1.312        -0.1074    -0.1020   -0.0832\n\nIn the commit message:\n[-] sign indicates encode time increase\n[+] sign indicates encode time reduction\n\nThe instruction count reduction specified has been measured using command: \n$ perf stat -e instructions:u ./aomenc\n\nWe ensured that the change is bit-exact for all presets except RT speed 5,6. Please review the patch.\nThank you.",
      "revId": "89761d493e5e2c21d6c442576b84d7a34cf6f766",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e741dfbc_bf1886bb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 5185
      },
      "writtenOn": "2021-10-04T20:22:38Z",
      "side": 1,
      "message": "Hi Cherma, thanks for the test results and the analysis. This is a good optimization with gains in both speed and quality.",
      "parentUuid": "7676ca1a_7b37ecf6",
      "revId": "89761d493e5e2c21d6c442576b84d7a34cf6f766",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}