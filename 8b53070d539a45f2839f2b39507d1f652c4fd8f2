{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "10239d03_885b2fe0",
        "filename": "av1/encoder/ratectrl.c",
        "patchSetId": 7
      },
      "lineNbr": 179,
      "author": {
        "id": 5610
      },
      "writtenOn": "2022-11-10T12:00:26Z",
      "side": 1,
      "message": "How were these derived? I assume just experimentally, if so on what test material?Are there any clips where the change makes things notably worse?",
      "range": {
        "startLine": 177,
        "startChar": 0,
        "endLine": 179,
        "endChar": 49
      },
      "revId": "8b53070d539a45f2839f2b39507d1f652c4fd8f2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76aa6792_03ac00c8",
        "filename": "av1/encoder/ratectrl.c",
        "patchSetId": 7
      },
      "lineNbr": 179,
      "author": {
        "id": 5185
      },
      "writtenOn": "2022-11-10T17:07:54Z",
      "side": 1,
      "message": "Yes, the parameters were derived experimentally using videos in rtc test set. There was 1 clip \"desktop360p.y4m\" showed 2+% loss, partly due to different qp decision causing different golden frame decision. I am continuing tuning this to reduce the frame fluctuations. Will update.",
      "parentUuid": "10239d03_885b2fe0",
      "range": {
        "startLine": 177,
        "startChar": 0,
        "endLine": 179,
        "endChar": 49
      },
      "revId": "8b53070d539a45f2839f2b39507d1f652c4fd8f2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2ea9b890_dea5b15f",
        "filename": "av1/encoder/ratectrl.c",
        "patchSetId": 7
      },
      "lineNbr": 653,
      "author": {
        "id": 5190
      },
      "writtenOn": "2022-11-09T21:48:01Z",
      "side": 1,
      "message": "This will change/reset the rc factors on every key frame (first and any inserted/forced one into stream). Prefer not to change the effect on subsequent/forced key frames, since they are not being tested here. So add this for very first frame only:\n\nif (cpi-\u003esf.hl_sf.accurate_bit_estimate \u0026\u0026 p_rc-\u003ethis_key_frame_forced \u003d\u003d 0) {",
      "revId": "8b53070d539a45f2839f2b39507d1f652c4fd8f2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1fe686d8_b9ab45f7",
        "filename": "av1/encoder/speed_features.c",
        "patchSetId": 7
      },
      "lineNbr": 1439,
      "author": {
        "id": 5190
      },
      "writtenOn": "2022-11-09T21:48:01Z",
      "side": 1,
      "message": "You can still have it on for single layer, so\nif (cpi-\u003esvc.number_spatial_layers \u003e 1 || cpi-\u003esvc.number_temporal_layers \u003e 1)\n  sf-\u003ehl_sf.accurate_bit_estimate \u003d 0;\n  \nThen you can run the svc encoder for 1 layer and get as output RC stats that measure rate-mismatch and variance of short-time bitrate average: for example,\n\nexamples/svc_encoder_rtc -sl 1 -tl 1 -lm 0 -k 10000 -b 1000 --bitrates\u003d1000 --min-q\u003d2 --max-q\u003d52 -aq 3 -sp 7 input.y4m -o out.av1",
      "revId": "8b53070d539a45f2839f2b39507d1f652c4fd8f2",
      "serverId": "e5514cf8-2d6e-3e29-adb4-24cd6dde4bf0"
    }
  ]
}